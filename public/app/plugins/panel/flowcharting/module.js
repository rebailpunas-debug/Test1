/*! For license information please see module.js.LICENSE.txt */
define(["lodash","app/plugins/sdk","app/core/utils/kbn","@grafana/data","app/core/time_series2","app/core/app_events"],(function(__WEBPACK_EXTERNAL_MODULE__4__,__WEBPACK_EXTERNAL_MODULE__7__,__WEBPACK_EXTERNAL_MODULE__11__,__WEBPACK_EXTERNAL_MODULE__12__,__WEBPACK_EXTERNAL_MODULE__15__,__WEBPACK_EXTERNAL_MODULE__16__){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=30)}([function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return x})),n.d(e,"g",(function(){return E})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return S})),n.d(e,"a",(function(){return T})),n.d(e,"e",(function(){return L})),n.d(e,"f",(function(){return M}));var r,i=n(1),a=n(4),o=n.n(a),s=n(6),l=n.n(s),u=n(2),c=n(10);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(){f=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),o=new O(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function d(){}function p(){}function v(){}var g={};s(g,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&n.call(m,i)&&(g=m);var b=v.prototype=d.prototype=Object.create(g);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==h(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(f).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,s(b,"constructor",v),s(v,"constructor",p),p.displayName=s(v,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,o,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),s(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new w(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},_(b),s(b,o,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(t){s=!0,i=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(t,e)||v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _=n(13),w=["data_updated","data_processed","variables_changed","editmode_opened","editmode_closed","debug_asked","panel_closed","mapping_enabled","mapping_disabled","xcell_clicked"],x=m((function t(){b(this,t)}));r=x,x.CONF_PATH_LIBS="libs/",x.CONF_PATH_DRAWIO="libs/drawio/",x.CONF_PATH_DRAWIOJS="libs/drawio/js",x.CONF_PATH_STATIC="static/",x.CONF_PATH_PARTIALS="partials/",x.CONF_PATH_STYLES="styles/",x.CONF_FILE_PLUGINJSON="./plugin.json",x.CONF_FILE_DEFAULTDIO="static/defaultGraph.drawio",x.CONF_FILE_DEFAULTCSV="static/defaultGraph.csv",x.CONF_FILE_SHAPESTXT="static/shapes.txt",x.CONF_NAME_APPJS="app.min.js",x.CONF_NAME_INTEGRATEJS="app.min.js",x.CONF_NAME_SHAPESJS="shapes.min.js",x.CONF_NAME_VIEWERJS="viewer.min.js",x.CONF_NAME_STATIC_VIEWERJS="viewer-static.min.js",x.CONF_DEFAULT_DRAWIOJS=r.CONF_NAME_STATIC_VIEWERJS,x.CONF_FILE_DRAWIOLIB="".concat(r.CONF_PATH_DRAWIOJS,"/").concat(r.CONF_DEFAULT_DRAWIOJS),x.CONF_FILE_PRECONFIGJS="libs/drawio/js/PreConfig.js",x.CONF_FILE_POSTCONFIGJS="libs/drawio/js/PostConfig.js",x.CONF_FILE_VERSION="VERSION",x.CONF_TOOLTIPS_DELAY=200,x.CONF_GRAPHHOVER_DELAY=50,x.CONF_COLORS_STEPS=5,x.CONF_COLORS_MS=50,x.CONF_ANIMS_STEP=10,x.CONF_ANIMS_MS=50,x.CONF_GFMESSAGE_MS=5e3,x.CONF_BLINK_COLOR="#f5f242",x.CONF_HIGHTLIGHT_COLOR="#99ff33",x.CONF_EDITOR_URL="https://embed.diagrams.net/",x.CONF_EDITOR_THEME="kennedy",x.VAR_STG_SHAPES="shapestext",x.VAR_TBL_SHAPES="shapesarray",x.VAR_STR_VIEWERJS="viewer.min.js",x.VAR_STR_SHAPESJS="shapes.min.js",x.VAR_NUM_GHTIMESTAMP="graph-hover-timestamp",x.VAR_MAP_INTERVAL="interval",x.VAR_MAP_TIMEOUT="timeout",x.VAR_STR_RULENAME="_rule",x.VAR_NUM_LEVEL="_level",x.VAR_NUM_VALUE="_value",x.VAR_STR_FORMATED="_formated",x.VAR_STR_COLOR="_color",x.VAR_STR_DATE="_date",x.VAR_STR_METRIC="_metric",x.VAR_GF_TRACE_PERF=!0,x.MXGRAPH_STYLES_COLOR=["fillColor","strokeColor","gradientColor","fontColor","labelBackgroundColor","labelBorderColor","imageBorder","imageBackground"],x.MXGRAPH_STYLES_EVENT_ANIM=["barPos","gaugePos","fontSize","opacity","textOpacity","rotation"],x.MXGRAPH_STYLES_EVENT_STATIC=["shape","endArrow","startArrow","flipH","flipV","gradientDirection","image"],x.MXGRAPH_STYLES_EVENT=[].concat(p(r.MXGRAPH_STYLES_EVENT_ANIM),p(r.MXGRAPH_STYLES_EVENT_STATIC)),x.MXGRAPH_STYLES_ANIM=[].concat(p(r.MXGRAPH_STYLES_COLOR),p(r.MXGRAPH_STYLES_EVENT_ANIM)),x.MXGRAPH_STYLES_STATIC=p(r.MXGRAPH_STYLES_EVENT_STATIC),x.MXGRAPH_STYLES=[].concat(p(r.MXGRAPH_STYLES_ANIM),p(r.MXGRAPH_STYLES_STATIC)),x.COMP_LT="lt",x.COMP_LE="le",x.COMP_EQ="eq",x.COMP_NE="ne",x.COMP_GE="ge",x.COMP_GT="gt",x.COMP_AL="al",x.TOOLTIP_APPLYON=[{text:"Warning / Critical",value:"wc"},{text:"Always",value:"a"}],x.COLOR_APPLYON=[{text:"Never",value:"n"},{text:"Warning / Critical",value:"wc"},{text:"Always",value:"a"}],x.TEXT_APPLYON=[{text:"Never",value:"n"},{text:"When Metric Displayed",value:"wmd"},{text:"Warning / Critical",value:"wc"},{text:"Critical Only",value:"co"}],x.LINK_APPLYON=[{text:"Warning / Critical",value:"wc"},{text:"Always",value:"a"}],x.VALUE_TYPES=[{text:"Number",value:"number"},{text:"String",value:"string"},{text:"Date",value:"date"}],x.METRIC_TYPES=[{text:"Series",value:"serie"},{text:"Table",value:"table"}],x.SOURCE_TYPES=[{text:"XML",value:"xml"},{text:"CSV",value:"csv"}],x.DIOTHEME_TYPES=[{text:"Dark",value:"dark"},{text:"Light",value:"kennedy"},{text:"Mobile",value:"minimal"},{text:"atlas",value:"atlas"}],x.IDENT_TYPES=[{text:"Id",value:"id"},{text:"Label",value:"value"},{text:"Metadata",value:"metadata"}],x.AGGREGATION_TYPES=[{text:"First",value:"first"},{text:"First (not null)",value:"first_notnull"},{text:"Last",value:"current"},{text:"Last (not null)",value:"current_notnull"},{text:"Min",value:"min"},{text:"Max",value:"max"},{text:"Sum",value:"total"},{text:"Avg",value:"avg"},{text:"Count",value:"count"},{text:"Delta",value:"delta"},{text:"Range",value:"range"},{text:"Diff",value:"diff"},{text:"Time of last point",value:"last_time"}],x.TOOLTIP_GRAPH_TYPES=[{text:"Line",value:"line"},{text:"Histogram",value:"bar"}],x.TOOLTIP_GRAPH_SCALE_TYPES=[{text:"Linear",value:"linear"},{text:"Logarithmic",value:"log"}],x.TOOLTIP_GRAPH_SIZE_TYPES=[{text:"Adjustable",value:"100%"},{text:"Small",value:"100px"},{text:"Medium",value:"200px"},{text:"Large",value:"400px"}],x.TOOLTIP_DIRECTION_TYPES=[{text:"Vertical",value:"v"},{text:"Horizontal ",value:"h"}],x.COMPARATOR_TYPES=[{text:"Always",value:"al"},{text:"Less than",value:"lt"},{text:"Less than or equal to",value:"le"},{text:"Equal to",value:"eq"},{text:"Not equal to",value:"ne"},{text:"Greater than or equal to",value:"ge"},{text:"Greater than ",value:"gt"}],x.VALUE_DATEFORMAT_TYPES=[{text:"YYYY-MM-DD HH:mm:ss",value:"YYYY-MM-DD HH:mm:ss"},{text:"YYYY-MM-DD HH:mm:ss.SSS",value:"YYYY-MM-DD HH:mm:ss.SSS"},{text:"MM/DD/YY h:mm:ss a",value:"MM/DD/YY h:mm:ss a"},{text:"MMMM D, YYYY LT",value:"MMMM D, YYYY LT"},{text:"YYYY-MM-DD",value:"YYYY-MM-DD"}],x.VALUEMAPPINGTYPES=[{text:"Value to text",value:1},{text:"Range to text",value:2}],x.TEXTMETHODS=[{text:"All content",value:"content"},{text:"Substring",value:"pattern",placeholder:"/RegEx/"},{text:"Append (Space) ",value:"as"},{text:"Append (New line) ",value:"anl"}],x.COLORMETHODS=[{text:"Shape Stroke/Border",value:"strokeColor"},{text:"Shape Fill",value:"fillColor"},{text:"Shape Gradient",value:"gradientColor"},{text:"Label font color",value:"fontColor"},{text:"Label background color",value:"labelBackgroundColor"},{text:"Label border color",value:"labelBorderColor"},{text:"Image background",value:"imageBackground"},{text:"Image border",value:"imageBorder"}],x.EVENTMETHODS=[{text:"Shape : Change form (text)",value:"shape",type:"text",placeholder:"Shape name"},{text:"Shape : Rotate Shape (0-360)",value:"rotation",type:"number",placeholder:"0-360",default:0},{text:"Shape : Blink (frequence ms)",value:"blink",type:"number",placeholder:"Number in ms",default:500},{text:"Shape : Hide/Show (0|1)",value:"visibility",type:"number",placeholder:"0 or 1",typeahead:"0|1"},{text:"Shape : Height (number)",value:"height",type:"number",placeholder:"Number of px"},{text:"Shape : Width (number)",value:"width",type:"number",placeholder:"Number of px"},{text:"Shape : Resize (percent)",value:"size",type:"number",placeholder:"percent"},{text:"Shape : Opacity (0-100)",value:"opacity",type:"number",placeholder:"0-100",default:100},{text:"Shape : Gradient direction",value:"gradientDirection",type:"text",placeholder:"Direction name",default:"south",typeahead:"south|east|north|west"},{text:"Shape : Collapse/Expande (0|1)",value:"fold",type:"number",placeholder:"0 or 1",typeahead:"0|1",default:"1"},{text:"Shape : Change position in Bar (0-100)",value:"barPos",type:"number",placeholder:"0-100"},{text:"Shape : Change position in Gauge (0-100)",value:"gaugePos",type:"number",placeholder:"0-100"},{text:"Shape : Flip horizontally (0|1)",value:"flipH",type:"number",placeholder:"0 or 1",typeahead:"0|1"},{text:"Shape : Flip vertically (0|1)",value:"flipV",type:"number",placeholder:"0 or 1",typeahead:"0|1"},{text:"Arrow : change start marker (text)",value:"startArrow",type:"text",placeholder:"Marker",typeahead:"none|classic|classicThin|block|blockThin|open|openThin|oval|diamond|diamondThin|openAsync|async|box|halfCircle|dash|cross|circlePlus|circle|ERone|ERmandOne|ERoneToMany|ERzeroToOne"},{text:"Arrow : change end marker (text)",value:"endArrow",type:"text",placeholder:"Marker",typeahead:"none|classic|classicThin|block|blockThin|open|openThin|oval|diamond|diamondThin|openAsync|async|box|halfCircle|dash|cross|circlePlus|circle|ERone|ERmandOne|ERoneToMany|ERzeroToOne"},{text:"Arrow : Anime flow (frequence ms)",value:"class_mxEdgeFlow",type:"number",placeholder:"Number in ms"},{text:"Label : Replace text (text)",value:"text",type:"text",placeholder:"Text"},{text:"Label : Font Size (numeric)",value:"fontSize",type:"number",placeholder:"Number"},{text:"Label : Opacity (numeric)",value:"textOpacity",type:"number",placeholder:"0-100",default:100},{text:"Image : Change URL (text)",value:"image",type:"text",placeholder:"Url"},{text:"Tooltip : Add/Change tooltip text",value:"tpText",type:"text",placeholder:"text"},{text:"Tooltip : Add/Change metadata key and value",value:"tpMetadata",type:"text",placeholder:"key@value"}],x.LOCALVARIABLENAMES=[{text:"Name of the rule",value:r.VAR_STR_RULENAME},{text:"Current date",value:r.VAR_STR_DATE},{text:"Current color according to the thresholds",value:r.VAR_STR_COLOR},{text:"Current raw value according to the aggregation",value:r.VAR_NUM_VALUE},{text:"Current level according to the thresholds",value:r.VAR_NUM_LEVEL},{text:"Current formated value accordingto the type",value:r.VAR_STR_FORMATED}];var k,E=function(){function t(){b(this,t),this._variables=new Map}return m(t,[{key:"set",value:function(t,e){return this._variables.set(t,e),this}},{key:"unset",value:function(t){return this._variables.delete(t),this}},{key:"get",value:function(t){return this._variables.get(t)}},{key:"keys",value:function(){return Array.from(this._variables.keys())}},{key:"getFullVarsNames",value:function(t){return t.getGrafanaVars().concat(this.getVarsNames())}},{key:"getVarsNames",value:function(){return this.keys().map((function(t){return"${"+t+"}"}))}},{key:"clear",value:function(){return this._variables.clear(),this}},{key:"replaceText",value:function(t){try{var e=S.getTemplateSrv();t=e&&e.replace?e.replace(t):t;var n,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=v(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(this._variables);try{for(r.s();!(n=r.n()).done;){var i=d(n.value,2),a=i[0],o=i[1];t=t.replace("${"+a+"}",o)}}catch(t){r.e(t)}finally{r.f()}}catch(e){return t}return t}},{key:"eval",value:function(t){var e=this.replaceText(t);try{return _(e)}catch(t){return e}}}],[{key:"create",value:function(){return new t}},{key:"getAvailableLocalVarNames",value:function(){return x.LOCALVARIABLENAMES.map((function(t){return"${"+t.value+"}"}))}}]),t}();!function(t){t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR"}(k||(k={}));var O=function(){function t(){b(this,t)}return m(t,null,[{key:"isEnable",value:function(e){return void 0!==t.logEnable&&!0===t.logEnable&&void 0!==t.logLevel&&e>=t.logLevel}},{key:"debug",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Object(i.a)(this,void 0,void 0,f().mark((function e(){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isEnable(k.DEBUG)&&(i=n.shift(),(r=console).log.apply(r,["GF DEBUG : ".concat(i)].concat(n)));case 1:case"end":return e.stop()}}),e)})))}},{key:"warn",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Object(i.a)(this,void 0,void 0,f().mark((function e(){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isEnable(k.WARN)&&(i=n.shift(),(r=console).log.apply(r,["GF WARN : ".concat(i)].concat(n)));case 1:case"end":return e.stop()}}),e)})))}},{key:"info",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Object(i.a)(this,void 0,void 0,f().mark((function e(){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isEnable(k.INFO)&&(i=n.shift(),(r=console).log.apply(r,["GF INFO : ".concat(i)].concat(n)));case 1:case"end":return e.stop()}}),e)})))}},{key:"error",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Object(i.a)(this,void 0,void 0,f().mark((function e(){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isEnable(k.ERROR)&&(i=n.shift(),(r=console).log.apply(r,["GF ERROR : ".concat(i)].concat(n)));case 1:case"end":return e.stop()}}),e)})))}}]),t}();O.logLevel=k.WARN,O.logEnable=!0,O.tagEnable=!1;var S=function(){function e(){b(this,e)}return m(e,null,[{key:"init",value:function(n,r,i){n.GFPlugin=this,i.GFPlugin=this,e.contextRoot=e.defaultContextRoot,e.templateSrv=r,void 0===n?e.contextRoot=t:this.contextRoot=n.$root.appSubUrl+this.defaultContextRoot}},{key:"getTemplateSrv",value:function(){return e.templateSrv}},{key:"getRepo",value:function(){var t="";return e.data.info.links.forEach((function(e){"Documentation"===e.name&&(t=e.url)})),t}},{key:"getVersion",value:function(){return e.data.info.version}},{key:"getRootPath",value:function(){return e.contextRoot}},{key:"getLibsPath",value:function(){return"".concat(e.getRootPath(),"libs")}},{key:"getDrawioPath",value:function(){return"".concat(e.getLibsPath(),"/drawio/")}},{key:"getStaticPath",value:function(){return"".concat(e.getRootPath(),"/static/")}},{key:"getMxBasePath",value:function(){return"".concat(e.getDrawioPath(),"mxgraph/")}},{key:"getMxStylePath",value:function(){return"".concat(e.getDrawioPath(),"styles/")}},{key:"getShapesPath",value:function(){return"".concat(e.getDrawioPath(),"/shapes/")}},{key:"getPartialPath",value:function(){return"".concat(e.getRootPath(),"partials/")}},{key:"getStencilsPath",value:function(){return"".concat(e.getDrawioPath(),"/stencils/")}},{key:"getMxCssPath",value:function(){return"".concat(e.getDrawioPath(),"styles/")}},{key:"getMxResourcePath",value:function(){return"".concat(e.getMxBasePath(),"css/")}},{key:"getMxImagePath",value:function(){return"".concat(e.getMxBasePath(),"images/")}}]),e}();S.data=n(19),S.defaultContextRoot="/public/plugins/flowcharting/",S.initialized=!1;var T=function(){function t(){b(this,t),this.uid="GFGlobal-".concat(Object(c.a)()),this._globalvars=E.create(),this.DEBUG=!1,this.notify=function(t,e){},this.clearNotify=function(){},this.$refresh=function(){},this.events=u.a.create(w),this.callBackMapping=null,this.init()}return m(t,[{key:"debug",value:function(){this.events.emit("debug_asked")}},{key:"init",value:function(){this.events.connect("debug_asked",this,this._on_global_debug_asked.bind(this)),this.events.connect("panel_closed",this,this._on_global_panel_closed.bind(this))}},{key:"free",value:function(){this.events.disconnect("debug_asked",this),this.events.disconnect("panel_closed",this)}},{key:"resolveVars",value:function(t){return this._getGlobalVars().replaceText(t)}},{key:"getTheme",value:function(){var t=S.getTemplateSrv;return void 0!==t?t.style:"dark"}},{key:"enableMapping",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t!==this.ctrl.onMapping&&(t&&this.events.emit("mapping_enabled"),t||(this.callBackMapping=null,this.events.disconnect("xcell_clicked",this),this.events.emit("mapping_disabled")))}},{key:"setMappingCallBack",value:function(t){this.callBackMapping=t,this.events.connect("xcell_clicked",this,this._on_global_xcell_clicked.bind(this)),this.enableMapping(!0)}},{key:"isMappingMode",value:function(){return this.ctrl.onMapping}},{key:"_getGlobalVars",value:function(){return this._globalvars}},{key:"getGrafanaVars",value:function(){var t=S.getTemplateSrv();return null!=t?o.a.map(t.variables,(function(t){return"${".concat(t.name,"}")})):[]}},{key:"getVar",value:function(t){return this._getGlobalVars().get(t)}},{key:"setVar",value:function(t,e){this._getGlobalVars().set(t,e)}},{key:"unsetVar",value:function(t){this._getGlobalVars().unset(t)}},{key:"getFullAvailableVarNames",value:function(){return E.getAvailableLocalVarNames().concat(this.getGrafanaVars())}},{key:"GetT4V",value:function(t,e){if(t)for(var n=0;n<t.length;n++){var r=t[n];if(r.value===e)return r.text}return"No text "}},{key:"popover",value:function(t,e,n){var r=S.getRepo(),i="".concat(r,"images/"),a=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),o="".concat(a),s="",l="";return e&&(s='<a href="'.concat(r).concat(e,'" target="_blank"><i class="fa fa-book fa-fw"></i>Help</a>')),n&&(l='<a href="'.concat(i).concat(n,'.png" target="_blank"><i class="fa fa-image fa-fw"></i>Example</a>')),'\n    <div id="popover" style="display:flex;flex-wrap:wrap;width: 100%;">\n      <div style="flex:1;height:100px;margin-bottom: 20px;">'.concat(o,'</div>\n      <div style="flex:1;height:100px;margin-bottom: 20px;">').concat(s,'</div>\n      <div style="flex-basis: 100%;height:100px;margin-bottom:20px;">').concat(l,"</div>\n    </div>")}},{key:"_on_global_debug_asked",value:function(){t.constructor.name}},{key:"_on_global_panel_closed",value:function(){this.constructor.name,this.free()}},{key:"_on_global_xcell_clicked",value:function(t){this.constructor.name,this.ctrl.onMapping&&this.callBackMapping&&this.callBackMapping&&(Array.isArray(this.callBackMapping)?this.callBackMapping.forEach((function(e){return e(t)})):this.callBackMapping(t),this.enableMapping(!1))}}],[{key:"create",value:function(e,n,r,i){var a=new t;return S.init(e,n,i),e.$GF=a,a.DEBUG,a.ctrl=i,a.notify=i.notify.bind(i),a.clearNotify=i.clearNotify.bind(i),a.$refresh=e.$applyAsync.bind(e),a}},{key:"genUid",value:function(t){var e=Object(c.a)();return t?"".concat(t,"-").concat(e):e}},{key:"createGFTable",value:function(t,e){return new L(t,e)}},{key:"stringToRegEx",value:function(t){try{if("/"!==t.charAt(0))return new RegExp("^".concat(t,"$"));var e=t.match(new RegExp("^/(.*?)/(g?i?m?y?)$"));if(e)return new RegExp(e[1],e[2])}catch(t){return null}return null}},{key:"matchString",value:function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!n||0===e.length||"string"==typeof n&&0===n.length)return!1;if(e===n)return!0;if(n instanceof RegExp)return n.test(e);if(n&&!0===r){var i=t.stringToRegEx(n);if(i)return i.test(e)}return!1}},{key:"setFocus",value:function(t){return Object(i.a)(this,void 0,void 0,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,setTimeout((function(){var e=document.getElementById(t);e&&e.focus()}),100),e.abrupt("return",!0);case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))}},{key:"calculateIntervalCounter",value:function(t,e,n){var r,i,a=[];if(void 0!==t&&void 0!==e){var o=e-t;r=Math.round(o/n),i=t}else r=void 0;var s=0;for(s=0;s<n;s++)void 0!==r?i+=r:i=void 0,a.push(i);return a[s]=e,a}},{key:"getCurrentDate",value:function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+"-"+t.getDate().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+" "+t.getHours().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+":"+t.getMinutes().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+":"+t.getSeconds().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}},{key:"calculateRatioForValue",value:function(t,e,n){if(n<t||n>e)throw new Error("Cannot calculate ratio for value ".concat(n," because value is less than ").concat(t," or greater than ").concat(e));return(n-t)/(e-t)}},{key:"calculateValueForRatio",value:function(t,e,n){return t+(e-t)*n}},{key:"calculateColorForRatio",value:function(t,e,n){var r=e;try{r=l.a.scale([t,e]).mode("lrgb")(n).hex()}catch(t){r=e}return r}},{key:"loadFile",value:function(t){return Object(i.a)(this,void 0,void 0,f().mark((function e(){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.text();case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),new Error("Can't load file ".concat(t," : ").concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))}}]),t}();T.graphHover=!1,T.GHTimeStamp=0,T.utils=n(20);var L=function(){function t(e,n){b(this,t),this.pressed=!1,this.indexTable=0,this.startX=0,this.startWidth=0,this.tableData=e,this.tableDiv=n}return m(t,[{key:"getWidth",value:function(t){return this.getColumnProperty(t,"width")}},{key:"getLeft",value:function(t){var e=0,n=!1;return this.tableData.columns.forEach((function(r){r.id!==t&&!1===n&&(e+=parseInt(r.width,10)),r.id===t&&(n=!0)})),"".concat(e,"px")}},{key:"getStyle",value:function(t){var e="";if(this.haveProperty(t,"width")){var n=this.getColumnProperty(t,"width");e="".concat(e,"width: ").concat(n,";")}if(this.haveProperty(t,"align")){var r=this.getColumnProperty(t,"align");e="".concat(e,"text-align: ").concat(r,";")}return e}},{key:"getIndex",value:function(t){return this.getColumnProperty(t,"index")}},{key:"getId",value:function(t){return this.getColumnProperty(t,"id")}},{key:"getLabel",value:function(t){return this.getColumnProperty(t,"label")}},{key:"getDesc",value:function(t){return this.getColumnProperty(t,"desc")}},{key:"getColumnProperty",value:function(t,e){for(var n="No value for property ".concat(e),r="number"==typeof t,i=0;i<this.tableData.columns.length;i++){var a=this.tableData.columns[i];if(r&&t===a.index||!r&&t===a.id)return a[e]}return n}},{key:"haveProperty",value:function(t,e){for(var n="number"==typeof t,r=0;r<this.tableData.columns.length;r++){var i=this.tableData.columns[r];if(n&&t===i.index||!n&&t===i.id)return void 0!==i[e]&&null!==i[e]}return!1}},{key:"setColumnProperty",value:function(t,e,n){for(var r="number"==typeof t,i=0;i<this.tableData.columns.length;i++){var a=this.tableData.columns[i];if(r&&t===a.index||!r&&t===a.id){e in a&&(a[e]=n)}}return this}},{key:"findTableDiv",value:function(t){if(null!=t)for(var e=t;null!==e&&void 0===this.tableDiv;)e.classList.contains("gf-table-main")?this.tableDiv=e:e=e.parentElement;return this.tableDiv}},{key:"setTableDiv",value:function(t){this.tableDiv=t}},{key:"onMouseMove",value:function(t){var e=this;if(this.pressed&&this.headerTable&&this.headerTable.parentNode){var n=t.pageX-this.startX,r=this.startWidth+n;if(r<10&&(r=10),this.headerTable.style.width="".concat(r,"px"),this.bodyTable){var i=this.bodyTable.querySelectorAll(".gf-table-rows-resizable");Array.from(i).forEach((function(t){var n=t.querySelectorAll(".gf-table-cells-resizable"),i=0;n.forEach((function(t){var n=t;i===e.indexTable&&(n.style.width="".concat(r,"px"),e.setColumnProperty(i,"width","".concat(r,"px"))),i+=1}))}))}}}},{key:"onMouseDown",value:function(t){if(this.pressed=!0,this.startX=t.pageX,this.headerTable=t.currentTarget.parentElement,this.headerTable)if(this.tableDiv||this.findTableDiv(this.headerTable),this.headerTable.parentNode&&(this.indexTable=Array.from(this.headerTable.parentNode.children).indexOf(this.headerTable)),this.headerTable.classList.add("gf-resizing"),this.startWidth=parseInt(this.headerTable.style.width,10),this.tableDiv){var e=this.tableDiv.getElementsByClassName("gf-table-body")[0];this.bodyTable=e}else O.error("Unable to find table definition with class gf-table-main")}},{key:"onMouseUp",value:function(t){this.pressed=!1,this.headerTable&&this.headerTable.classList.remove("gf-resizing")}}]),t}(),M=function(){function t(e){b(this,t),this._iteration=0,this._cyclic=!1,this._currentStep=0,this._finished=!1,void 0===t._timers&&(t._timers=new Map),this._steps=[],this.uid=e}return m(t,[{key:"getUid",value:function(){return this.uid}},{key:"isFinished",value:function(){if(this._finished)return!0;if(this._cyclic)return!1;var t=!0;return this._steps.forEach((function(e){t=t&&e.runned})),t}},{key:"setCyclic",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._cyclic=t,this._iteration=0,this}},{key:"setIteration",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._iteration=t,this._cyclic=!1,this}},{key:"_reinit",value:function(){return this._currentStep=0,this._steps.forEach((function(t){t.runned=!1,t.invalidated=!1})),this}},{key:"cancel",value:function(){return this._steps.forEach((function(e){t._cleanStep(e)})),this._finished=!0,this}},{key:"_getDefaultStepOption",value:function(){return{step:this._steps.length,fn:function(){},ms:1e3,running:!1,runned:!1,invalidated:!1,tmId:0}}},{key:"addStep",value:function(t,e){var n=this._getDefaultStepOption();return n.fn=t,n.ms=e,this._steps.push(n),this}},{key:"start",value:function(){var t=this;return Promise.all(this._steps.map((function(e){return Object(i.a)(t,void 0,void 0,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.tmId=window.setTimeout(this._runnable.bind(this,e),e.ms);case 1:case"end":return t.stop()}}),t,this)})))})))}},{key:"_runnable",value:function(e){if(!1===e.invalidated){e.running=!0;try{for(var n=this._currentStep;n<e.step;n++)t._cleanStep(this._steps[n]);e.fn()}catch(t){O.warn("Failed to run fn",t)}this._currentStep=e.step,e.running=!1,e.runned=!0,e.step===this._steps.length-1&&(this._cyclic||this._iteration>1?(this._reinit(),this._iteration>0&&(this._iteration=this._iteration-1),this.start()):t._timers.delete(this.uid))}}}],[{key:"stop",value:function(e){return Object(i.a)(this,void 0,void 0,f().mark((function n(){var r,a,o=this;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t._timers||(t._timers=new Map),"string"!=typeof e){n.next=6;break}if(r=t.get(e)){n.next=5;break}return n.abrupt("return");case 5:e=r;case 6:if(!e){n.next=11;break}e.cancel(),t._timers.delete(e.uid),n.next=14;break;case 11:return a=Array.from(t._timers.values()),n.next=14,Promise.all(a.map((function(t){return Object(i.a)(o,void 0,void 0,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.cancel();case 1:case"end":return e.stop()}}),e)})))}))).finally((function(){t._timers.clear()}));case 14:case"end":return n.stop()}}),n)})))}},{key:"_cleanStep",value:function(e){void 0!==e&&!1===e.invalidated&&!1===e.runned&&(e.invalidated=!0,t._stopTimeOut(e.tmId))}},{key:"_stopTimeOut",value:function(t){try{void 0!==t&&window.clearTimeout(t)}catch(e){O.warn("Failed to clear timeout thread",t,e)}}},{key:"create",value:function(e){e||(e=T.genUid()),t.stop(e);var n=new t(e);return t._timers.set(e,n),n}},{key:"get",value:function(e){if(t._timers){var n=t._timers.get(e);return n||null}return null}}]),t}()}).call(this,"/")},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));function r(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))}Object.create;Object.create},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(1);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){a=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),o=new O(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var g={};u(g,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&n.call(m,o)&&(g=m);var b=v.prototype=d.prototype=Object.create(g);function _(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var r;this._invoke=function(a,o){function s(){return new e((function(r,s){!function r(a,o,s,l){var u=h(t[a],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==i(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,s,l)}),(function(t){r("throw",t,s,l)})):e.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return r("throw",t,s,l)}))}l(u.arg)}(a,o,r,s)}))}return r=r?r.then(s,s):s()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),u(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},_(b),u(b,l,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._declaredSignals=[],this._connectedChilds=new Map}var e,n,i;return e=t,i=[{key:"create",value:function(e,n){var r=new t;return e&&r.declare(e),r}}],(n=[{key:"declare",value:function(t,e){var n=this;return e&&(this._owner=e.uid),Array.isArray(t)?(t.forEach((function(t){n.declare(t)})),this):("string"!=typeof t||this._haveDeclaredSignal(t)||this._declaredSignals.push(t),this)}},{key:"countSignal",value:function(){return this._declaredSignals.length}},{key:"clear",value:function(){this._connectedChilds.clear(),this._declaredSignals=[]}},{key:"connect",value:function(t,e,n){var r;if(!("uid"in e))throw new Error("".concat(e.toString()," have no uid property"));if(!this._haveDeclaredSignal(t))throw new Error("".concat(this.toString()," have no declared signal ").concat(t));"[".concat(e.uid,"] connect on [").concat(t,"] to [").concat(null!==(r=this._owner)&&void 0!==r?r:"?????","]");var i=e.uid,a=n,o=this._connectedChilds.get(t);return o||(o=new Map,this._connectedChilds.set(t,o)),o.set(i,a),!0}},{key:"isConnected",value:function(t,e){var n=this._connectedChilds.get(t);return!!n&&n.has(e.uid)}},{key:"disconnect",value:function(t,e){if(this._haveDeclaredSignal(t)&&"uid"in e){var n=e.uid,r=this._connectedChilds.get(t);r&&r.delete(n)}}},{key:"emit",value:function(t,e,n){var i=this;"Emit signal [".concat(t,"]").concat(n?" from ["+n.uid+"]":"");var o=this._getCallableFunc(t);return Promise.all(o.map((function(t){return Object(r.a)(i,void 0,void 0,a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t(e),n.abrupt("return",r);case 2:case"end":return n.stop()}}),n)})))})))}},{key:"_haveDeclaredSignal",value:function(t){return this._declaredSignals.includes(t)}},{key:"_getCallableFunc",value:function(t){if(!this._haveDeclaredSignal(t))return[];var e=this._connectedChilds.get(t);return e?Array.from(e.values()):[]}}])&&o(e.prototype,n),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return y}));var r=n(1),i=n(0),a=n(8),o=n(17),s=n(2);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e,n){return(u=c()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&h(i,n.prototype),i}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(){p=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),o=new O(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function d(){}function v(){}var g={};s(g,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&n.call(m,i)&&(g=m);var b=v.prototype=f.prototype=Object.create(g);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var u=c(t[i],t,a);if("throw"!==u.type){var h=u.arg,f=h.value;return f&&"object"==l(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(f).then((function(t){h.value=t,o(h)}),(function(t){return r("throw",t,o,s)}))}s(u.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=v,s(b,"constructor",v),s(v,"constructor",d),d.displayName=s(v,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,o,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),s(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new w(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},_(b),s(b,o,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var g=n(27),y=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,s,l;return n=e,l=[{key:"init",value:function(t){return Object(r.a)(this,void 0,void 0,p().mark((function n(){return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._GFInitialized=!0,this.options=Object.assign(this._getDefaultRequiredOptions(),t),e._libInitialized||!e.options.libLoad){n.next=4;break}return n.abrupt("return",e.loadEngine());case 4:return n.abrupt("return");case 5:case"end":return n.stop()}}),n,this)})))}},{key:"isInitalized",value:function(){return e._libInitialized}},{key:"loadEngine",value:function(){return Object(r.a)(this,void 0,void 0,p().mark((function t(){var n,i=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._libInitialized){t.next=2;break}return t.abrupt("return");case 2:return e._GFInitialized||e.init({libLoad:!1}),n=new Promise((function(){})),"local"===e.options.mode&&(n=e._loadLocal()),"server"===e.options.mode&&(n=e._loadServer()),t.abrupt("return",n.then((function(t){return Object(r.a)(i,void 0,void 0,p().mark((function n(){return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("string"!=typeof t){n.next=9;break}return n.next=3,e._preLoad();case 3:return n.next=5,e._evalLib(t);case 5:return n.next=7,e._customization();case 7:return n.next=9,e._postLoad();case 9:return n.abrupt("return");case 10:case"end":return n.stop()}}),n)})))})));case 8:case"end":return t.stop()}}),t)})))}},{key:"getTemplate",value:function(t){if("xml"===t)return e.getXmlTemplate();if("csv"===t)return e.getCsvTemplate();throw new Error("Unknown type ".concat(t))}},{key:"getXmlTemplate",value:function(){if(e._xmlTemplate)return e._xmlTemplate;var t="".concat(i.d.getRootPath()).concat(i.b.CONF_FILE_DEFAULTDIO);return e.loadFile(t).then((function(t){return e._xmlTemplate=t,t}))}},{key:"getCsvTemplate",value:function(){if(e._csvTemplate)return e._csvTemplate;var t="".concat(i.d.getRootPath()).concat(i.b.CONF_FILE_DEFAULTCSV);return e.loadFile(t).then((function(t){return e._csvTemplate=t,t}))}},{key:"loadFile",value:function(t){return Object(r.a)(this,void 0,void 0,p().mark((function e(){var n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.text();case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),new Error("Can't load file ".concat(t," : ").concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))}},{key:"_getDefaultRequiredOptions",value:function(){return{mode:"server",libLoad:!0,libLocal:"./src/".concat(i.b.CONF_FILE_DRAWIOLIB),libServer:"".concat(i.d.getRootPath(),"/").concat(i.b.CONF_FILE_DRAWIOLIB)}}},{key:"_loadLocal",value:function(){return Object(r.a)(this,void 0,void 0,p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.options.libLocal?this.options.libLocal:"",t.abrupt("return",new Promise((function(t,n){Object(o.readFile)(e,(function(e,n){t(n.toString())}))})));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"_evalLib",value:function(t){return Object(r.a)(this,void 0,void 0,p().mark((function n(){return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.options.mode,globalThis.eval(t),e._libInitialized=!0,e.events.emit("drawio_initialized");case 3:case"end":return n.stop()}}),n)})))}},{key:"_loadServer",value:function(){return Object(r.a)(this,void 0,void 0,p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._libInitialized||!this.options.libServer){t.next=3;break}return e=this.options.libServer,t.abrupt("return",fetch(e).then((function(t){return t.text()})).catch((function(t){})));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"_customization",value:function(){return Object(r.a)(this,void 0,void 0,p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.customize(),mxTooltipHandler.prototype.delay=i.b.CONF_TOOLTIPS_DELAY;case 2:case"end":return t.stop()}}),t)})))}},{key:"_preLoad",value:function(){return Object(r.a)(this,void 0,void 0,p().mark((function t(){var e,n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(e=globalThis).BASE_PATH=i.d.getMxBasePath(),e.RESOURCES_PATH=i.d.getMxResourcePath(),e.RESOURCE_BASE=i.d.getMxResourcePath(),e.STENCIL_PATH=i.d.getStencilsPath(),e.SHAPES_PATH=i.d.getShapesPath(),e.IMAGE_PATH=i.d.getMxImagePath(),e.STYLE_PATH=i.d.getMxStylePath(),e.CSS_PATH=i.d.getMxCssPath(),e.mxLanguages=["en"],e.DRAWIO_BASE_URL=i.d.getDrawioPath(),e.DRAW_MATH_URL=i.d.getDrawioPath(),e.DRAWIO_VIEWER_URL=i.d.getDrawioPath()+"viewer.min.js",e.DRAW_MATH_URL=i.d.getDrawioPath()+"math/",e.DRAWIO_CONFIG=null,n={sync:"none",lightbox:"1",nav:"1",local:"1",embed:"1",ui:"min"},e.urlParams=n,e.mxImageBasePath=i.d.getMxImagePath(),e.mxBasePath=i.d.getMxBasePath(),e.mxLoadStylesheets=!0,e.mxLanguage="en",e.mxLoadResources=!0;case 22:case"end":return t.stop()}}),t)})))}},{key:"_postLoad",value:function(){return Object(r.a)(this,void 0,void 0,p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(e=globalThis).mxClient.mxBasePath=i.d.getMxBasePath(),e.mxClient.mxImageBasePath=i.d.getMxImagePath(),e.mxClient.mxLoadResources=!0,e.mxClient.mxLanguage="en",e.mxClient.mxLoadStylesheets=!0,e.VSD_CONVERT_URL=null,e.EMF_CONVERT_URL=null,e.ICONSEARCH_PATH=null;case 9:case"end":return t.stop()}}),t)})))}},{key:"parseXml",value:function(t){return(new DOMParser).parseFromString(t,"text/xml")}},{key:"getTextContent",value:function(t){return null!=t?t[void 0===t.hasOwnProperty("textContent")?"text":"textContent"]:""}},{key:"isValidXml",value:function(t){try{var n=document.createElement("div"),r=new Graph(n);e.isEncoded(t)&&(t=e.decode(t));var a=mxUtils.parseXml(t),o=new mxCodec(a);return r.getModel().beginUpdate(),o.decode(a.documentElement,r.getModel()),r.getModel().endUpdate(),r.destroy(),!0}catch(t){return i.c.error("isValidXml",t),!1}}},{key:"decode",value:function(e){try{var n=this.parseXml(e).documentElement;if(null!=n&&"mxfile"===n.nodeName){var r=n.getElementsByTagName("diagram");r.length>0&&(e=this.getTextContent(r[0]))}}catch(t){throw new Error("parseXml : Unable to decode")}if((e=t.from(e,"base64").toString("binary")).length>0)try{e=Object(a.inflateRaw)(Uint8Array.from(e,(function(t){return t.charCodeAt(0)})),{to:"string"})}catch(t){throw new Error("Pako : Unable to decode")}try{e=decodeURIComponent(e)}catch(t){return i.c.error("Unable to decode ".concat(e)),""}return e}},{key:"encode",value:function(e){try{e=encodeURIComponent(e)}catch(t){return void i.c.error("Unable to encode/encodeURIComponent : ".concat(e),t)}if(e.length>0)try{var n=Object(a.deflateRaw)(e);e=String.fromCharCode.apply(null,u(Array,f(n)))}catch(t){return i.c.error("Unable to encode ".concat(e)),""}try{e=t.from(e,"binary").toString("base64")}catch(t){return void i.c.error("Unable to encode ".concat(e))}return e}},{key:"isEncoded",value:function(t){try{e.decode(t)}catch(t){return!1}return!0}}],(s=null)&&v(n.prototype,s),l&&v(n,l),Object.defineProperty(n,"prototype",{writable:!1}),e}();y._GFInitialized=!1,y._libInitialized=!1,y.events=s.a.create(["drawio_initialized"])}).call(this,n(23).Buffer)},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__4__},function(t,e,n){t.exports=function(){"use strict";var t=6e4,e=36e5,n="millisecond",r="second",i="minute",a="hour",o="day",s="week",l="month",u="quarter",c="year",h="date",f="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},y={s:g,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+g(r,2,"0")+":"+g(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,l),a=n-i<0,o=e.clone().add(r+(a?-1:1),l);return+(-(r+(n-i)/(a?i-o:o-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:c,w:s,d:o,D:h,h:a,m:i,s:r,ms:n,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},m="en",b={};b[m]=v;var _=function(t){return t instanceof E},w=function t(e,n,r){var i;if(!e)return m;if("string"==typeof e){var a=e.toLowerCase();b[a]&&(i=a),n&&(b[a]=n,i=a);var o=e.split("-");if(!i&&o.length>1)return t(o[0])}else{var s=e.name;b[s]=e,i=s}return!r&&i&&(m=i),i||!r&&m},x=function(t,e){if(_(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new E(n)},k=y;k.l=w,k.i=_,k.w=function(t,e){return x(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var E=function(){function v(t){this.$L=w(t.locale,null,!0),this.parse(t)}var g=v.prototype;return g.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(k.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(d);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},g.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},g.$utils=function(){return k},g.isValid=function(){return!(this.$d.toString()===f)},g.isSame=function(t,e){var n=x(t);return this.startOf(e)<=n&&n<=this.endOf(e)},g.isAfter=function(t,e){return x(t)<this.startOf(e)},g.isBefore=function(t,e){return this.endOf(e)<x(t)},g.$g=function(t,e,n){return k.u(t)?this[e]:this.set(n,t)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(t,e){var n=this,u=!!k.u(e)||e,f=k.p(t),d=function(t,e){var r=k.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return u?r:r.endOf(o)},p=function(t,e){return k.w(n.toDate()[t].apply(n.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},v=this.$W,g=this.$M,y=this.$D,m="set"+(this.$u?"UTC":"");switch(f){case c:return u?d(1,0):d(31,11);case l:return u?d(1,g):d(0,g+1);case s:var b=this.$locale().weekStart||0,_=(v<b?v+7:v)-b;return d(u?y-_:y+(6-_),g);case o:case h:return p(m+"Hours",0);case a:return p(m+"Minutes",1);case i:return p(m+"Seconds",2);case r:return p(m+"Milliseconds",3);default:return this.clone()}},g.endOf=function(t){return this.startOf(t,!1)},g.$set=function(t,e){var s,u=k.p(t),f="set"+(this.$u?"UTC":""),d=(s={},s[o]=f+"Date",s[h]=f+"Date",s[l]=f+"Month",s[c]=f+"FullYear",s[a]=f+"Hours",s[i]=f+"Minutes",s[r]=f+"Seconds",s[n]=f+"Milliseconds",s)[u],p=u===o?this.$D+(e-this.$W):e;if(u===l||u===c){var v=this.clone().set(h,1);v.$d[d](p),v.init(),this.$d=v.set(h,Math.min(this.$D,v.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},g.set=function(t,e){return this.clone().$set(t,e)},g.get=function(t){return this[k.p(t)]()},g.add=function(n,u){var h,f=this;n=Number(n);var d=k.p(u),p=function(t){var e=x(f);return k.w(e.date(e.date()+Math.round(t*n)),f)};if(d===l)return this.set(l,this.$M+n);if(d===c)return this.set(c,this.$y+n);if(d===o)return p(1);if(d===s)return p(7);var v=(h={},h[i]=t,h[a]=e,h[r]=1e3,h)[d]||1,g=this.$d.getTime()+n*v;return k.w(g,this)},g.subtract=function(t,e){return this.add(-1*t,e)},g.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=k.z(this),a=this.$H,o=this.$m,s=this.$M,l=n.weekdays,u=n.months,c=function(t,n,i,a){return t&&(t[n]||t(e,r))||i[n].slice(0,a)},h=function(t){return k.s(a%12||12,t,"0")},d=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},v={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:k.s(s+1,2,"0"),MMM:c(n.monthsShort,s,u,3),MMMM:c(u,s),D:this.$D,DD:k.s(this.$D,2,"0"),d:String(this.$W),dd:c(n.weekdaysMin,this.$W,l,2),ddd:c(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(a),HH:k.s(a,2,"0"),h:h(1),hh:h(2),a:d(a,o,!0),A:d(a,o,!1),m:String(o),mm:k.s(o,2,"0"),s:String(this.$s),ss:k.s(this.$s,2,"0"),SSS:k.s(this.$ms,3,"0"),Z:i};return r.replace(p,(function(t,e){return e||v[t]||i.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,h,f){var d,p=k.p(h),v=x(n),g=(v.utcOffset()-this.utcOffset())*t,y=this-v,m=k.m(this,v);return m=(d={},d[c]=m/12,d[l]=m,d[u]=m/3,d[s]=(y-g)/6048e5,d[o]=(y-g)/864e5,d[a]=y/e,d[i]=y/t,d[r]=y/1e3,d)[p]||y,f?m:k.a(m)},g.daysInMonth=function(){return this.endOf(l).$D},g.$locale=function(){return b[this.$L]},g.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},g.clone=function(){return k.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},v}(),O=E.prototype;return x.prototype=O,[["$ms",n],["$s",r],["$m",i],["$H",a],["$W",o],["$M",l],["$y",c],["$D",h]].forEach((function(t){O[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),x.extend=function(t,e){return t.$i||(t(e,E,x),t.$i=!0),x},x.locale=w,x.isDayjs=_,x.unix=function(t){return x(1e3*t)},x.en=b[m],x.Ls=b,x.p={},x}()},function(t,e,n){t.exports=function(){"use strict";for(var t=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t<e?e:t>n?n:t},e=t,n={},r=0,i=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];r<i.length;r+=1){var a=i[r];n["[object "+a+"]"]=a.toLowerCase()}var o=function(t){return n[Object.prototype.toString.call(t)]||"object"},s=o,l=o,u=Math.PI,c={clip_rgb:function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var n=0;n<=3;n++)n<3?((t[n]<0||t[n]>255)&&(t._clipped=!0),t[n]=e(t[n],0,255)):3===n&&(t[n]=e(t[n],0,1));return t},limit:t,type:o,unpack:function(t,e){return void 0===e&&(e=null),t.length>=3?Array.prototype.slice.call(t):"object"==s(t[0])&&e?e.split("").filter((function(e){return void 0!==t[0][e]})).map((function(e){return t[0][e]})):t[0]},last:function(t){if(t.length<2)return null;var e=t.length-1;return"string"==l(t[e])?t[e].toLowerCase():null},PI:u,TWOPI:2*u,PITHIRD:u/3,DEG2RAD:u/180,RAD2DEG:180/u},h={format:{},autodetect:[]},f=c.last,d=c.clip_rgb,p=c.type,v=h,g=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=this;if("object"===p(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var r=f(t),i=!1;if(!r){i=!0,v.sorted||(v.autodetect=v.autodetect.sort((function(t,e){return e.p-t.p})),v.sorted=!0);for(var a=0,o=v.autodetect;a<o.length;a+=1){var s=o[a];if(r=s.test.apply(s,t))break}}if(!v.format[r])throw new Error("unknown format: "+t);var l=v.format[r].apply(null,i?t:t.slice(0,-1));n._rgb=d(l),3===n._rgb.length&&n._rgb.push(1)};g.prototype.toString=function(){return"function"==p(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var y=g,m=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(m.Color,[null].concat(t)))};m.Color=y,m.version="2.4.2";var b=m,_=c.unpack,w=Math.max,x=c.unpack,k=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=x(t,"cmyk"))[0],r=t[1],i=t[2],a=t[3],o=t.length>4?t[4]:1;return 1===a?[0,0,0,o]:[n>=1?0:255*(1-n)*(1-a),r>=1?0:255*(1-r)*(1-a),i>=1?0:255*(1-i)*(1-a),o]},E=b,O=y,S=h,T=c.unpack,L=c.type,M=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=_(t,"rgb"),r=n[0],i=n[1],a=n[2],o=1-w(r/=255,w(i/=255,a/=255)),s=o<1?1/(1-o):0,l=(1-r-o)*s,u=(1-i-o)*s,c=(1-a-o)*s;return[l,u,c,o]};O.prototype.cmyk=function(){return M(this._rgb)},E.cmyk=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(O,[null].concat(t,["cmyk"])))},S.format.cmyk=k,S.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=T(t,"cmyk"),"array"===L(t)&&4===t.length)return"cmyk"}});var C=c.unpack,D=c.last,A=function(t){return Math.round(100*t)/100},P=c.unpack,N=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=P(t,"rgba"))[0],r=t[1],i=t[2];n/=255,r/=255,i/=255;var a,o,s=Math.min(n,r,i),l=Math.max(n,r,i),u=(l+s)/2;return l===s?(a=0,o=Number.NaN):a=u<.5?(l-s)/(l+s):(l-s)/(2-l-s),n==l?o=(r-i)/(l-s):r==l?o=2+(i-n)/(l-s):i==l&&(o=4+(n-r)/(l-s)),(o*=60)<0&&(o+=360),t.length>3&&void 0!==t[3]?[o,a,u,t[3]]:[o,a,u]},R=c.unpack,F=c.last,I=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=C(t,"hsla"),r=D(t)||"lsa";return n[0]=A(n[0]||0),n[1]=A(100*n[1])+"%",n[2]=A(100*n[2])+"%","hsla"===r||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},j=N,H=Math.round,G=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=R(t,"rgba"),r=F(t)||"rgb";return"hsl"==r.substr(0,3)?I(j(n),r):(n[0]=H(n[0]),n[1]=H(n[1]),n[2]=H(n[2]),("rgba"===r||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")},z=c.unpack,V=Math.round,U=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];var r,i,a,o=(e=z(e,"hsl"))[0],s=e[1],l=e[2];if(0===s)r=i=a=255*l;else{var u=[0,0,0],c=[0,0,0],h=l<.5?l*(1+s):l+s-l*s,f=2*l-h,d=o/360;u[0]=d+1/3,u[1]=d,u[2]=d-1/3;for(var p=0;p<3;p++)u[p]<0&&(u[p]+=1),u[p]>1&&(u[p]-=1),6*u[p]<1?c[p]=f+6*(h-f)*u[p]:2*u[p]<1?c[p]=h:3*u[p]<2?c[p]=f+(h-f)*(2/3-u[p])*6:c[p]=f;r=(t=[V(255*c[0]),V(255*c[1]),V(255*c[2])])[0],i=t[1],a=t[2]}return e.length>3?[r,i,a,e[3]]:[r,i,a,1]},B=U,$=h,Y=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,X=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,W=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Z=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,q=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,K=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,J=Math.round,Q=function(t){var e;if(t=t.toLowerCase().trim(),$.format.named)try{return $.format.named(t)}catch(t){}if(e=t.match(Y)){for(var n=e.slice(1,4),r=0;r<3;r++)n[r]=+n[r];return n[3]=1,n}if(e=t.match(X)){for(var i=e.slice(1,5),a=0;a<4;a++)i[a]=+i[a];return i}if(e=t.match(W)){for(var o=e.slice(1,4),s=0;s<3;s++)o[s]=J(2.55*o[s]);return o[3]=1,o}if(e=t.match(Z)){for(var l=e.slice(1,5),u=0;u<3;u++)l[u]=J(2.55*l[u]);return l[3]=+l[3],l}if(e=t.match(q)){var c=e.slice(1,4);c[1]*=.01,c[2]*=.01;var h=B(c);return h[3]=1,h}if(e=t.match(K)){var f=e.slice(1,4);f[1]*=.01,f[2]*=.01;var d=B(f);return d[3]=+e[4],d}};Q.test=function(t){return Y.test(t)||X.test(t)||W.test(t)||Z.test(t)||q.test(t)||K.test(t)};var tt=b,et=y,nt=h,rt=c.type,it=G,at=Q;et.prototype.css=function(t){return it(this._rgb,t)},tt.css=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(et,[null].concat(t,["css"])))},nt.format.css=at,nt.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===rt(t)&&at.test(t))return"css"}});var ot=y,st=b,lt=c.unpack;h.format.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=lt(t,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},st.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(ot,[null].concat(t,["gl"])))},ot.prototype.gl=function(){var t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};var ut=c.unpack,ct=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r=ut(t,"rgb"),i=r[0],a=r[1],o=r[2],s=Math.min(i,a,o),l=Math.max(i,a,o),u=l-s,c=100*u/255,h=s/(255-u)*100;return 0===u?n=Number.NaN:(i===l&&(n=(a-o)/u),a===l&&(n=2+(o-i)/u),o===l&&(n=4+(i-a)/u),(n*=60)<0&&(n+=360)),[n,c,h]},ht=c.unpack,ft=Math.floor,dt=function(){for(var t,e,n,r,i,a,o=[],s=arguments.length;s--;)o[s]=arguments[s];var l,u,c,h=(o=ht(o,"hcg"))[0],f=o[1],d=o[2];d*=255;var p=255*f;if(0===f)l=u=c=d;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var v=ft(h/=60),g=h-v,y=d*(1-f),m=y+p*(1-g),b=y+p*g,_=y+p;switch(v){case 0:l=(t=[_,b,y])[0],u=t[1],c=t[2];break;case 1:l=(e=[m,_,y])[0],u=e[1],c=e[2];break;case 2:l=(n=[y,_,b])[0],u=n[1],c=n[2];break;case 3:l=(r=[y,m,_])[0],u=r[1],c=r[2];break;case 4:l=(i=[b,y,_])[0],u=i[1],c=i[2];break;case 5:l=(a=[_,y,m])[0],u=a[1],c=a[2]}}return[l,u,c,o.length>3?o[3]:1]},pt=c.unpack,vt=c.type,gt=b,yt=y,mt=h,bt=ct;yt.prototype.hcg=function(){return bt(this._rgb)},gt.hcg=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(yt,[null].concat(t,["hcg"])))},mt.format.hcg=dt,mt.autodetect.push({p:1,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=pt(t,"hcg"),"array"===vt(t)&&3===t.length)return"hcg"}});var _t=c.unpack,wt=c.last,xt=Math.round,kt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=_t(t,"rgba"),r=n[0],i=n[1],a=n[2],o=n[3],s=wt(t)||"auto";void 0===o&&(o=1),"auto"===s&&(s=o<1?"rgba":"rgb");var l=(r=xt(r))<<16|(i=xt(i))<<8|(a=xt(a)),u="000000"+l.toString(16);u=u.substr(u.length-6);var c="0"+xt(255*o).toString(16);switch(c=c.substr(c.length-2),s.toLowerCase()){case"rgba":return"#"+u+c;case"argb":return"#"+c+u;default:return"#"+u}},Et=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Ot=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,St=function(t){if(t.match(Et)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var e=parseInt(t,16);return[e>>16,e>>8&255,255&e,1]}if(t.match(Ot)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var n=parseInt(t,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+t)},Tt=b,Lt=y,Mt=c.type,Ct=h,Dt=kt;Lt.prototype.hex=function(t){return Dt(this._rgb,t)},Tt.hex=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Lt,[null].concat(t,["hex"])))},Ct.format.hex=St,Ct.autodetect.push({p:4,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===Mt(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var At=c.unpack,Pt=c.TWOPI,Nt=Math.min,Rt=Math.sqrt,Ft=Math.acos,It=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r=At(t,"rgb"),i=r[0],a=r[1],o=r[2],s=Nt(i/=255,a/=255,o/=255),l=(i+a+o)/3,u=l>0?1-s/l:0;return 0===u?n=NaN:(n=(i-a+(i-o))/2,n/=Rt((i-a)*(i-a)+(i-o)*(a-o)),n=Ft(n),o>a&&(n=Pt-n),n/=Pt),[360*n,u,l]},jt=c.unpack,Ht=c.limit,Gt=c.TWOPI,zt=c.PITHIRD,Vt=Math.cos,Ut=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,i,a=(t=jt(t,"hsi"))[0],o=t[1],s=t[2];return isNaN(a)&&(a=0),isNaN(o)&&(o=0),a>360&&(a-=360),a<0&&(a+=360),(a/=360)<1/3?r=1-((i=(1-o)/3)+(n=(1+o*Vt(Gt*a)/Vt(zt-Gt*a))/3)):a<2/3?i=1-((n=(1-o)/3)+(r=(1+o*Vt(Gt*(a-=1/3))/Vt(zt-Gt*a))/3)):n=1-((r=(1-o)/3)+(i=(1+o*Vt(Gt*(a-=2/3))/Vt(zt-Gt*a))/3)),[255*(n=Ht(s*n*3)),255*(r=Ht(s*r*3)),255*(i=Ht(s*i*3)),t.length>3?t[3]:1]},Bt=c.unpack,$t=c.type,Yt=b,Xt=y,Wt=h,Zt=It;Xt.prototype.hsi=function(){return Zt(this._rgb)},Yt.hsi=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Xt,[null].concat(t,["hsi"])))},Wt.format.hsi=Ut,Wt.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Bt(t,"hsi"),"array"===$t(t)&&3===t.length)return"hsi"}});var qt=c.unpack,Kt=c.type,Jt=b,Qt=y,te=h,ee=N;Qt.prototype.hsl=function(){return ee(this._rgb)},Jt.hsl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Qt,[null].concat(t,["hsl"])))},te.format.hsl=U,te.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=qt(t,"hsl"),"array"===Kt(t)&&3===t.length)return"hsl"}});var ne=c.unpack,re=Math.min,ie=Math.max,ae=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,i,a=(t=ne(t,"rgb"))[0],o=t[1],s=t[2],l=re(a,o,s),u=ie(a,o,s),c=u-l;return i=u/255,0===u?(n=Number.NaN,r=0):(r=c/u,a===u&&(n=(o-s)/c),o===u&&(n=2+(s-a)/c),s===u&&(n=4+(a-o)/c),(n*=60)<0&&(n+=360)),[n,r,i]},oe=c.unpack,se=Math.floor,le=function(){for(var t,e,n,r,i,a,o=[],s=arguments.length;s--;)o[s]=arguments[s];var l,u,c,h=(o=oe(o,"hsv"))[0],f=o[1],d=o[2];if(d*=255,0===f)l=u=c=d;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var p=se(h/=60),v=h-p,g=d*(1-f),y=d*(1-f*v),m=d*(1-f*(1-v));switch(p){case 0:l=(t=[d,m,g])[0],u=t[1],c=t[2];break;case 1:l=(e=[y,d,g])[0],u=e[1],c=e[2];break;case 2:l=(n=[g,d,m])[0],u=n[1],c=n[2];break;case 3:l=(r=[g,y,d])[0],u=r[1],c=r[2];break;case 4:l=(i=[m,g,d])[0],u=i[1],c=i[2];break;case 5:l=(a=[d,g,y])[0],u=a[1],c=a[2]}}return[l,u,c,o.length>3?o[3]:1]},ue=c.unpack,ce=c.type,he=b,fe=y,de=h,pe=ae;fe.prototype.hsv=function(){return pe(this._rgb)},he.hsv=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(fe,[null].concat(t,["hsv"])))},de.format.hsv=le,de.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=ue(t,"hsv"),"array"===ce(t)&&3===t.length)return"hsv"}});var ve={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ge=ve,ye=c.unpack,me=Math.pow,be=function(t){return(t/=255)<=.04045?t/12.92:me((t+.055)/1.055,2.4)},_e=function(t){return t>ge.t3?me(t,1/3):t/ge.t2+ge.t0},we=function(t,e,n){return t=be(t),e=be(e),n=be(n),[_e((.4124564*t+.3575761*e+.1804375*n)/ge.Xn),_e((.2126729*t+.7151522*e+.072175*n)/ge.Yn),_e((.0193339*t+.119192*e+.9503041*n)/ge.Zn)]},xe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=ye(t,"rgb"),r=n[0],i=n[1],a=n[2],o=we(r,i,a),s=o[0],l=o[1],u=o[2],c=116*l-16;return[c<0?0:c,500*(s-l),200*(l-u)]},ke=ve,Ee=c.unpack,Oe=Math.pow,Se=function(t){return 255*(t<=.00304?12.92*t:1.055*Oe(t,1/2.4)-.055)},Te=function(t){return t>ke.t1?t*t*t:ke.t2*(t-ke.t0)},Le=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,i,a=(t=Ee(t,"lab"))[0],o=t[1],s=t[2];return r=(a+16)/116,n=isNaN(o)?r:r+o/500,i=isNaN(s)?r:r-s/200,r=ke.Yn*Te(r),n=ke.Xn*Te(n),i=ke.Zn*Te(i),[Se(3.2404542*n-1.5371385*r-.4985314*i),Se(-.969266*n+1.8760108*r+.041556*i),Se(.0556434*n-.2040259*r+1.0572252*i),t.length>3?t[3]:1]},Me=c.unpack,Ce=c.type,De=b,Ae=y,Pe=h,Ne=xe;Ae.prototype.lab=function(){return Ne(this._rgb)},De.lab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Ae,[null].concat(t,["lab"])))},Pe.format.lab=Le,Pe.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Me(t,"lab"),"array"===Ce(t)&&3===t.length)return"lab"}});var Re=c.unpack,Fe=c.RAD2DEG,Ie=Math.sqrt,je=Math.atan2,He=Math.round,Ge=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Re(t,"lab"),r=n[0],i=n[1],a=n[2],o=Ie(i*i+a*a),s=(je(a,i)*Fe+360)%360;return 0===He(1e4*o)&&(s=Number.NaN),[r,o,s]},ze=c.unpack,Ve=xe,Ue=Ge,Be=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=ze(t,"rgb"),r=n[0],i=n[1],a=n[2],o=Ve(r,i,a),s=o[0],l=o[1],u=o[2];return Ue(s,l,u)},$e=c.unpack,Ye=c.DEG2RAD,Xe=Math.sin,We=Math.cos,Ze=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=$e(t,"lch"),r=n[0],i=n[1],a=n[2];return isNaN(a)&&(a=0),[r,We(a*=Ye)*i,Xe(a)*i]},qe=c.unpack,Ke=Ze,Je=Le,Qe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=qe(t,"lch"))[0],r=t[1],i=t[2],a=Ke(n,r,i),o=a[0],s=a[1],l=a[2],u=Je(o,s,l),c=u[0],h=u[1],f=u[2];return[c,h,f,t.length>3?t[3]:1]},tn=c.unpack,en=Qe,nn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=tn(t,"hcl").reverse();return en.apply(void 0,n)},rn=c.unpack,an=c.type,on=b,sn=y,ln=h,un=Be;sn.prototype.lch=function(){return un(this._rgb)},sn.prototype.hcl=function(){return un(this._rgb).reverse()},on.lch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(sn,[null].concat(t,["lch"])))},on.hcl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(sn,[null].concat(t,["hcl"])))},ln.format.lch=Qe,ln.format.hcl=nn,["lch","hcl"].forEach((function(t){return ln.autodetect.push({p:2,test:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(e=rn(e,t),"array"===an(e)&&3===e.length)return t}})}));var cn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},hn=h,fn=c.type,dn=cn,pn=St,vn=kt;y.prototype.name=function(){for(var t=vn(this._rgb,"rgb"),e=0,n=Object.keys(dn);e<n.length;e+=1){var r=n[e];if(dn[r]===t)return r.toLowerCase()}return t},hn.format.named=function(t){if(t=t.toLowerCase(),dn[t])return pn(dn[t]);throw new Error("unknown color name: "+t)},hn.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===fn(t)&&dn[t.toLowerCase()])return"named"}});var gn=c.unpack,yn=c.type,mn=function(t){if("number"==yn(t)&&t>=0&&t<=16777215)return[t>>16,t>>8&255,255&t,1];throw new Error("unknown num color: "+t)},bn=b,_n=y,wn=h,xn=c.type,kn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=gn(t,"rgb"),r=n[0],i=n[1],a=n[2];return(r<<16)+(i<<8)+a};_n.prototype.num=function(){return kn(this._rgb)},bn.num=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(_n,[null].concat(t,["num"])))},wn.format.num=mn,wn.autodetect.push({p:5,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(1===t.length&&"number"===xn(t[0])&&t[0]>=0&&t[0]<=16777215)return"num"}});var En=b,On=y,Sn=h,Tn=c.unpack,Ln=c.type,Mn=Math.round;On.prototype.rgb=function(t){return void 0===t&&(t=!0),!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Mn)},On.prototype.rgba=function(t){return void 0===t&&(t=!0),this._rgb.slice(0,4).map((function(e,n){return n<3?!1===t?e:Mn(e):e}))},En.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(On,[null].concat(t,["rgb"])))},Sn.format.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Tn(t,"rgba");return void 0===n[3]&&(n[3]=1),n},Sn.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Tn(t,"rgba"),"array"===Ln(t)&&(3===t.length||4===t.length&&"number"==Ln(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});var Cn=Math.log,Dn=function(t){var e,n,r,i=t/100;return i<66?(e=255,n=i<6?0:-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*Cn(n),r=i<20?0:.8274096064007395*(r=i-10)-254.76935184120902+115.67994401066147*Cn(r)):(e=351.97690566805693+.114206453784165*(e=i-55)-40.25366309332127*Cn(e),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*Cn(n),r=255),[e,n,r,1]},An=Dn,Pn=c.unpack,Nn=Math.round,Rn=b,Fn=y,In=h,jn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n,r=Pn(t,"rgb"),i=r[0],a=r[2],o=1e3,s=4e4,l=.4;s-o>l;){var u=An(n=.5*(s+o));u[2]/u[0]>=a/i?s=n:o=n}return Nn(n)};Fn.prototype.temp=Fn.prototype.kelvin=Fn.prototype.temperature=function(){return jn(this._rgb)},Rn.temp=Rn.kelvin=Rn.temperature=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Fn,[null].concat(t,["temp"])))},In.format.temp=In.format.kelvin=In.format.temperature=Dn;var Hn=c.unpack,Gn=Math.cbrt,zn=Math.pow,Vn=Math.sign,Un=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Hn(t,"rgb"),r=n[0],i=n[1],a=n[2],o=[Bn(r/255),Bn(i/255),Bn(a/255)],s=o[0],l=o[1],u=o[2],c=Gn(.4122214708*s+.5363325363*l+.0514459929*u),h=Gn(.2119034982*s+.6806995451*l+.1073969566*u),f=Gn(.0883024619*s+.2817188376*l+.6299787005*u);return[.2104542553*c+.793617785*h-.0040720468*f,1.9779984951*c-2.428592205*h+.4505937099*f,.0259040371*c+.7827717662*h-.808675766*f]};function Bn(t){var e=Math.abs(t);return e<.04045?t/12.92:(Vn(t)||1)*zn((e+.055)/1.055,2.4)}var $n=c.unpack,Yn=Math.pow,Xn=Math.sign,Wn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=$n(t,"lab"))[0],r=t[1],i=t[2],a=Yn(n+.3963377774*r+.2158037573*i,3),o=Yn(n-.1055613458*r-.0638541728*i,3),s=Yn(n-.0894841775*r-1.291485548*i,3);return[255*Zn(4.0767416621*a-3.3077115913*o+.2309699292*s),255*Zn(-1.2684380046*a+2.6097574011*o-.3413193965*s),255*Zn(-.0041960863*a-.7034186147*o+1.707614701*s),t.length>3?t[3]:1]};function Zn(t){var e=Math.abs(t);return e>.0031308?(Xn(t)||1)*(1.055*Yn(e,1/2.4)-.055):12.92*t}var qn=c.unpack,Kn=c.type,Jn=b,Qn=y,tr=h,er=Un;Qn.prototype.oklab=function(){return er(this._rgb)},Jn.oklab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Qn,[null].concat(t,["oklab"])))},tr.format.oklab=Wn,tr.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=qn(t,"oklab"),"array"===Kn(t)&&3===t.length)return"oklab"}});var nr=c.unpack,rr=Un,ir=Ge,ar=c.unpack,or=Ze,sr=Wn,lr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=ar(t,"lch"))[0],r=t[1],i=t[2],a=or(n,r,i),o=a[0],s=a[1],l=a[2],u=sr(o,s,l),c=u[0],h=u[1],f=u[2];return[c,h,f,t.length>3?t[3]:1]},ur=c.unpack,cr=c.type,hr=b,fr=y,dr=h,pr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=nr(t,"rgb"),r=n[0],i=n[1],a=n[2],o=rr(r,i,a),s=o[0],l=o[1],u=o[2];return ir(s,l,u)};fr.prototype.oklch=function(){return pr(this._rgb)},hr.oklch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(fr,[null].concat(t,["oklch"])))},dr.format.oklch=lr,dr.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=ur(t,"oklch"),"array"===cr(t)&&3===t.length)return"oklch"}});var vr=y,gr=c.type;vr.prototype.alpha=function(t,e){return void 0===e&&(e=!1),void 0!==t&&"number"===gr(t)?e?(this._rgb[3]=t,this):new vr([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},y.prototype.clipped=function(){return this._rgb._clipped||!1};var yr=y,mr=ve;yr.prototype.darken=function(t){void 0===t&&(t=1);var e=this.lab();return e[0]-=mr.Kn*t,new yr(e,"lab").alpha(this.alpha(),!0)},yr.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},yr.prototype.darker=yr.prototype.darken,yr.prototype.brighter=yr.prototype.brighten,y.prototype.get=function(t){var e=t.split("."),n=e[0],r=e[1],i=this[n]();if(r){var a=n.indexOf(r)-("ok"===n.substr(0,2)?2:0);if(a>-1)return i[a];throw new Error("unknown channel "+r+" in mode "+n)}return i};var br=y,_r=c.type,wr=Math.pow;br.prototype.luminance=function(t){if(void 0!==t&&"number"===_r(t)){if(0===t)return new br([0,0,0,this._rgb[3]],"rgb");if(1===t)return new br([255,255,255,this._rgb[3]],"rgb");var e=this.luminance(),n=20,r=function(e,i){var a=e.interpolate(i,.5,"rgb"),o=a.luminance();return Math.abs(t-o)<1e-7||!n--?a:o>t?r(e,a):r(a,i)},i=(e>t?r(new br([0,0,0]),this):r(this,new br([255,255,255]))).rgb();return new br(i.concat([this._rgb[3]]))}return xr.apply(void 0,this._rgb.slice(0,3))};var xr=function(t,e,n){return.2126*(t=kr(t))+.7152*(e=kr(e))+.0722*(n=kr(n))},kr=function(t){return(t/=255)<=.03928?t/12.92:wr((t+.055)/1.055,2.4)},Er={},Or=y,Sr=c.type,Tr=Er,Lr=function(t,e,n){void 0===n&&(n=.5);for(var r=[],i=arguments.length-3;i-- >0;)r[i]=arguments[i+3];var a=r[0]||"lrgb";if(Tr[a]||r.length||(a=Object.keys(Tr)[0]),!Tr[a])throw new Error("interpolation mode "+a+" is not defined");return"object"!==Sr(t)&&(t=new Or(t)),"object"!==Sr(e)&&(e=new Or(e)),Tr[a](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))},Mr=y,Cr=Lr;Mr.prototype.mix=Mr.prototype.interpolate=function(t,e){void 0===e&&(e=.5);for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return Cr.apply(void 0,[this,t,e].concat(n))};var Dr=y;Dr.prototype.premultiply=function(t){void 0===t&&(t=!1);var e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new Dr([e[0]*n,e[1]*n,e[2]*n,n],"rgb")};var Ar=y,Pr=ve;Ar.prototype.saturate=function(t){void 0===t&&(t=1);var e=this.lch();return e[1]+=Pr.Kn*t,e[1]<0&&(e[1]=0),new Ar(e,"lch").alpha(this.alpha(),!0)},Ar.prototype.desaturate=function(t){return void 0===t&&(t=1),this.saturate(-t)};var Nr=y,Rr=c.type;Nr.prototype.set=function(t,e,n){void 0===n&&(n=!1);var r=t.split("."),i=r[0],a=r[1],o=this[i]();if(a){var s=i.indexOf(a)-("ok"===i.substr(0,2)?2:0);if(s>-1){if("string"==Rr(e))switch(e.charAt(0)){case"+":case"-":o[s]+=+e;break;case"*":o[s]*=+e.substr(1);break;case"/":o[s]/=+e.substr(1);break;default:o[s]=+e}else{if("number"!==Rr(e))throw new Error("unsupported value for Color.set");o[s]=e}var l=new Nr(o,i);return n?(this._rgb=l._rgb,this):l}throw new Error("unknown channel "+a+" in mode "+i)}return o};var Fr=y;Er.rgb=function(t,e,n){var r=t._rgb,i=e._rgb;return new Fr(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"rgb")};var Ir=y,jr=Math.sqrt,Hr=Math.pow;Er.lrgb=function(t,e,n){var r=t._rgb,i=r[0],a=r[1],o=r[2],s=e._rgb,l=s[0],u=s[1],c=s[2];return new Ir(jr(Hr(i,2)*(1-n)+Hr(l,2)*n),jr(Hr(a,2)*(1-n)+Hr(u,2)*n),jr(Hr(o,2)*(1-n)+Hr(c,2)*n),"rgb")};var Gr=y;Er.lab=function(t,e,n){var r=t.lab(),i=e.lab();return new Gr(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"lab")};var zr=y,Vr=function(t,e,n,r){var i,a,o,s,l,u,c,h,f,d,p,v,g;return"hsl"===r?(o=t.hsl(),s=e.hsl()):"hsv"===r?(o=t.hsv(),s=e.hsv()):"hcg"===r?(o=t.hcg(),s=e.hcg()):"hsi"===r?(o=t.hsi(),s=e.hsi()):"lch"===r||"hcl"===r?(r="hcl",o=t.hcl(),s=e.hcl()):"oklch"===r&&(o=t.oklch().reverse(),s=e.oklch().reverse()),"h"!==r.substr(0,1)&&"oklch"!==r||(l=(i=o)[0],c=i[1],f=i[2],u=(a=s)[0],h=a[1],d=a[2]),isNaN(l)||isNaN(u)?isNaN(l)?isNaN(u)?v=Number.NaN:(v=u,1!=f&&0!=f||"hsv"==r||(p=h)):(v=l,1!=d&&0!=d||"hsv"==r||(p=c)):v=l+n*(u>l&&u-l>180?u-(l+360):u<l&&l-u>180?u+360-l:u-l),void 0===p&&(p=c+n*(h-c)),g=f+n*(d-f),new zr("oklch"===r?[g,p,v]:[v,p,g],r)},Ur=Vr,Br=function(t,e,n){return Ur(t,e,n,"lch")};Er.lch=Br,Er.hcl=Br;var $r=y;Er.num=function(t,e,n){var r=t.num(),i=e.num();return new $r(r+n*(i-r),"num")};var Yr=Vr;Er.hcg=function(t,e,n){return Yr(t,e,n,"hcg")};var Xr=Vr;Er.hsi=function(t,e,n){return Xr(t,e,n,"hsi")};var Wr=Vr;Er.hsl=function(t,e,n){return Wr(t,e,n,"hsl")};var Zr=Vr;Er.hsv=function(t,e,n){return Zr(t,e,n,"hsv")};var qr=y;Er.oklab=function(t,e,n){var r=t.oklab(),i=e.oklab();return new qr(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"oklab")};var Kr=Vr;Er.oklch=function(t,e,n){return Kr(t,e,n,"oklch")};var Jr=y,Qr=c.clip_rgb,ti=Math.pow,ei=Math.sqrt,ni=Math.PI,ri=Math.cos,ii=Math.sin,ai=Math.atan2,oi=function(t,e){for(var n=t.length,r=[0,0,0,0],i=0;i<t.length;i++){var a=t[i],o=e[i]/n,s=a._rgb;r[0]+=ti(s[0],2)*o,r[1]+=ti(s[1],2)*o,r[2]+=ti(s[2],2)*o,r[3]+=s[3]*o}return r[0]=ei(r[0]),r[1]=ei(r[1]),r[2]=ei(r[2]),r[3]>.9999999&&(r[3]=1),new Jr(Qr(r))},si=b,li=c.type,ui=Math.pow,ci=function(t){var e="rgb",n=si("#ccc"),r=0,i=[0,1],a=[],o=[0,0],s=!1,l=[],u=!1,c=0,h=1,f=!1,d={},p=!0,v=1,g=function(t){if((t=t||["#fff","#000"])&&"string"===li(t)&&si.brewer&&si.brewer[t.toLowerCase()]&&(t=si.brewer[t.toLowerCase()]),"array"===li(t)){1===t.length&&(t=[t[0],t[0]]),t=t.slice(0);for(var e=0;e<t.length;e++)t[e]=si(t[e]);a.length=0;for(var n=0;n<t.length;n++)a.push(n/(t.length-1))}return _(),l=t},y=function(t){return t},m=function(t){return t},b=function(t,r){var i,u;if(null==r&&(r=!1),isNaN(t)||null===t)return n;u=r?t:s&&s.length>2?function(t){if(null!=s){for(var e=s.length-1,n=0;n<e&&t>=s[n];)n++;return n-1}return 0}(t)/(s.length-2):h!==c?(t-c)/(h-c):1,u=m(u),r||(u=y(u)),1!==v&&(u=ui(u,v)),u=o[0]+u*(1-o[0]-o[1]),u=Math.min(1,Math.max(0,u));var f=Math.floor(1e4*u);if(p&&d[f])i=d[f];else{if("array"===li(l))for(var g=0;g<a.length;g++){var b=a[g];if(u<=b){i=l[g];break}if(u>=b&&g===a.length-1){i=l[g];break}if(u>b&&u<a[g+1]){u=(u-b)/(a[g+1]-b),i=si.interpolate(l[g],l[g+1],u,e);break}}else"function"===li(l)&&(i=l(u));p&&(d[f]=i)}return i},_=function(){return d={}};g(t);var w=function(t){var e=si(b(t));return u&&e[u]?e[u]():e};return w.classes=function(t){if(null!=t){if("array"===li(t))s=t,i=[t[0],t[t.length-1]];else{var e=si.analyze(i);s=0===t?[e.min,e.max]:si.limits(e,"e",t)}return w}return s},w.domain=function(t){if(!arguments.length)return i;c=t[0],h=t[t.length-1],a=[];var e=l.length;if(t.length===e&&c!==h)for(var n=0,r=Array.from(t);n<r.length;n+=1){var o=r[n];a.push((o-c)/(h-c))}else{for(var s=0;s<e;s++)a.push(s/(e-1));if(t.length>2){var u=t.map((function(e,n){return n/(t.length-1)})),f=t.map((function(t){return(t-c)/(h-c)}));f.every((function(t,e){return u[e]===t}))||(m=function(t){if(t<=0||t>=1)return t;for(var e=0;t>=f[e+1];)e++;var n=(t-f[e])/(f[e+1]-f[e]);return u[e]+n*(u[e+1]-u[e])})}}return i=[c,h],w},w.mode=function(t){return arguments.length?(e=t,_(),w):e},w.range=function(t,e){return g(t),w},w.out=function(t){return u=t,w},w.spread=function(t){return arguments.length?(r=t,w):r},w.correctLightness=function(t){return null==t&&(t=!0),f=t,_(),y=f?function(t){for(var e=b(0,!0).lab()[0],n=b(1,!0).lab()[0],r=e>n,i=b(t,!0).lab()[0],a=e+(n-e)*t,o=i-a,s=0,l=1,u=20;Math.abs(o)>.01&&u-- >0;)r&&(o*=-1),o<0?(s=t,t+=.5*(l-t)):(l=t,t+=.5*(s-t)),i=b(t,!0).lab()[0],o=i-a;return t}:function(t){return t},w},w.padding=function(t){return null!=t?("number"===li(t)&&(t=[t,t]),o=t,w):o},w.colors=function(e,n){arguments.length<2&&(n="hex");var r=[];if(0===arguments.length)r=l.slice(0);else if(1===e)r=[w(.5)];else if(e>1){var a=i[0],o=i[1]-a;r=hi(0,e,!1).map((function(t){return w(a+t/(e-1)*o)}))}else{t=[];var u=[];if(s&&s.length>2)for(var c=1,h=s.length,f=1<=h;f?c<h:c>h;f?c++:c--)u.push(.5*(s[c-1]+s[c]));else u=i;r=u.map((function(t){return w(t)}))}return si[n]&&(r=r.map((function(t){return t[n]()}))),r},w.cache=function(t){return null!=t?(p=t,w):p},w.gamma=function(t){return null!=t?(v=t,w):v},w.nodata=function(t){return null!=t?(n=si(t),w):n},w};function hi(t,e,n){for(var r=[],i=t<e,a=n?i?e+1:e-1:e,o=t;i?o<a:o>a;i?o++:o--)r.push(o);return r}var fi=y,di=ci,pi=function(t){var e,n,r,i,a,o,s;if(2===(t=t.map((function(t){return new fi(t)}))).length)e=t.map((function(t){return t.lab()})),a=e[0],o=e[1],i=function(t){var e=[0,1,2].map((function(e){return a[e]+t*(o[e]-a[e])}));return new fi(e,"lab")};else if(3===t.length)n=t.map((function(t){return t.lab()})),a=n[0],o=n[1],s=n[2],i=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*a[e]+2*(1-t)*t*o[e]+t*t*s[e]}));return new fi(e,"lab")};else if(4===t.length){var l;r=t.map((function(t){return t.lab()})),a=r[0],o=r[1],s=r[2],l=r[3],i=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*(1-t)*a[e]+3*(1-t)*(1-t)*t*o[e]+3*(1-t)*t*t*s[e]+t*t*t*l[e]}));return new fi(e,"lab")}}else{if(!(t.length>=5))throw new RangeError("No point in running bezier with only one color.");var u,c,h;u=t.map((function(t){return t.lab()})),h=t.length-1,c=function(t){for(var e=[1,1],n=1;n<t;n++){for(var r=[1],i=1;i<=e.length;i++)r[i]=(e[i]||0)+e[i-1];e=r}return e}(h),i=function(t){var e=1-t,n=[0,1,2].map((function(n){return u.reduce((function(r,i,a){return r+c[a]*Math.pow(e,h-a)*Math.pow(t,a)*i[n]}),0)}));return new fi(n,"lab")}}return i},vi=b,gi=function(t,e,n){if(!gi[n])throw new Error("unknown blend mode "+n);return gi[n](t,e)},yi=function(t){return function(e,n){var r=vi(n).rgb(),i=vi(e).rgb();return vi.rgb(t(r,i))}},mi=function(t){return function(e,n){var r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r}};gi.normal=yi(mi((function(t){return t}))),gi.multiply=yi(mi((function(t,e){return t*e/255}))),gi.screen=yi(mi((function(t,e){return 255*(1-(1-t/255)*(1-e/255))}))),gi.overlay=yi(mi((function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))}))),gi.darken=yi(mi((function(t,e){return t>e?e:t}))),gi.lighten=yi(mi((function(t,e){return t>e?t:e}))),gi.dodge=yi(mi((function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t}))),gi.burn=yi(mi((function(t,e){return 255*(1-(1-e/255)/(t/255))})));for(var bi=gi,_i=c.type,wi=c.clip_rgb,xi=c.TWOPI,ki=Math.pow,Ei=Math.sin,Oi=Math.cos,Si=b,Ti=y,Li=Math.floor,Mi=Math.random,Ci=o,Di=Math.log,Ai=Math.pow,Pi=Math.floor,Ni=Math.abs,Ri=function(t,e){void 0===e&&(e=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===Ci(t)&&(t=Object.values(t)),t.forEach((function(t){e&&"object"===Ci(t)&&(t=t[e]),null==t||isNaN(t)||(n.values.push(t),n.sum+=t,t<n.min&&(n.min=t),t>n.max&&(n.max=t),n.count+=1)})),n.domain=[n.min,n.max],n.limits=function(t,e){return Fi(n,t,e)},n},Fi=function(t,e,n){void 0===e&&(e="equal"),void 0===n&&(n=7),"array"==Ci(t)&&(t=Ri(t));var r=t.min,i=t.max,a=t.values.sort((function(t,e){return t-e}));if(1===n)return[r,i];var o=[];if("c"===e.substr(0,1)&&(o.push(r),o.push(i)),"e"===e.substr(0,1)){o.push(r);for(var s=1;s<n;s++)o.push(r+s/n*(i-r));o.push(i)}else if("l"===e.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var l=Math.LOG10E*Di(r),u=Math.LOG10E*Di(i);o.push(r);for(var c=1;c<n;c++)o.push(Ai(10,l+c/n*(u-l)));o.push(i)}else if("q"===e.substr(0,1)){o.push(r);for(var h=1;h<n;h++){var f=(a.length-1)*h/n,d=Pi(f);if(d===f)o.push(a[d]);else{var p=f-d;o.push(a[d]*(1-p)+a[d+1]*p)}}o.push(i)}else if("k"===e.substr(0,1)){var v,g=a.length,y=new Array(g),m=new Array(n),b=!0,_=0,w=null;(w=[]).push(r);for(var x=1;x<n;x++)w.push(r+x/n*(i-r));for(w.push(i);b;){for(var k=0;k<n;k++)m[k]=0;for(var E=0;E<g;E++)for(var O=a[E],S=Number.MAX_VALUE,T=void 0,L=0;L<n;L++){var M=Ni(w[L]-O);M<S&&(S=M,T=L),m[T]++,y[E]=T}for(var C=new Array(n),D=0;D<n;D++)C[D]=null;for(var A=0;A<g;A++)null===C[v=y[A]]?C[v]=a[A]:C[v]+=a[A];for(var P=0;P<n;P++)C[P]*=1/m[P];b=!1;for(var N=0;N<n;N++)if(C[N]!==w[N]){b=!0;break}w=C,++_>200&&(b=!1)}for(var R={},F=0;F<n;F++)R[F]=[];for(var I=0;I<g;I++)R[v=y[I]].push(a[I]);for(var j=[],H=0;H<n;H++)j.push(R[H][0]),j.push(R[H][R[H].length-1]);j=j.sort((function(t,e){return t-e})),o.push(j[0]);for(var G=1;G<j.length;G+=2){var z=j[G];isNaN(z)||-1!==o.indexOf(z)||o.push(z)}}return o},Ii={analyze:Ri,limits:Fi},ji=y,Hi=y,Gi=Math.sqrt,zi=Math.pow,Vi=Math.min,Ui=Math.max,Bi=Math.atan2,$i=Math.abs,Yi=Math.cos,Xi=Math.sin,Wi=Math.exp,Zi=Math.PI,qi=y,Ki=y,Ji=b,Qi=ci,ta={cool:function(){return Qi([Ji.hsl(180,1,.9),Ji.hsl(250,.7,.4)])},hot:function(){return Qi(["#000","#f00","#ff0","#fff"]).mode("rgb")}},ea={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},na=0,ra=Object.keys(ea);na<ra.length;na+=1){var ia=ra[na];ea[ia.toLowerCase()]=ea[ia]}var aa=ea,oa=b;return oa.average=function(t,e,n){void 0===e&&(e="lrgb"),void 0===n&&(n=null);var r=t.length;n||(n=Array.from(new Array(r)).map((function(){return 1})));var i=r/n.reduce((function(t,e){return t+e}));if(n.forEach((function(t,e){n[e]*=i})),t=t.map((function(t){return new Jr(t)})),"lrgb"===e)return oi(t,n);for(var a=t.shift(),o=a.get(e),s=[],l=0,u=0,c=0;c<o.length;c++)if(o[c]=(o[c]||0)*n[0],s.push(isNaN(o[c])?0:n[0]),"h"===e.charAt(c)&&!isNaN(o[c])){var h=o[c]/180*ni;l+=ri(h)*n[0],u+=ii(h)*n[0]}var f=a.alpha()*n[0];t.forEach((function(t,r){var i=t.get(e);f+=t.alpha()*n[r+1];for(var a=0;a<o.length;a++)if(!isNaN(i[a]))if(s[a]+=n[r+1],"h"===e.charAt(a)){var c=i[a]/180*ni;l+=ri(c)*n[r+1],u+=ii(c)*n[r+1]}else o[a]+=i[a]*n[r+1]}));for(var d=0;d<o.length;d++)if("h"===e.charAt(d)){for(var p=ai(u/s[d],l/s[d])/ni*180;p<0;)p+=360;for(;p>=360;)p-=360;o[d]=p}else o[d]=o[d]/s[d];return f/=r,new Jr(o,e).alpha(f>.99999?1:f,!0)},oa.bezier=function(t){var e=pi(t);return e.scale=function(){return di(e)},e},oa.blend=bi,oa.cubehelix=function(t,e,n,r,i){void 0===t&&(t=300),void 0===e&&(e=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=[0,1]);var a,o=0;"array"===_i(i)?a=i[1]-i[0]:(a=0,i=[i,i]);var s=function(s){var l=xi*((t+120)/360+e*s),u=ki(i[0]+a*s,r),c=(0!==o?n[0]+s*o:n)*u*(1-u)/2,h=Oi(l),f=Ei(l);return Si(wi([255*(u+c*(-.14861*h+1.78277*f)),255*(u+c*(-.29227*h-.90649*f)),255*(u+c*(1.97294*h)),1]))};return s.start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?r:(r=t,s)},s.hue=function(t){return null==t?n:("array"===_i(n=t)?0==(o=n[1]-n[0])&&(n=n[1]):o=0,s)},s.lightness=function(t){return null==t?i:("array"===_i(t)?(i=t,a=t[1]-t[0]):(i=[t,t],a=0),s)},s.scale=function(){return Si.scale(s)},s.hue(n),s},oa.mix=oa.interpolate=Lr,oa.random=function(){for(var t="#",e=0;e<6;e++)t+="0123456789abcdef".charAt(Li(16*Mi()));return new Ti(t,"hex")},oa.scale=ci,oa.analyze=Ii.analyze,oa.contrast=function(t,e){t=new ji(t),e=new ji(e);var n=t.luminance(),r=e.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},oa.deltaE=function(t,e,n,r,i){void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=1);var a=function(t){return 360*t/(2*Zi)},o=function(t){return 2*Zi*t/360};t=new Hi(t),e=new Hi(e);var s=Array.from(t.lab()),l=s[0],u=s[1],c=s[2],h=Array.from(e.lab()),f=h[0],d=h[1],p=h[2],v=(l+f)/2,g=Gi(zi(u,2)+zi(c,2)),y=Gi(zi(d,2)+zi(p,2)),m=(g+y)/2,b=.5*(1-Gi(zi(m,7)/(zi(m,7)+zi(25,7)))),_=u*(1+b),w=d*(1+b),x=Gi(zi(_,2)+zi(c,2)),k=Gi(zi(w,2)+zi(p,2)),E=(x+k)/2,O=a(Bi(c,_)),S=a(Bi(p,w)),T=O>=0?O:O+360,L=S>=0?S:S+360,M=$i(T-L)>180?(T+L+360)/2:(T+L)/2,C=1-.17*Yi(o(M-30))+.24*Yi(o(2*M))+.32*Yi(o(3*M+6))-.2*Yi(o(4*M-63)),D=L-T;D=$i(D)<=180?D:L<=T?D+360:D-360,D=2*Gi(x*k)*Xi(o(D)/2);var A=f-l,P=k-x,N=1+.015*zi(v-50,2)/Gi(20+zi(v-50,2)),R=1+.045*E,F=1+.015*E*C,I=30*Wi(-zi((M-275)/25,2)),j=-2*Gi(zi(E,7)/(zi(E,7)+zi(25,7)))*Xi(2*o(I)),H=Gi(zi(A/(n*N),2)+zi(P/(r*R),2)+zi(D/(i*F),2)+j*(P/(r*R))*(D/(i*F)));return Ui(0,Vi(100,H))},oa.distance=function(t,e,n){void 0===n&&(n="lab"),t=new qi(t),e=new qi(e);var r=t.get(n),i=e.get(n),a=0;for(var o in r){var s=(r[o]||0)-(i[o]||0);a+=s*s}return Math.sqrt(a)},oa.limits=Ii.limits,oa.valid=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{return new(Function.prototype.bind.apply(Ki,[null].concat(t))),!0}catch(t){return!1}},oa.scales=ta,oa.colors=cn,oa.brewer=aa,oa}()},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__7__},function(t,e,n){"use strict";n.r(e),n.d(e,"Deflate",(function(){return We})),n.d(e,"Inflate",(function(){return Je})),n.d(e,"constants",(function(){return nn})),n.d(e,"default",(function(){return rn})),n.d(e,"deflate",(function(){return Ze})),n.d(e,"deflateRaw",(function(){return qe})),n.d(e,"gzip",(function(){return Ke})),n.d(e,"inflate",(function(){return Qe})),n.d(e,"inflateRaw",(function(){return tn})),n.d(e,"ungzip",(function(){return en}));function r(t){let e=t.length;for(;--e>=0;)t[e]=0}const i=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),a=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),s=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=new Array(576);r(l);const u=new Array(60);r(u);const c=new Array(512);r(c);const h=new Array(256);r(h);const f=new Array(29);r(f);const d=new Array(30);function p(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let v,g,y;function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}r(d);const b=t=>t<256?c[t]:c[256+(t>>>7)],_=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},w=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,_(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},x=(t,e,n)=>{w(t,n[2*e],n[2*e+1])},k=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},E=(t,e,n)=>{const r=new Array(16);let i,a,o=0;for(i=1;i<=15;i++)r[i]=o=o+n[i-1]<<1;for(a=0;a<=e;a++){let e=t[2*a+1];0!==e&&(t[2*a]=k(r[e]++,e))}},O=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},S=t=>{t.bi_valid>8?_(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},T=(t,e,n,r)=>{const i=2*e,a=2*n;return t[i]<t[a]||t[i]===t[a]&&r[e]<=r[n]},L=(t,e,n)=>{const r=t.heap[n];let i=n<<1;for(;i<=t.heap_len&&(i<t.heap_len&&T(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!T(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r},M=(t,e,n)=>{let r,o,s,l,u=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],o=t.pending_buf[t.l_buf+u],u++,0===r?x(t,o,e):(s=h[o],x(t,s+256+1,e),l=i[s],0!==l&&(o-=f[s],w(t,o,l)),r--,s=b(r),x(t,s,n),l=a[s],0!==l&&(r-=d[s],w(t,r,l)))}while(u<t.last_lit);x(t,256,e)},C=(t,e)=>{const n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,a=e.stat_desc.elems;let o,s,l,u=-1;for(t.heap_len=0,t.heap_max=573,o=0;o<a;o++)0!==n[2*o]?(t.heap[++t.heap_len]=u=o,t.depth[o]=0):n[2*o+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=u<2?++u:0,n[2*l]=1,t.depth[l]=0,t.opt_len--,i&&(t.static_len-=r[2*l+1]);for(e.max_code=u,o=t.heap_len>>1;o>=1;o--)L(t,n,o);l=a;do{o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],L(t,n,1),s=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=s,n[2*l]=n[2*o]+n[2*s],t.depth[l]=(t.depth[o]>=t.depth[s]?t.depth[o]:t.depth[s])+1,n[2*o+1]=n[2*s+1]=l,t.heap[1]=l++,L(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,a=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,s=e.stat_desc.extra_base,l=e.stat_desc.max_length;let u,c,h,f,d,p,v=0;for(f=0;f<=15;f++)t.bl_count[f]=0;for(n[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)c=t.heap[u],f=n[2*n[2*c+1]+1]+1,f>l&&(f=l,v++),n[2*c+1]=f,c>r||(t.bl_count[f]++,d=0,c>=s&&(d=o[c-s]),p=n[2*c],t.opt_len+=p*(f+d),a&&(t.static_len+=p*(i[2*c+1]+d)));if(0!==v){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,v-=2}while(v>0);for(f=l;0!==f;f--)for(c=t.bl_count[f];0!==c;)h=t.heap[--u],h>r||(n[2*h+1]!==f&&(t.opt_len+=(f-n[2*h+1])*n[2*h],n[2*h+1]=f),c--)}})(t,e),E(n,u,t.bl_count)},D=(t,e,n)=>{let r,i,a=-1,o=e[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=e[2*(r+1)+1],++s<l&&i===o||(s<u?t.bl_tree[2*i]+=s:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,a=i,0===o?(l=138,u=3):i===o?(l=6,u=3):(l=7,u=4))},A=(t,e,n)=>{let r,i,a=-1,o=e[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),r=0;r<=n;r++)if(i=o,o=e[2*(r+1)+1],!(++s<l&&i===o)){if(s<u)do{x(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(x(t,i,t.bl_tree),s--),x(t,16,t.bl_tree),w(t,s-3,2)):s<=10?(x(t,17,t.bl_tree),w(t,s-3,3)):(x(t,18,t.bl_tree),w(t,s-11,7));s=0,a=i,0===o?(l=138,u=3):i===o?(l=6,u=3):(l=7,u=4)}};let P=!1;const N=(t,e,n,r)=>{w(t,0+(r?1:0),3),((t,e,n,r)=>{S(t),r&&(_(t,n),_(t,~n)),t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n})(t,e,n,!0)};var R={_tr_init:t=>{P||((()=>{let t,e,n,r,s;const m=new Array(16);for(n=0,r=0;r<28;r++)for(f[r]=n,t=0;t<1<<i[r];t++)h[n++]=r;for(h[n-1]=r,s=0,r=0;r<16;r++)for(d[r]=s,t=0;t<1<<a[r];t++)c[s++]=r;for(s>>=7;r<30;r++)for(d[r]=s<<7,t=0;t<1<<a[r]-7;t++)c[256+s++]=r;for(e=0;e<=15;e++)m[e]=0;for(t=0;t<=143;)l[2*t+1]=8,t++,m[8]++;for(;t<=255;)l[2*t+1]=9,t++,m[9]++;for(;t<=279;)l[2*t+1]=7,t++,m[7]++;for(;t<=287;)l[2*t+1]=8,t++,m[8]++;for(E(l,287,m),t=0;t<30;t++)u[2*t+1]=5,u[2*t]=k(t,5);v=new p(l,i,257,286,15),g=new p(u,a,0,30,15),y=new p(new Array(0),o,0,19,7)})(),P=!0),t.l_desc=new m(t.dyn_ltree,v),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,O(t)},_tr_stored_block:N,_tr_flush_block:(t,e,n,r)=>{let i,a,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),C(t,t.l_desc),C(t,t.d_desc),o=(t=>{let e;for(D(t,t.dyn_ltree,t.l_desc.max_code),D(t,t.dyn_dtree,t.d_desc.max_code),C(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*s[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==e?N(t,e,n,r):4===t.strategy||a===i?(w(t,2+(r?1:0),3),M(t,l,u)):(w(t,4+(r?1:0),3),((t,e,n,r)=>{let i;for(w(t,e-257,5),w(t,n-1,5),w(t,r-4,4),i=0;i<r;i++)w(t,t.bl_tree[2*s[i]+1],3);A(t,t.dyn_ltree,e-1),A(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),M(t,t.dyn_ltree,t.dyn_dtree)),O(t),r&&S(t)},_tr_tally:(t,e,n)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(h[n]+256+1)]++,t.dyn_dtree[2*b(e)]++),t.last_lit===t.lit_bufsize-1),_tr_align:t=>{w(t,2,3),x(t,256,l),(t=>{16===t.bi_valid?(_(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var F=(t,e,n,r)=>{let i=65535&t|0,a=t>>>16&65535|0,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+e[r++]|0,a=a+i|0}while(--o);i%=65521,a%=65521}return i|a<<16|0};const I=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());var j=(t,e,n,r)=>{const i=I,a=r+n;t^=-1;for(let n=r;n<a;n++)t=t>>>8^i[255&(t^e[n])];return-1^t},H={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},G={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:z,_tr_stored_block:V,_tr_flush_block:U,_tr_tally:B,_tr_align:$}=R,{Z_NO_FLUSH:Y,Z_PARTIAL_FLUSH:X,Z_FULL_FLUSH:W,Z_FINISH:Z,Z_BLOCK:q,Z_OK:K,Z_STREAM_END:J,Z_STREAM_ERROR:Q,Z_DATA_ERROR:tt,Z_BUF_ERROR:et,Z_DEFAULT_COMPRESSION:nt,Z_FILTERED:rt,Z_HUFFMAN_ONLY:it,Z_RLE:at,Z_FIXED:ot,Z_DEFAULT_STRATEGY:st,Z_UNKNOWN:lt,Z_DEFLATED:ut}=G,ct=(t,e)=>(t.msg=H[e],e),ht=t=>(t<<1)-(t>4?9:0),ft=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let dt=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const pt=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},vt=(t,e)=>{U(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,pt(t.strm)},gt=(t,e)=>{t.pending_buf[t.pending++]=e},yt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},mt=(t,e,n,r)=>{let i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),n),1===t.state.wrap?t.adler=F(t.adler,e,i,n):2===t.state.wrap&&(t.adler=j(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)},bt=(t,e)=>{let n,r,i=t.max_chain_length,a=t.strstart,o=t.prev_length,s=t.nice_match;const l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,u=t.window,c=t.w_mask,h=t.prev,f=t.strstart+258;let d=u[a+o-1],p=u[a+o];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(n=e,u[n+o]===p&&u[n+o-1]===d&&u[n]===u[a]&&u[++n]===u[a+1]){a+=2,n++;do{}while(u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&a<f);if(r=258-(f-a),a=f-258,r>o){if(t.match_start=e,o=r,r>=s)break;d=u[a+o-1],p=u[a+o]}}}while((e=h[e&c])>l&&0!=--i);return o<=t.lookahead?o:t.lookahead},_t=t=>{const e=t.w_size;let n,r,i,a,o;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,r=t.hash_size,n=r;do{i=t.head[--n],t.head[n]=i>=e?i-e:0}while(--r);r=e,n=r;do{i=t.prev[--n],t.prev[n]=i>=e?i-e:0}while(--r);a+=e}if(0===t.strm.avail_in)break;if(r=mt(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=r,t.lookahead+t.insert>=3)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=dt(t,t.ins_h,t.window[o+1]);t.insert&&(t.ins_h=dt(t,t.ins_h,t.window[o+3-1]),t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},wt=(t,e)=>{let n,r;for(;;){if(t.lookahead<262){if(_t(t),t.lookahead<262&&e===Y)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=dt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-262&&(t.match_length=bt(t,n)),t.match_length>=3)if(r=B(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=dt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=dt(t,t.ins_h,t.window[t.strstart+1]);else r=B(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(vt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===Z?(vt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(vt(t,!1),0===t.strm.avail_out)?1:2},xt=(t,e)=>{let n,r,i;for(;;){if(t.lookahead<262){if(_t(t),t.lookahead<262&&e===Y)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=dt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-262&&(t.match_length=bt(t,n),t.match_length<=5&&(t.strategy===rt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=B(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=dt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(vt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(r=B(t,0,t.window[t.strstart-1]),r&&vt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=B(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===Z?(vt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(vt(t,!1),0===t.strm.avail_out)?1:2};function kt(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}const Et=[new kt(0,0,0,0,(t,e)=>{let n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(_t(t),0===t.lookahead&&e===Y)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,vt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(vt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Z?(vt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(vt(t,!1),t.strm.avail_out),1)}),new kt(4,4,8,4,wt),new kt(4,5,16,8,wt),new kt(4,6,32,32,wt),new kt(4,4,16,16,xt),new kt(8,16,32,32,xt),new kt(8,16,128,128,xt),new kt(8,32,128,256,xt),new kt(32,128,258,1024,xt),new kt(32,258,258,4096,xt)];function Ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ut,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ft(this.dyn_ltree),ft(this.dyn_dtree),ft(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ft(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ft(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const St=t=>{if(!t||!t.state)return ct(t,Q);t.total_in=t.total_out=0,t.data_type=lt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=Y,z(e),K},Tt=t=>{const e=St(t);var n;return e===K&&((n=t.state).window_size=2*n.w_size,ft(n.head),n.max_lazy_match=Et[n.level].max_lazy,n.good_match=Et[n.level].good_length,n.nice_match=Et[n.level].nice_length,n.max_chain_length=Et[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e},Lt=(t,e,n,r,i,a)=>{if(!t)return Q;let o=1;if(e===nt&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==ut||r<8||r>15||e<0||e>9||a<0||a>ot)return ct(t,Q);8===r&&(r=9);const s=new Ot;return t.state=s,s.strm=t,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=a,s.method=n,Tt(t)};var Mt={deflateInit:(t,e)=>Lt(t,e,ut,15,8,st),deflateInit2:Lt,deflateReset:Tt,deflateResetKeep:St,deflateSetHeader:(t,e)=>t&&t.state?2!==t.state.wrap?Q:(t.state.gzhead=e,K):Q,deflate:(t,e)=>{let n,r;if(!t||!t.state||e>q||e<0)return t?ct(t,Q):Q;const i=t.state;if(!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==Z)return ct(t,0===t.avail_out?et:Q);i.strm=t;const a=i.last_flush;if(i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,gt(i,31),gt(i,139),gt(i,8),i.gzhead?(gt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),gt(i,255&i.gzhead.time),gt(i,i.gzhead.time>>8&255),gt(i,i.gzhead.time>>16&255),gt(i,i.gzhead.time>>24&255),gt(i,9===i.level?2:i.strategy>=it||i.level<2?4:0),gt(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(gt(i,255&i.gzhead.extra.length),gt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=j(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(gt(i,0),gt(i,0),gt(i,0),gt(i,0),gt(i,0),gt(i,9===i.level?2:i.strategy>=it||i.level<2?4:0),gt(i,3),i.status=113);else{let e=ut+(i.w_bits-8<<4)<<8,n=-1;n=i.strategy>=it||i.level<2?0:i.level<6?1:6===i.level?2:3,e|=n<<6,0!==i.strstart&&(e|=32),e+=31-e%31,i.status=113,yt(i,e),0!==i.strstart&&(yt(i,t.adler>>>16),yt(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(t.adler=j(t.adler,i.pending_buf,i.pending-n,n)),pt(t),n=i.pending,i.pending!==i.pending_buf_size));)gt(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=j(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=j(t.adler,i.pending_buf,i.pending-n,n)),pt(t),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}r=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,gt(i,r)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(t.adler=j(t.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=j(t.adler,i.pending_buf,i.pending-n,n)),pt(t),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}r=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,gt(i,r)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(t.adler=j(t.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&pt(t),i.pending+2<=i.pending_buf_size&&(gt(i,255&t.adler),gt(i,t.adler>>8&255),t.adler=0,i.status=113)):i.status=113),0!==i.pending){if(pt(t),0===t.avail_out)return i.last_flush=-1,K}else if(0===t.avail_in&&ht(e)<=ht(a)&&e!==Z)return ct(t,et);if(666===i.status&&0!==t.avail_in)return ct(t,et);if(0!==t.avail_in||0!==i.lookahead||e!==Y&&666!==i.status){let n=i.strategy===it?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(_t(t),0===t.lookahead)){if(e===Y)return 1;break}if(t.match_length=0,n=B(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(vt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Z?(vt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(vt(t,!1),0===t.strm.avail_out)?1:2})(i,e):i.strategy===at?((t,e)=>{let n,r,i,a;const o=t.window;for(;;){if(t.lookahead<=258){if(_t(t),t.lookahead<=258&&e===Y)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=t.strstart+258;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);t.match_length=258-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=B(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=B(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(vt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Z?(vt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(vt(t,!1),0===t.strm.avail_out)?1:2})(i,e):Et[i.level].func(i,e);if(3!==n&&4!==n||(i.status=666),1===n||3===n)return 0===t.avail_out&&(i.last_flush=-1),K;if(2===n&&(e===X?$(i):e!==q&&(V(i,0,0,!1),e===W&&(ft(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),pt(t),0===t.avail_out))return i.last_flush=-1,K}return e!==Z?K:i.wrap<=0?J:(2===i.wrap?(gt(i,255&t.adler),gt(i,t.adler>>8&255),gt(i,t.adler>>16&255),gt(i,t.adler>>24&255),gt(i,255&t.total_in),gt(i,t.total_in>>8&255),gt(i,t.total_in>>16&255),gt(i,t.total_in>>24&255)):(yt(i,t.adler>>>16),yt(i,65535&t.adler)),pt(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?K:J)},deflateEnd:t=>{if(!t||!t.state)return Q;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?ct(t,Q):(t.state=null,113===e?ct(t,tt):K)},deflateSetDictionary:(t,e)=>{let n=e.length;if(!t||!t.state)return Q;const r=t.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return Q;if(1===i&&(t.adler=F(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){0===i&&(ft(r.head),r.strstart=0,r.block_start=0,r.insert=0);let t=new Uint8Array(r.w_size);t.set(e.subarray(n-r.w_size,n),0),e=t,n=r.w_size}const a=t.avail_in,o=t.next_in,s=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,_t(r);r.lookahead>=3;){let t=r.strstart,e=r.lookahead-2;do{r.ins_h=dt(r,r.ins_h,r.window[t+3-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++}while(--e);r.strstart=t,r.lookahead=2,_t(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=s,t.avail_in=a,r.wrap=i,K},deflateInfo:"pako deflate (from Nodeca project)"};const Ct=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Dt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const e in n)Ct(n,e)&&(t[e]=n[e])}}return t},At=t=>{let e=0;for(let n=0,r=t.length;n<r;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,r=0,i=t.length;e<i;e++){let i=t[e];n.set(i,r),r+=i.length}return n};let Pt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Pt=!1}const Nt=new Uint8Array(256);for(let t=0;t<256;t++)Nt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Nt[254]=Nt[254]=1;var Rt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,r,i,a,o=t.length,s=0;for(i=0;i<o;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(s),a=0,i=0;a<s;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},Ft=(t,e)=>{const n=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let r,i;const a=new Array(2*n);for(i=0,r=0;r<n;){let e=t[r++];if(e<128){a[i++]=e;continue}let o=Nt[e];if(o>4)a[i++]=65533,r+=o-1;else{for(e&=2===o?31:3===o?15:7;o>1&&r<n;)e=e<<6|63&t[r++],o--;o>1?a[i++]=65533:e<65536?a[i++]=e:(e-=65536,a[i++]=55296|e>>10&1023,a[i++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Pt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n})(a,i)},It=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let n=e-1;for(;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+Nt[t[n]]>e?n:e};var jt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ht=Object.prototype.toString,{Z_NO_FLUSH:Gt,Z_SYNC_FLUSH:zt,Z_FULL_FLUSH:Vt,Z_FINISH:Ut,Z_OK:Bt,Z_STREAM_END:$t,Z_DEFAULT_COMPRESSION:Yt,Z_DEFAULT_STRATEGY:Xt,Z_DEFLATED:Wt}=G;function Zt(t){this.options=Dt({level:Yt,method:Wt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Xt},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new jt,this.strm.avail_out=0;let n=Mt.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==Bt)throw new Error(H[n]);if(e.header&&Mt.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Rt(e.dictionary):"[object ArrayBuffer]"===Ht.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=Mt.deflateSetDictionary(this.strm,t),n!==Bt)throw new Error(H[n]);this._dict_set=!0}}function qt(t,e){const n=new Zt(e);if(n.push(t,!0),n.err)throw n.msg||H[n.err];return n.result}Zt.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=e===~~e?e:!0===e?Ut:Gt,"string"==typeof t?n.input=Rt(t):"[object ArrayBuffer]"===Ht.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===zt||a===Vt)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Mt.deflate(n,a),i===$t)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Mt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Bt;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Zt.prototype.onData=function(t){this.chunks.push(t)},Zt.prototype.onEnd=function(t){t===Bt&&(this.result=At(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Kt={Deflate:Zt,deflate:qt,deflateRaw:function(t,e){return(e=e||{}).raw=!0,qt(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,qt(t,e)},constants:G};var Jt=function(t,e){let n,r,i,a,o,s,l,u,c,h,f,d,p,v,g,y,m,b,_,w,x,k,E,O;const S=t.state;n=t.next_in,E=t.input,r=n+(t.avail_in-5),i=t.next_out,O=t.output,a=i-(e-t.avail_out),o=i+(t.avail_out-257),s=S.dmax,l=S.wsize,u=S.whave,c=S.wnext,h=S.window,f=S.hold,d=S.bits,p=S.lencode,v=S.distcode,g=(1<<S.lenbits)-1,y=(1<<S.distbits)-1;t:do{d<15&&(f+=E[n++]<<d,d+=8,f+=E[n++]<<d,d+=8),m=p[f&g];e:for(;;){if(b=m>>>24,f>>>=b,d-=b,b=m>>>16&255,0===b)O[i++]=65535&m;else{if(!(16&b)){if(0==(64&b)){m=p[(65535&m)+(f&(1<<b)-1)];continue e}if(32&b){S.mode=12;break t}t.msg="invalid literal/length code",S.mode=30;break t}_=65535&m,b&=15,b&&(d<b&&(f+=E[n++]<<d,d+=8),_+=f&(1<<b)-1,f>>>=b,d-=b),d<15&&(f+=E[n++]<<d,d+=8,f+=E[n++]<<d,d+=8),m=v[f&y];n:for(;;){if(b=m>>>24,f>>>=b,d-=b,b=m>>>16&255,!(16&b)){if(0==(64&b)){m=v[(65535&m)+(f&(1<<b)-1)];continue n}t.msg="invalid distance code",S.mode=30;break t}if(w=65535&m,b&=15,d<b&&(f+=E[n++]<<d,d+=8,d<b&&(f+=E[n++]<<d,d+=8)),w+=f&(1<<b)-1,w>s){t.msg="invalid distance too far back",S.mode=30;break t}if(f>>>=b,d-=b,b=i-a,w>b){if(b=w-b,b>u&&S.sane){t.msg="invalid distance too far back",S.mode=30;break t}if(x=0,k=h,0===c){if(x+=l-b,b<_){_-=b;do{O[i++]=h[x++]}while(--b);x=i-w,k=O}}else if(c<b){if(x+=l+c-b,b-=c,b<_){_-=b;do{O[i++]=h[x++]}while(--b);if(x=0,c<_){b=c,_-=b;do{O[i++]=h[x++]}while(--b);x=i-w,k=O}}}else if(x+=c-b,b<_){_-=b;do{O[i++]=h[x++]}while(--b);x=i-w,k=O}for(;_>2;)O[i++]=k[x++],O[i++]=k[x++],O[i++]=k[x++],_-=3;_&&(O[i++]=k[x++],_>1&&(O[i++]=k[x++]))}else{x=i-w;do{O[i++]=O[x++],O[i++]=O[x++],O[i++]=O[x++],_-=3}while(_>2);_&&(O[i++]=O[x++],_>1&&(O[i++]=O[x++]))}break}}break}}while(n<r&&i<o);_=d>>3,n-=_,d-=_<<3,f&=(1<<d)-1,t.next_in=n,t.next_out=i,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=i<o?o-i+257:257-(i-o),S.hold=f,S.bits=d};const Qt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),te=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ee=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ne=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var re=(t,e,n,r,i,a,o,s)=>{const l=s.bits;let u,c,h,f,d,p,v=0,g=0,y=0,m=0,b=0,_=0,w=0,x=0,k=0,E=0,O=null,S=0;const T=new Uint16Array(16),L=new Uint16Array(16);let M,C,D,A=null,P=0;for(v=0;v<=15;v++)T[v]=0;for(g=0;g<r;g++)T[e[n+g]]++;for(b=l,m=15;m>=1&&0===T[m];m--);if(b>m&&(b=m),0===m)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(y=1;y<m&&0===T[y];y++);for(b<y&&(b=y),x=1,v=1;v<=15;v++)if(x<<=1,x-=T[v],x<0)return-1;if(x>0&&(0===t||1!==m))return-1;for(L[1]=0,v=1;v<15;v++)L[v+1]=L[v]+T[v];for(g=0;g<r;g++)0!==e[n+g]&&(o[L[e[n+g]]++]=g);if(0===t?(O=A=o,p=19):1===t?(O=Qt,S-=257,A=te,P-=257,p=256):(O=ee,A=ne,p=-1),E=0,g=0,v=y,d=a,_=b,w=0,h=-1,k=1<<b,f=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){M=v-w,o[g]<p?(C=0,D=o[g]):o[g]>p?(C=A[P+o[g]],D=O[S+o[g]]):(C=96,D=0),u=1<<v-w,c=1<<_,y=c;do{c-=u,i[d+(E>>w)+c]=M<<24|C<<16|D|0}while(0!==c);for(u=1<<v-1;E&u;)u>>=1;if(0!==u?(E&=u-1,E+=u):E=0,g++,0==--T[v]){if(v===m)break;v=e[n+o[g]]}if(v>b&&(E&f)!==h){for(0===w&&(w=b),d+=y,_=v-w,x=1<<_;_+w<m&&(x-=T[_+w],!(x<=0));)_++,x<<=1;if(k+=1<<_,1===t&&k>852||2===t&&k>592)return 1;h=E&f,i[h]=b<<24|_<<16|d-a|0}}return 0!==E&&(i[d+E]=v-w<<24|64<<16|0),s.bits=b,0};const{Z_FINISH:ie,Z_BLOCK:ae,Z_TREES:oe,Z_OK:se,Z_STREAM_END:le,Z_NEED_DICT:ue,Z_STREAM_ERROR:ce,Z_DATA_ERROR:he,Z_MEM_ERROR:fe,Z_BUF_ERROR:de,Z_DEFLATED:pe}=G,ve=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function ge(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ye=t=>{if(!t||!t.state)return ce;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,se},me=t=>{if(!t||!t.state)return ce;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ye(t)},be=(t,e)=>{let n;if(!t||!t.state)return ce;const r=t.state;return e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?ce:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,me(t))},_e=(t,e)=>{if(!t)return ce;const n=new ge;t.state=n,n.window=null;const r=be(t,e);return r!==se&&(t.state=null),r};let we,xe,ke=!0;const Ee=t=>{if(ke){we=new Int32Array(512),xe=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(re(1,t.lens,0,288,we,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;re(2,t.lens,0,32,xe,0,t.work,{bits:5}),ke=!1}t.lencode=we,t.lenbits=9,t.distcode=xe,t.distbits=5},Oe=(t,e,n,r)=>{let i;const a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(e.subarray(n-r,n-r+i),a.wnext),(r-=i)?(a.window.set(e.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var Se={inflateReset:me,inflateReset2:be,inflateResetKeep:ye,inflateInit:t=>_e(t,15),inflateInit2:_e,inflate:(t,e)=>{let n,r,i,a,o,s,l,u,c,h,f,d,p,v,g,y,m,b,_,w,x,k,E=0;const O=new Uint8Array(4);let S,T;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return ce;n=t.state,12===n.mode&&(n.mode=13),o=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,r=t.input,s=t.avail_in,u=n.hold,c=n.bits,h=s,f=l,k=se;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;c<16;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}if(2&n.wrap&&35615===u){n.check=0,O[0]=255&u,O[1]=u>>>8&255,n.check=j(n.check,O,2,0),u=0,c=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=30;break}if((15&u)!==pe){t.msg="unknown compression method",n.mode=30;break}if(u>>>=4,c-=4,x=8+(15&u),0===n.wbits)n.wbits=x;else if(x>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<n.wbits,t.adler=n.check=1,n.mode=512&u?10:12,u=0,c=0;break;case 2:for(;c<16;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}if(n.flags=u,(255&n.flags)!==pe){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(O[0]=255&u,O[1]=u>>>8&255,n.check=j(n.check,O,2,0)),u=0,c=0,n.mode=3;case 3:for(;c<32;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}n.head&&(n.head.time=u),512&n.flags&&(O[0]=255&u,O[1]=u>>>8&255,O[2]=u>>>16&255,O[3]=u>>>24&255,n.check=j(n.check,O,4,0)),u=0,c=0,n.mode=4;case 4:for(;c<16;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(O[0]=255&u,O[1]=u>>>8&255,n.check=j(n.check,O,2,0)),u=0,c=0,n.mode=5;case 5:if(1024&n.flags){for(;c<16;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(O[0]=255&u,O[1]=u>>>8&255,n.check=j(n.check,O,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(d=n.length,d>s&&(d=s),d&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+d),x)),512&n.flags&&(n.check=j(n.check,r,d,a)),s-=d,a+=d,n.length-=d),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break t;d=0;do{x=r[a+d++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x))}while(x&&d<s);if(512&n.flags&&(n.check=j(n.check,r,d,a)),s-=d,a+=d,x)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break t;d=0;do{x=r[a+d++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x))}while(x&&d<s);if(512&n.flags&&(n.check=j(n.check,r,d,a)),s-=d,a+=d,x)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;c<16;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}if(u!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;c<32;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}t.adler=n.check=ve(u),u=0,c=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=s,n.hold=u,n.bits=c,ue;t.adler=n.check=1,n.mode=12;case 12:if(e===ae||e===oe)break t;case 13:if(n.last){u>>>=7&c,c-=7&c,n.mode=27;break}for(;c<3;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}switch(n.last=1&u,u>>>=1,c-=1,3&u){case 0:n.mode=14;break;case 1:if(Ee(n),n.mode=20,e===oe){u>>>=2,c-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}u>>>=2,c-=2;break;case 14:for(u>>>=7&c,c-=7&c;c<32;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&u,u=0,c=0,n.mode=15,e===oe)break t;case 15:n.mode=16;case 16:if(d=n.length,d){if(d>s&&(d=s),d>l&&(d=l),0===d)break t;i.set(r.subarray(a,a+d),o),s-=d,a+=d,l-=d,o+=d,n.length-=d;break}n.mode=12;break;case 17:for(;c<14;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}if(n.nlen=257+(31&u),u>>>=5,c-=5,n.ndist=1+(31&u),u>>>=5,c-=5,n.ncode=4+(15&u),u>>>=4,c-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;c<3;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}n.lens[L[n.have++]]=7&u,u>>>=3,c-=3}for(;n.have<19;)n.lens[L[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},k=re(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,k){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;E=n.lencode[u&(1<<n.lenbits)-1],g=E>>>24,y=E>>>16&255,m=65535&E,!(g<=c);){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}if(m<16)u>>>=g,c-=g,n.lens[n.have++]=m;else{if(16===m){for(T=g+2;c<T;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}if(u>>>=g,c-=g,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}x=n.lens[n.have-1],d=3+(3&u),u>>>=2,c-=2}else if(17===m){for(T=g+3;c<T;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}u>>>=g,c-=g,x=0,d=3+(7&u),u>>>=3,c-=3}else{for(T=g+7;c<T;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}u>>>=g,c-=g,x=0,d=11+(127&u),u>>>=7,c-=7}if(n.have+d>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;d--;)n.lens[n.have++]=x}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,S={bits:n.lenbits},k=re(1,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,k){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},k=re(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,k){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,e===oe)break t;case 20:n.mode=21;case 21:if(s>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=s,n.hold=u,n.bits=c,Jt(t,f),o=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,r=t.input,s=t.avail_in,u=n.hold,c=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;E=n.lencode[u&(1<<n.lenbits)-1],g=E>>>24,y=E>>>16&255,m=65535&E,!(g<=c);){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}if(y&&0==(240&y)){for(b=g,_=y,w=m;E=n.lencode[w+((u&(1<<b+_)-1)>>b)],g=E>>>24,y=E>>>16&255,m=65535&E,!(b+g<=c);){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}u>>>=b,c-=b,n.back+=b}if(u>>>=g,c-=g,n.back+=g,n.length=m,0===y){n.mode=26;break}if(32&y){n.back=-1,n.mode=12;break}if(64&y){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&y,n.mode=22;case 22:if(n.extra){for(T=n.extra;c<T;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;E=n.distcode[u&(1<<n.distbits)-1],g=E>>>24,y=E>>>16&255,m=65535&E,!(g<=c);){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}if(0==(240&y)){for(b=g,_=y,w=m;E=n.distcode[w+((u&(1<<b+_)-1)>>b)],g=E>>>24,y=E>>>16&255,m=65535&E,!(b+g<=c);){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}u>>>=b,c-=b,n.back+=b}if(u>>>=g,c-=g,n.back+=g,64&y){t.msg="invalid distance code",n.mode=30;break}n.offset=m,n.extra=15&y,n.mode=24;case 24:if(n.extra){for(T=n.extra;c<T;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break t;if(d=f-l,n.offset>d){if(d=n.offset-d,d>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),v=n.window}else v=i,p=o-n.offset,d=n.length;d>l&&(d=l),l-=d,n.length-=d;do{i[o++]=v[p++]}while(--d);0===n.length&&(n.mode=21);break;case 26:if(0===l)break t;i[o++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;c<32;){if(0===s)break t;s--,u|=r[a++]<<c,c+=8}if(f-=l,t.total_out+=f,n.total+=f,f&&(t.adler=n.check=n.flags?j(n.check,i,f,o-f):F(n.check,i,f,o-f)),f=l,(n.flags?u:ve(u))!==n.check){t.msg="incorrect data check",n.mode=30;break}u=0,c=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;c<32;){if(0===s)break t;s--,u+=r[a++]<<c,c+=8}if(u!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}u=0,c=0}n.mode=29;case 29:k=le;break t;case 30:k=he;break t;case 31:return fe;case 32:default:return ce}return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=s,n.hold=u,n.bits=c,(n.wsize||f!==t.avail_out&&n.mode<30&&(n.mode<27||e!==ie))&&Oe(t,t.output,t.next_out,f-t.avail_out),h-=t.avail_in,f-=t.avail_out,t.total_in+=h,t.total_out+=f,n.total+=f,n.wrap&&f&&(t.adler=n.check=n.flags?j(n.check,i,f,t.next_out-f):F(n.check,i,f,t.next_out-f)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===h&&0===f||e===ie)&&k===se&&(k=de),k},inflateEnd:t=>{if(!t||!t.state)return ce;let e=t.state;return e.window&&(e.window=null),t.state=null,se},inflateGetHeader:(t,e)=>{if(!t||!t.state)return ce;const n=t.state;return 0==(2&n.wrap)?ce:(n.head=e,e.done=!1,se)},inflateSetDictionary:(t,e)=>{const n=e.length;let r,i,a;return t&&t.state?(r=t.state,0!==r.wrap&&11!==r.mode?ce:11===r.mode&&(i=1,i=F(i,e,n,0),i!==r.check)?he:(a=Oe(t,e,n,n),a?(r.mode=31,fe):(r.havedict=1,se))):ce},inflateInfo:"pako inflate (from Nodeca project)"};var Te=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Le=Object.prototype.toString,{Z_NO_FLUSH:Me,Z_FINISH:Ce,Z_OK:De,Z_STREAM_END:Ae,Z_NEED_DICT:Pe,Z_STREAM_ERROR:Ne,Z_DATA_ERROR:Re,Z_MEM_ERROR:Fe}=G;function Ie(t){this.options=Dt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new jt,this.strm.avail_out=0;let n=Se.inflateInit2(this.strm,e.windowBits);if(n!==De)throw new Error(H[n]);if(this.header=new Te,Se.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Rt(e.dictionary):"[object ArrayBuffer]"===Le.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Se.inflateSetDictionary(this.strm,e.dictionary),n!==De)))throw new Error(H[n])}function je(t,e){const n=new Ie(e);if(n.push(t),n.err)throw n.msg||H[n.err];return n.result}Ie.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(o=e===~~e?e:!0===e?Ce:Me,"[object ArrayBuffer]"===Le.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Se.inflate(n,o),a===Pe&&i&&(a=Se.inflateSetDictionary(n,i),a===De?a=Se.inflate(n,o):a===Re&&(a=Pe));n.avail_in>0&&a===Ae&&n.state.wrap>0&&0!==t[n.next_in];)Se.inflateReset(n),a=Se.inflate(n,o);switch(a){case Ne:case Re:case Pe:case Fe:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||a===Ae))if("string"===this.options.to){let t=It(n.output,n.next_out),e=n.next_out-t,i=Ft(n.output,t);n.next_out=e,n.avail_out=r-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==De||0!==s){if(a===Ae)return a=Se.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Ie.prototype.onData=function(t){this.chunks.push(t)},Ie.prototype.onEnd=function(t){t===De&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=At(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var He={Inflate:Ie,inflate:je,inflateRaw:function(t,e){return(e=e||{}).raw=!0,je(t,e)},ungzip:je,constants:G};const{Deflate:Ge,deflate:ze,deflateRaw:Ve,gzip:Ue}=Kt,{Inflate:Be,inflate:$e,inflateRaw:Ye,ungzip:Xe}=He;var We=Ge,Ze=ze,qe=Ve,Ke=Ue,Je=Be,Qe=$e,tn=Ye,en=Xe,nn=G,rn={Deflate:Ge,deflate:ze,deflateRaw:Ve,gzip:Ue,Inflate:Be,inflate:$e,inflateRaw:Ye,ungzip:Xe,constants:G}},function(t,e,n){(function(n){var r,i;i=this,void 0===(r=function(){return i.Chartist=function(){var t={version:"0.11.4"};return function(t,e){"use strict";var n=t.window,r=t.document;e.namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},e.noop=function(t){return t},e.alphaNumerate=function(t){return String.fromCharCode(97+t%26)},e.extend=function(t){var n,r,i;for(t=t||{},n=1;n<arguments.length;n++)for(var a in r=arguments[n])i=r[a],t[a]="object"!=typeof i||null===i||i instanceof Array?i:e.extend(t[a],i);return t},e.replaceAll=function(t,e,n){return t.replace(new RegExp(e,"g"),n)},e.ensureUnit=function(t,e){return"number"==typeof t&&(t+=e),t},e.quantity=function(t){if("string"==typeof t){var e=/^(\d+)\s*(.*)$/g.exec(t);return{value:+e[1],unit:e[2]||void 0}}return{value:t}},e.querySelector=function(t){return t instanceof Node?t:r.querySelector(t)},e.times=function(t){return Array.apply(null,new Array(t))},e.sum=function(t,e){return t+(e||0)},e.mapMultiply=function(t){return function(e){return e*t}},e.mapAdd=function(t){return function(e){return e+t}},e.serialMap=function(t,n){var r=[],i=Math.max.apply(null,t.map((function(t){return t.length})));return e.times(i).forEach((function(e,i){var a=t.map((function(t){return t[i]}));r[i]=n.apply(null,a)})),r},e.roundWithPrecision=function(t,n){var r=Math.pow(10,n||e.precision);return Math.round(t*r)/r},e.precision=8,e.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},e.serialize=function(t){return null==t?t:("number"==typeof t?t=""+t:"object"==typeof t&&(t=JSON.stringify({data:t})),Object.keys(e.escapingMap).reduce((function(t,n){return e.replaceAll(t,n,e.escapingMap[n])}),t))},e.deserialize=function(t){if("string"!=typeof t)return t;t=Object.keys(e.escapingMap).reduce((function(t,n){return e.replaceAll(t,e.escapingMap[n],n)}),t);try{t=void 0!==(t=JSON.parse(t)).data?t.data:t}catch(t){}return t},e.createSvg=function(t,n,r,i){var a;return n=n||"100%",r=r||"100%",Array.prototype.slice.call(t.querySelectorAll("svg")).filter((function(t){return t.getAttributeNS(e.namespaces.xmlns,"ct")})).forEach((function(e){t.removeChild(e)})),(a=new e.Svg("svg").attr({width:n,height:r}).addClass(i))._node.style.width=n,a._node.style.height=r,t.appendChild(a._node),a},e.normalizeData=function(t,n,r){var i,a={raw:t,normalized:{}};return a.normalized.series=e.getDataArray({series:t.series||[]},n,r),i=a.normalized.series.every((function(t){return t instanceof Array}))?Math.max.apply(null,a.normalized.series.map((function(t){return t.length}))):a.normalized.series.length,a.normalized.labels=(t.labels||[]).slice(),Array.prototype.push.apply(a.normalized.labels,e.times(Math.max(0,i-a.normalized.labels.length)).map((function(){return""}))),n&&e.reverseData(a.normalized),a},e.safeHasProperty=function(t,e){return null!==t&&"object"==typeof t&&t.hasOwnProperty(e)},e.isDataHoleValue=function(t){return null==t||"number"==typeof t&&isNaN(t)},e.reverseData=function(t){t.labels.reverse(),t.series.reverse();for(var e=0;e<t.series.length;e++)"object"==typeof t.series[e]&&void 0!==t.series[e].data?t.series[e].data.reverse():t.series[e]instanceof Array&&t.series[e].reverse()},e.getDataArray=function(t,n,r){return t.series.map((function t(n){if(e.safeHasProperty(n,"value"))return t(n.value);if(e.safeHasProperty(n,"data"))return t(n.data);if(n instanceof Array)return n.map(t);if(!e.isDataHoleValue(n)){if(r){var i={};return"string"==typeof r?i[r]=e.getNumberOrUndefined(n):i.y=e.getNumberOrUndefined(n),i.x=n.hasOwnProperty("x")?e.getNumberOrUndefined(n.x):i.x,i.y=n.hasOwnProperty("y")?e.getNumberOrUndefined(n.y):i.y,i}return e.getNumberOrUndefined(n)}}))},e.normalizePadding=function(t,e){return e=e||0,"number"==typeof t?{top:t,right:t,bottom:t,left:t}:{top:"number"==typeof t.top?t.top:e,right:"number"==typeof t.right?t.right:e,bottom:"number"==typeof t.bottom?t.bottom:e,left:"number"==typeof t.left?t.left:e}},e.getMetaData=function(t,e){var n=t.data?t.data[e]:t[e];return n?n.meta:void 0},e.orderOfMagnitude=function(t){return Math.floor(Math.log(Math.abs(t))/Math.LN10)},e.projectLength=function(t,e,n){return e/n.range*t},e.getAvailableHeight=function(t,n){return Math.max((e.quantity(n.height).value||t.height())-(n.chartPadding.top+n.chartPadding.bottom)-n.axisX.offset,0)},e.getHighLow=function(t,n,r){var i={high:void 0===(n=e.extend({},n,r?n["axis"+r.toUpperCase()]:{})).high?-Number.MAX_VALUE:+n.high,low:void 0===n.low?Number.MAX_VALUE:+n.low},a=void 0===n.high,o=void 0===n.low;return(a||o)&&function t(e){if(void 0!==e)if(e instanceof Array)for(var n=0;n<e.length;n++)t(e[n]);else{var s=r?+e[r]:+e;a&&s>i.high&&(i.high=s),o&&s<i.low&&(i.low=s)}}(t),(n.referenceValue||0===n.referenceValue)&&(i.high=Math.max(n.referenceValue,i.high),i.low=Math.min(n.referenceValue,i.low)),i.high<=i.low&&(0===i.low?i.high=1:i.low<0?i.high=0:(i.high>0||(i.high=1),i.low=0)),i},e.isNumeric=function(t){return null!==t&&isFinite(t)},e.isFalseyButZero=function(t){return!t&&0!==t},e.getNumberOrUndefined=function(t){return e.isNumeric(t)?+t:void 0},e.isMultiValue=function(t){return"object"==typeof t&&("x"in t||"y"in t)},e.getMultiValue=function(t,n){return e.isMultiValue(t)?e.getNumberOrUndefined(t[n||"y"]):e.getNumberOrUndefined(t)},e.rho=function(t){if(1===t)return t;function e(t,n){return t%n==0?n:e(n,t%n)}function n(t){return t*t+1}var r,i=2,a=2;if(t%2==0)return 2;do{i=n(i)%t,a=n(n(a))%t,r=e(Math.abs(i-a),t)}while(1===r);return r},e.getBounds=function(t,n,r,i){var a,o,s,l=0,u={high:n.high,low:n.low};u.valueRange=u.high-u.low,u.oom=e.orderOfMagnitude(u.valueRange),u.step=Math.pow(10,u.oom),u.min=Math.floor(u.low/u.step)*u.step,u.max=Math.ceil(u.high/u.step)*u.step,u.range=u.max-u.min,u.numberOfSteps=Math.round(u.range/u.step);var c=e.projectLength(t,u.step,u)<r,h=i?e.rho(u.range):0;if(i&&e.projectLength(t,1,u)>=r)u.step=1;else if(i&&h<u.step&&e.projectLength(t,h,u)>=r)u.step=h;else for(;;){if(c&&e.projectLength(t,u.step,u)<=r)u.step*=2;else{if(c||!(e.projectLength(t,u.step/2,u)>=r))break;if(u.step/=2,i&&u.step%1!=0){u.step*=2;break}}if(l++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}function f(t,e){return t===(t+=e)&&(t*=1+(e>0?2221e-19:-2221e-19)),t}for(u.step=Math.max(u.step,2221e-19),o=u.min,s=u.max;o+u.step<=u.low;)o=f(o,u.step);for(;s-u.step>=u.high;)s=f(s,-u.step);u.min=o,u.max=s,u.range=u.max-u.min;var d=[];for(a=u.min;a<=u.max;a=f(a,u.step)){var p=e.roundWithPrecision(a);p!==d[d.length-1]&&d.push(p)}return u.values=d,u},e.polarToCartesian=function(t,e,n,r){var i=(r-90)*Math.PI/180;return{x:t+n*Math.cos(i),y:e+n*Math.sin(i)}},e.createChartRect=function(t,n,r){var i=!(!n.axisX&&!n.axisY),a=i?n.axisY.offset:0,o=i?n.axisX.offset:0,s=t.width()||e.quantity(n.width).value||0,l=t.height()||e.quantity(n.height).value||0,u=e.normalizePadding(n.chartPadding,r);s=Math.max(s,a+u.left+u.right),l=Math.max(l,o+u.top+u.bottom);var c={padding:u,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return i?("start"===n.axisX.position?(c.y2=u.top+o,c.y1=Math.max(l-u.bottom,c.y2+1)):(c.y2=u.top,c.y1=Math.max(l-u.bottom-o,c.y2+1)),"start"===n.axisY.position?(c.x1=u.left+a,c.x2=Math.max(s-u.right,c.x1+1)):(c.x1=u.left,c.x2=Math.max(s-u.right-a,c.x1+1))):(c.x1=u.left,c.x2=Math.max(s-u.right,c.x1+1),c.y2=u.top,c.y1=Math.max(l-u.bottom,c.y2+1)),c},e.createGrid=function(t,n,r,i,a,o,s,l){var u={};u[r.units.pos+"1"]=t,u[r.units.pos+"2"]=t,u[r.counterUnits.pos+"1"]=i,u[r.counterUnits.pos+"2"]=i+a;var c=o.elem("line",u,s.join(" "));l.emit("draw",e.extend({type:"grid",axis:r,index:n,group:o,element:c},u))},e.createGridBackground=function(t,e,n,r){var i=t.elem("rect",{x:e.x1,y:e.y2,width:e.width(),height:e.height()},n,!0);r.emit("draw",{type:"gridBackground",group:t,element:i})},e.createLabel=function(t,n,i,a,o,s,l,u,c,h,f){var d,p={};if(p[o.units.pos]=t+l[o.units.pos],p[o.counterUnits.pos]=l[o.counterUnits.pos],p[o.units.len]=n,p[o.counterUnits.len]=Math.max(0,s-10),h){var v=r.createElement("span");v.className=c.join(" "),v.setAttribute("xmlns",e.namespaces.xhtml),v.innerText=a[i],v.style[o.units.len]=Math.round(p[o.units.len])+"px",v.style[o.counterUnits.len]=Math.round(p[o.counterUnits.len])+"px",d=u.foreignObject(v,e.extend({style:"overflow: visible;"},p))}else d=u.elem("text",p,c.join(" ")).text(a[i]);f.emit("draw",e.extend({type:"label",axis:o,index:i,group:u,element:d,text:a[i]},p))},e.getSeriesOption=function(t,e,n){if(t.name&&e.series&&e.series[t.name]){var r=e.series[t.name];return r.hasOwnProperty(n)?r[n]:e[n]}return e[n]},e.optionsProvider=function(t,r,i){var a,o,s=e.extend({},t),l=[];function u(t){var l=a;if(a=e.extend({},s),r)for(o=0;o<r.length;o++)n.matchMedia(r[o][0]).matches&&(a=e.extend(a,r[o][1]));i&&t&&i.emit("optionsChanged",{previousOptions:l,currentOptions:a})}if(!n.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(r)for(o=0;o<r.length;o++){var c=n.matchMedia(r[o][0]);c.addListener(u),l.push(c)}return u(),{removeMediaQueryListeners:function(){l.forEach((function(t){t.removeListener(u)}))},getCurrentOptions:function(){return e.extend({},a)}}},e.splitIntoSegments=function(t,n,r){r=e.extend({},{increasingX:!1,fillHoles:!1},r);for(var i=[],a=!0,o=0;o<t.length;o+=2)void 0===e.getMultiValue(n[o/2].value)?r.fillHoles||(a=!0):(r.increasingX&&o>=2&&t[o]<=t[o-2]&&(a=!0),a&&(i.push({pathCoordinates:[],valueData:[]}),a=!1),i[i.length-1].pathCoordinates.push(t[o],t[o+1]),i[i.length-1].valueData.push(n[o/2]));return i}}(this||n,t),function(t,e){"use strict";e.Interpolation={},e.Interpolation.none=function(t){return t=e.extend({},{fillHoles:!1},t),function(n,r){for(var i=new e.Svg.Path,a=!0,o=0;o<n.length;o+=2){var s=n[o],l=n[o+1],u=r[o/2];void 0!==e.getMultiValue(u.value)?(a?i.move(s,l,!1,u):i.line(s,l,!1,u),a=!1):t.fillHoles||(a=!0)}return i}},e.Interpolation.simple=function(t){t=e.extend({},{divisor:2,fillHoles:!1},t);var n=1/Math.max(1,t.divisor);return function(r,i){for(var a,o,s,l=new e.Svg.Path,u=0;u<r.length;u+=2){var c=r[u],h=r[u+1],f=(c-a)*n,d=i[u/2];void 0!==d.value?(void 0===s?l.move(c,h,!1,d):l.curve(a+f,o,c-f,h,c,h,!1,d),a=c,o=h,s=d):t.fillHoles||(a=c=s=void 0)}return l}},e.Interpolation.cardinal=function(t){t=e.extend({},{tension:1,fillHoles:!1},t);var n=Math.min(1,Math.max(0,t.tension)),r=1-n;return function i(a,o){var s=e.splitIntoSegments(a,o,{fillHoles:t.fillHoles});if(s.length){if(s.length>1){var l=[];return s.forEach((function(t){l.push(i(t.pathCoordinates,t.valueData))})),e.Svg.Path.join(l)}if(a=s[0].pathCoordinates,o=s[0].valueData,a.length<=4)return e.Interpolation.none()(a,o);for(var u=(new e.Svg.Path).move(a[0],a[1],!1,o[0]),c=0,h=a.length;h-2>c;c+=2){var f=[{x:+a[c-2],y:+a[c-1]},{x:+a[c],y:+a[c+1]},{x:+a[c+2],y:+a[c+3]},{x:+a[c+4],y:+a[c+5]}];h-4===c?f[3]=f[2]:c||(f[0]={x:+a[c],y:+a[c+1]}),u.curve(n*(-f[0].x+6*f[1].x+f[2].x)/6+r*f[2].x,n*(-f[0].y+6*f[1].y+f[2].y)/6+r*f[2].y,n*(f[1].x+6*f[2].x-f[3].x)/6+r*f[2].x,n*(f[1].y+6*f[2].y-f[3].y)/6+r*f[2].y,f[2].x,f[2].y,!1,o[(c+2)/2])}return u}return e.Interpolation.none()([])}},e.Interpolation.monotoneCubic=function(t){return t=e.extend({},{fillHoles:!1},t),function n(r,i){var a=e.splitIntoSegments(r,i,{fillHoles:t.fillHoles,increasingX:!0});if(a.length){if(a.length>1){var o=[];return a.forEach((function(t){o.push(n(t.pathCoordinates,t.valueData))})),e.Svg.Path.join(o)}if(r=a[0].pathCoordinates,i=a[0].valueData,r.length<=4)return e.Interpolation.none()(r,i);var s,l,u=[],c=[],h=r.length/2,f=[],d=[],p=[],v=[];for(s=0;s<h;s++)u[s]=r[2*s],c[s]=r[2*s+1];for(s=0;s<h-1;s++)p[s]=c[s+1]-c[s],v[s]=u[s+1]-u[s],d[s]=p[s]/v[s];for(f[0]=d[0],f[h-1]=d[h-2],s=1;s<h-1;s++)0===d[s]||0===d[s-1]||d[s-1]>0!=d[s]>0?f[s]=0:(f[s]=3*(v[s-1]+v[s])/((2*v[s]+v[s-1])/d[s-1]+(v[s]+2*v[s-1])/d[s]),isFinite(f[s])||(f[s]=0));for(l=(new e.Svg.Path).move(u[0],c[0],!1,i[0]),s=0;s<h-1;s++)l.curve(u[s]+v[s]/3,c[s]+f[s]*v[s]/3,u[s+1]-v[s]/3,c[s+1]-f[s+1]*v[s]/3,u[s+1],c[s+1],!1,i[s+1]);return l}return e.Interpolation.none()([])}},e.Interpolation.step=function(t){return t=e.extend({},{postpone:!0,fillHoles:!1},t),function(n,r){for(var i,a,o,s=new e.Svg.Path,l=0;l<n.length;l+=2){var u=n[l],c=n[l+1],h=r[l/2];void 0!==h.value?(void 0===o?s.move(u,c,!1,h):(t.postpone?s.line(u,a,!1,o):s.line(i,c,!1,h),s.line(u,c,!1,h)),i=u,a=c,o=h):t.fillHoles||(i=a=o=void 0)}return s}}}(0,t),function(t,e){"use strict";e.EventEmitter=function(){var t=[];return{addEventHandler:function(e,n){t[e]=t[e]||[],t[e].push(n)},removeEventHandler:function(e,n){t[e]&&(n?(t[e].splice(t[e].indexOf(n),1),0===t[e].length&&delete t[e]):delete t[e])},emit:function(e,n){t[e]&&t[e].forEach((function(t){t(n)})),t["*"]&&t["*"].forEach((function(t){t(e,n)}))}}}}(0,t),function(t,e){"use strict";function n(t){var e=[];if(t.length)for(var n=0;n<t.length;n++)e.push(t[n]);return e}e.Class={extend:function(t,n){var r=n||this.prototype||e.Class,i=Object.create(r);e.Class.cloneDefinitions(i,t);var a=function(){var t,n=i.constructor||function(){};return t=this===e?Object.create(i):this,n.apply(t,Array.prototype.slice.call(arguments,0)),t};return a.prototype=i,a.super=r,a.extend=this.extend,a},cloneDefinitions:function(){var t=n(arguments),e=t[0];return t.splice(1,t.length-1).forEach((function(t){Object.getOwnPropertyNames(t).forEach((function(n){delete e[n],Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))})),e}}}(0,t),function(t,e){"use strict";var n=t.window;function r(){n.addEventListener("resize",this.resizeListener),this.optionsProvider=e.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(t){t instanceof Array?t[0](this,t[1]):t(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}e.Base=e.Class.extend({constructor:function(t,n,i,a,o){this.container=e.querySelector(t),this.data=n||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.defaultOptions=i,this.options=a,this.responsiveOptions=o,this.eventEmitter=e.EventEmitter(),this.supportsForeignObject=e.Svg.isSupported("Extensibility"),this.supportsAnimations=e.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(r.bind(this),0)},optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:function(t,n,r){return t&&(this.data=t||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),n&&(this.options=e.extend({},r?this.options:this.defaultOptions,n),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=e.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this},detach:function(){return this.initializeTimeoutId?n.clearTimeout(this.initializeTimeoutId):(n.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this},on:function(t,e){return this.eventEmitter.addEventHandler(t,e),this},off:function(t,e){return this.eventEmitter.removeEventHandler(t,e),this},version:e.version,supportsForeignObject:!1})}(this||n,t),function(t,e){"use strict";var n=t.document;e.Svg=e.Class.extend({constructor:function(t,r,i,a,o){t instanceof Element?this._node=t:(this._node=n.createElementNS(e.namespaces.svg,t),"svg"===t&&this.attr({"xmlns:ct":e.namespaces.ct})),r&&this.attr(r),i&&this.addClass(i),a&&(o&&a._node.firstChild?a._node.insertBefore(this._node,a._node.firstChild):a._node.appendChild(this._node))},attr:function(t,n){return"string"==typeof t?n?this._node.getAttributeNS(n,t):this._node.getAttribute(t):(Object.keys(t).forEach(function(n){if(void 0!==t[n])if(-1!==n.indexOf(":")){var r=n.split(":");this._node.setAttributeNS(e.namespaces[r[0]],n,t[n])}else this._node.setAttribute(n,t[n])}.bind(this)),this)},elem:function(t,n,r,i){return new e.Svg(t,n,r,this,i)},parent:function(){return this._node.parentNode instanceof SVGElement?new e.Svg(this._node.parentNode):null},root:function(){for(var t=this._node;"svg"!==t.nodeName;)t=t.parentNode;return new e.Svg(t)},querySelector:function(t){var n=this._node.querySelector(t);return n?new e.Svg(n):null},querySelectorAll:function(t){var n=this._node.querySelectorAll(t);return n.length?new e.Svg.List(n):null},getNode:function(){return this._node},foreignObject:function(t,r,i,a){if("string"==typeof t){var o=n.createElement("div");o.innerHTML=t,t=o.firstChild}t.setAttribute("xmlns",e.namespaces.xmlns);var s=this.elem("foreignObject",r,i,a);return s._node.appendChild(t),s},text:function(t){return this._node.appendChild(n.createTextNode(t)),this},empty:function(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this},remove:function(){return this._node.parentNode.removeChild(this._node),this.parent()},replace:function(t){return this._node.parentNode.replaceChild(t._node,this._node),t},append:function(t,e){return e&&this._node.firstChild?this._node.insertBefore(t._node,this._node.firstChild):this._node.appendChild(t._node),this},classes:function(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]},addClass:function(t){return this._node.setAttribute("class",this.classes(this._node).concat(t.trim().split(/\s+/)).filter((function(t,e,n){return n.indexOf(t)===e})).join(" ")),this},removeClass:function(t){var e=t.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter((function(t){return-1===e.indexOf(t)})).join(" ")),this},removeAllClasses:function(){return this._node.setAttribute("class",""),this},height:function(){return this._node.getBoundingClientRect().height},width:function(){return this._node.getBoundingClientRect().width},animate:function(t,n,r){return void 0===n&&(n=!0),Object.keys(t).forEach(function(i){function a(t,n){var a,o,s,l={};t.easing&&(s=t.easing instanceof Array?t.easing:e.Svg.Easing[t.easing],delete t.easing),t.begin=e.ensureUnit(t.begin,"ms"),t.dur=e.ensureUnit(t.dur,"ms"),s&&(t.calcMode="spline",t.keySplines=s.join(" "),t.keyTimes="0;1"),n&&(t.fill="freeze",l[i]=t.from,this.attr(l),o=e.quantity(t.begin||0).value,t.begin="indefinite"),a=this.elem("animate",e.extend({attributeName:i},t)),n&&setTimeout(function(){try{a._node.beginElement()}catch(e){l[i]=t.to,this.attr(l),a.remove()}}.bind(this),o),r&&a._node.addEventListener("beginEvent",function(){r.emit("animationBegin",{element:this,animate:a._node,params:t})}.bind(this)),a._node.addEventListener("endEvent",function(){r&&r.emit("animationEnd",{element:this,animate:a._node,params:t}),n&&(l[i]=t.to,this.attr(l),a.remove())}.bind(this))}t[i]instanceof Array?t[i].forEach(function(t){a.bind(this)(t,!1)}.bind(this)):a.bind(this)(t[i],n)}.bind(this)),this}}),e.Svg.isSupported=function(t){return n.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#"+t,"1.1")},e.Svg.Easing={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]},e.Svg.List=e.Class.extend({constructor:function(t){var n=this;this.svgElements=[];for(var r=0;r<t.length;r++)this.svgElements.push(new e.Svg(t[r]));Object.keys(e.Svg.prototype).filter((function(t){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(t)})).forEach((function(t){n[t]=function(){var r=Array.prototype.slice.call(arguments,0);return n.svgElements.forEach((function(n){e.Svg.prototype[t].apply(n,r)})),n}}))}})}(this||n,t),function(t,e){"use strict";var n={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},r={accuracy:3};function i(t,n,r,i,a,o){var s=e.extend({command:a?t.toLowerCase():t.toUpperCase()},n,o?{data:o}:{});r.splice(i,0,s)}function a(t,e){t.forEach((function(r,i){n[r.command.toLowerCase()].forEach((function(n,a){e(r,n,i,a,t)}))}))}e.Svg.Path=e.Class.extend({constructor:function(t,n){this.pathElements=[],this.pos=0,this.close=t,this.options=e.extend({},r,n)},position:function(t){return void 0!==t?(this.pos=Math.max(0,Math.min(this.pathElements.length,t)),this):this.pos},remove:function(t){return this.pathElements.splice(this.pos,t),this},move:function(t,e,n,r){return i("M",{x:+t,y:+e},this.pathElements,this.pos++,n,r),this},line:function(t,e,n,r){return i("L",{x:+t,y:+e},this.pathElements,this.pos++,n,r),this},curve:function(t,e,n,r,a,o,s,l){return i("C",{x1:+t,y1:+e,x2:+n,y2:+r,x:+a,y:+o},this.pathElements,this.pos++,s,l),this},arc:function(t,e,n,r,a,o,s,l,u){return i("A",{rx:+t,ry:+e,xAr:+n,lAf:+r,sf:+a,x:+o,y:+s},this.pathElements,this.pos++,l,u),this},scale:function(t,e){return a(this.pathElements,(function(n,r){n[r]*="x"===r[0]?t:e})),this},translate:function(t,e){return a(this.pathElements,(function(n,r){n[r]+="x"===r[0]?t:e})),this},transform:function(t){return a(this.pathElements,(function(e,n,r,i,a){var o=t(e,n,r,i,a);(o||0===o)&&(e[n]=o)})),this},parse:function(t){var r=t.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce((function(t,e){return e.match(/[A-Za-z]/)&&t.push([]),t[t.length-1].push(e),t}),[]);"Z"===r[r.length-1][0].toUpperCase()&&r.pop();var i=r.map((function(t){var r=t.shift(),i=n[r.toLowerCase()];return e.extend({command:r},i.reduce((function(e,n,r){return e[n]=+t[r],e}),{}))})),a=[this.pos,0];return Array.prototype.push.apply(a,i),Array.prototype.splice.apply(this.pathElements,a),this.pos+=i.length,this},stringify:function(){var t=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(e,r){var i=n[r.command.toLowerCase()].map(function(e){return this.options.accuracy?Math.round(r[e]*t)/t:r[e]}.bind(this));return e+r.command+i.join(",")}.bind(this),"")+(this.close?"Z":"")},clone:function(t){var n=new e.Svg.Path(t||this.close);return n.pos=this.pos,n.pathElements=this.pathElements.slice().map((function(t){return e.extend({},t)})),n.options=e.extend({},this.options),n},splitByCommand:function(t){var n=[new e.Svg.Path];return this.pathElements.forEach((function(r){r.command===t.toUpperCase()&&0!==n[n.length-1].pathElements.length&&n.push(new e.Svg.Path),n[n.length-1].pathElements.push(r)})),n}}),e.Svg.Path.elementDescriptions=n,e.Svg.Path.join=function(t,n,r){for(var i=new e.Svg.Path(n,r),a=0;a<t.length;a++)for(var o=t[a],s=0;s<o.pathElements.length;s++)i.pathElements.push(o.pathElements[s]);return i}}(0,t),function(t,e){"use strict";t.window,t.document;var n={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};e.Axis=e.Class.extend({constructor:function(t,e,r,i){this.units=t,this.counterUnits=t===n.x?n.y:n.x,this.chartRect=e,this.axisLength=e[t.rectEnd]-e[t.rectStart],this.gridOffset=e[t.rectOffset],this.ticks=r,this.options=i},createGridAndLabels:function(t,n,r,i,a){var o=i["axis"+this.units.pos.toUpperCase()],s=this.ticks.map(this.projectValue.bind(this)),l=this.ticks.map(o.labelInterpolationFnc);s.forEach(function(u,c){var h,f={x:0,y:0};h=s[c+1]?s[c+1]-u:Math.max(this.axisLength-u,30),e.isFalseyButZero(l[c])&&""!==l[c]||("x"===this.units.pos?(u=this.chartRect.x1+u,f.x=i.axisX.labelOffset.x,"start"===i.axisX.position?f.y=this.chartRect.padding.top+i.axisX.labelOffset.y+(r?5:20):f.y=this.chartRect.y1+i.axisX.labelOffset.y+(r?5:20)):(u=this.chartRect.y1-u,f.y=i.axisY.labelOffset.y-(r?h:0),"start"===i.axisY.position?f.x=r?this.chartRect.padding.left+i.axisY.labelOffset.x:this.chartRect.x1-10:f.x=this.chartRect.x2+i.axisY.labelOffset.x+10),o.showGrid&&e.createGrid(u,c,this,this.gridOffset,this.chartRect[this.counterUnits.len](),t,[i.classNames.grid,i.classNames[this.units.dir]],a),o.showLabel&&e.createLabel(u,h,c,l,this,o.offset,f,n,[i.classNames.label,i.classNames[this.units.dir],"start"===o.position?i.classNames[o.position]:i.classNames.end],r,a))}.bind(this))},projectValue:function(t,e,n){throw new Error("Base axis can't be instantiated!")}}),e.Axis.units=n}(this||n,t),function(t,e){"use strict";t.window,t.document,e.AutoScaleAxis=e.Axis.extend({constructor:function(t,n,r,i){var a=i.highLow||e.getHighLow(n,i,t.pos);this.bounds=e.getBounds(r[t.rectEnd]-r[t.rectStart],a,i.scaleMinSpace||20,i.onlyInteger),this.range={min:this.bounds.min,max:this.bounds.max},e.AutoScaleAxis.super.constructor.call(this,t,r,this.bounds.values,i)},projectValue:function(t){return this.axisLength*(+e.getMultiValue(t,this.units.pos)-this.bounds.min)/this.bounds.range}})}(this||n,t),function(t,e){"use strict";t.window,t.document,e.FixedScaleAxis=e.Axis.extend({constructor:function(t,n,r,i){var a=i.highLow||e.getHighLow(n,i,t.pos);this.divisor=i.divisor||1,this.ticks=i.ticks||e.times(this.divisor).map(function(t,e){return a.low+(a.high-a.low)/this.divisor*e}.bind(this)),this.ticks.sort((function(t,e){return t-e})),this.range={min:a.low,max:a.high},e.FixedScaleAxis.super.constructor.call(this,t,r,this.ticks,i),this.stepLength=this.axisLength/this.divisor},projectValue:function(t){return this.axisLength*(+e.getMultiValue(t,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}})}(this||n,t),function(t,e){"use strict";t.window,t.document,e.StepAxis=e.Axis.extend({constructor:function(t,n,r,i){e.StepAxis.super.constructor.call(this,t,r,i.ticks,i);var a=Math.max(1,i.ticks.length-(i.stretch?1:0));this.stepLength=this.axisLength/a},projectValue:function(t,e){return this.stepLength*e}})}(this||n,t),function(t,e){"use strict";t.window,t.document;var n={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};e.Line=e.Base.extend({constructor:function(t,r,i,a){e.Line.super.constructor.call(this,t,r,n,e.extend({},n,i),a)},createChart:function(t){var r=e.normalizeData(this.data,t.reverseData,!0);this.svg=e.createSvg(this.container,t.width,t.height,t.classNames.chart);var i,a,o=this.svg.elem("g").addClass(t.classNames.gridGroup),s=this.svg.elem("g"),l=this.svg.elem("g").addClass(t.classNames.labelGroup),u=e.createChartRect(this.svg,t,n.padding);i=void 0===t.axisX.type?new e.StepAxis(e.Axis.units.x,r.normalized.series,u,e.extend({},t.axisX,{ticks:r.normalized.labels,stretch:t.fullWidth})):t.axisX.type.call(e,e.Axis.units.x,r.normalized.series,u,t.axisX),a=void 0===t.axisY.type?new e.AutoScaleAxis(e.Axis.units.y,r.normalized.series,u,e.extend({},t.axisY,{high:e.isNumeric(t.high)?t.high:t.axisY.high,low:e.isNumeric(t.low)?t.low:t.axisY.low})):t.axisY.type.call(e,e.Axis.units.y,r.normalized.series,u,t.axisY),i.createGridAndLabels(o,l,this.supportsForeignObject,t,this.eventEmitter),a.createGridAndLabels(o,l,this.supportsForeignObject,t,this.eventEmitter),t.showGridBackground&&e.createGridBackground(o,u,t.classNames.gridBackground,this.eventEmitter),r.raw.series.forEach(function(n,o){var l=s.elem("g");l.attr({"ct:series-name":n.name,"ct:meta":e.serialize(n.meta)}),l.addClass([t.classNames.series,n.className||t.classNames.series+"-"+e.alphaNumerate(o)].join(" "));var c=[],h=[];r.normalized.series[o].forEach(function(t,s){var l={x:u.x1+i.projectValue(t,s,r.normalized.series[o]),y:u.y1-a.projectValue(t,s,r.normalized.series[o])};c.push(l.x,l.y),h.push({value:t,valueIndex:s,meta:e.getMetaData(n,s)})}.bind(this));var f={lineSmooth:e.getSeriesOption(n,t,"lineSmooth"),showPoint:e.getSeriesOption(n,t,"showPoint"),showLine:e.getSeriesOption(n,t,"showLine"),showArea:e.getSeriesOption(n,t,"showArea"),areaBase:e.getSeriesOption(n,t,"areaBase")},d=("function"==typeof f.lineSmooth?f.lineSmooth:f.lineSmooth?e.Interpolation.monotoneCubic():e.Interpolation.none())(c,h);if(f.showPoint&&d.pathElements.forEach(function(r){var s=l.elem("line",{x1:r.x,y1:r.y,x2:r.x+.01,y2:r.y},t.classNames.point).attr({"ct:value":[r.data.value.x,r.data.value.y].filter(e.isNumeric).join(","),"ct:meta":e.serialize(r.data.meta)});this.eventEmitter.emit("draw",{type:"point",value:r.data.value,index:r.data.valueIndex,meta:r.data.meta,series:n,seriesIndex:o,axisX:i,axisY:a,group:l,element:s,x:r.x,y:r.y})}.bind(this)),f.showLine){var p=l.elem("path",{d:d.stringify()},t.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:r.normalized.series[o],path:d.clone(),chartRect:u,index:o,series:n,seriesIndex:o,seriesMeta:n.meta,axisX:i,axisY:a,group:l,element:p})}if(f.showArea&&a.range){var v=Math.max(Math.min(f.areaBase,a.range.max),a.range.min),g=u.y1-a.projectValue(v);d.splitByCommand("M").filter((function(t){return t.pathElements.length>1})).map((function(t){var e=t.pathElements[0],n=t.pathElements[t.pathElements.length-1];return t.clone(!0).position(0).remove(1).move(e.x,g).line(e.x,e.y).position(t.pathElements.length+1).line(n.x,g)})).forEach(function(e){var s=l.elem("path",{d:e.stringify()},t.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:r.normalized.series[o],path:e.clone(),series:n,seriesIndex:o,axisX:i,axisY:a,chartRect:u,index:o,group:l,element:s})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:a.bounds,chartRect:u,axisX:i,axisY:a,svg:this.svg,options:t})}})}(this||n,t),function(t,e){"use strict";t.window,t.document;var n={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};e.Bar=e.Base.extend({constructor:function(t,r,i,a){e.Bar.super.constructor.call(this,t,r,n,e.extend({},n,i),a)},createChart:function(t){var r,i;t.distributeSeries?(r=e.normalizeData(this.data,t.reverseData,t.horizontalBars?"x":"y")).normalized.series=r.normalized.series.map((function(t){return[t]})):r=e.normalizeData(this.data,t.reverseData,t.horizontalBars?"x":"y"),this.svg=e.createSvg(this.container,t.width,t.height,t.classNames.chart+(t.horizontalBars?" "+t.classNames.horizontalBars:""));var a=this.svg.elem("g").addClass(t.classNames.gridGroup),o=this.svg.elem("g"),s=this.svg.elem("g").addClass(t.classNames.labelGroup);if(t.stackBars&&0!==r.normalized.series.length){var l=e.serialMap(r.normalized.series,(function(){return Array.prototype.slice.call(arguments).map((function(t){return t})).reduce((function(t,e){return{x:t.x+(e&&e.x)||0,y:t.y+(e&&e.y)||0}}),{x:0,y:0})}));i=e.getHighLow([l],t,t.horizontalBars?"x":"y")}else i=e.getHighLow(r.normalized.series,t,t.horizontalBars?"x":"y");i.high=+t.high||(0===t.high?0:i.high),i.low=+t.low||(0===t.low?0:i.low);var u,c,h,f,d,p=e.createChartRect(this.svg,t,n.padding);c=t.distributeSeries&&t.stackBars?r.normalized.labels.slice(0,1):r.normalized.labels,t.horizontalBars?(u=f=void 0===t.axisX.type?new e.AutoScaleAxis(e.Axis.units.x,r.normalized.series,p,e.extend({},t.axisX,{highLow:i,referenceValue:0})):t.axisX.type.call(e,e.Axis.units.x,r.normalized.series,p,e.extend({},t.axisX,{highLow:i,referenceValue:0})),h=d=void 0===t.axisY.type?new e.StepAxis(e.Axis.units.y,r.normalized.series,p,{ticks:c}):t.axisY.type.call(e,e.Axis.units.y,r.normalized.series,p,t.axisY)):(h=f=void 0===t.axisX.type?new e.StepAxis(e.Axis.units.x,r.normalized.series,p,{ticks:c}):t.axisX.type.call(e,e.Axis.units.x,r.normalized.series,p,t.axisX),u=d=void 0===t.axisY.type?new e.AutoScaleAxis(e.Axis.units.y,r.normalized.series,p,e.extend({},t.axisY,{highLow:i,referenceValue:0})):t.axisY.type.call(e,e.Axis.units.y,r.normalized.series,p,e.extend({},t.axisY,{highLow:i,referenceValue:0})));var v=t.horizontalBars?p.x1+u.projectValue(0):p.y1-u.projectValue(0),g=[];h.createGridAndLabels(a,s,this.supportsForeignObject,t,this.eventEmitter),u.createGridAndLabels(a,s,this.supportsForeignObject,t,this.eventEmitter),t.showGridBackground&&e.createGridBackground(a,p,t.classNames.gridBackground,this.eventEmitter),r.raw.series.forEach(function(n,i){var a,s,l=i-(r.raw.series.length-1)/2;a=t.distributeSeries&&!t.stackBars?h.axisLength/r.normalized.series.length/2:t.distributeSeries&&t.stackBars?h.axisLength/2:h.axisLength/r.normalized.series[i].length/2,(s=o.elem("g")).attr({"ct:series-name":n.name,"ct:meta":e.serialize(n.meta)}),s.addClass([t.classNames.series,n.className||t.classNames.series+"-"+e.alphaNumerate(i)].join(" ")),r.normalized.series[i].forEach(function(o,c){var y,m,b,_;if(_=t.distributeSeries&&!t.stackBars?i:t.distributeSeries&&t.stackBars?0:c,y=t.horizontalBars?{x:p.x1+u.projectValue(o&&o.x?o.x:0,c,r.normalized.series[i]),y:p.y1-h.projectValue(o&&o.y?o.y:0,_,r.normalized.series[i])}:{x:p.x1+h.projectValue(o&&o.x?o.x:0,_,r.normalized.series[i]),y:p.y1-u.projectValue(o&&o.y?o.y:0,c,r.normalized.series[i])},h instanceof e.StepAxis&&(h.options.stretch||(y[h.units.pos]+=a*(t.horizontalBars?-1:1)),y[h.units.pos]+=t.stackBars||t.distributeSeries?0:l*t.seriesBarDistance*(t.horizontalBars?-1:1)),b=g[c]||v,g[c]=b-(v-y[h.counterUnits.pos]),void 0!==o){var w={};w[h.units.pos+"1"]=y[h.units.pos],w[h.units.pos+"2"]=y[h.units.pos],!t.stackBars||"accumulate"!==t.stackMode&&t.stackMode?(w[h.counterUnits.pos+"1"]=v,w[h.counterUnits.pos+"2"]=y[h.counterUnits.pos]):(w[h.counterUnits.pos+"1"]=b,w[h.counterUnits.pos+"2"]=g[c]),w.x1=Math.min(Math.max(w.x1,p.x1),p.x2),w.x2=Math.min(Math.max(w.x2,p.x1),p.x2),w.y1=Math.min(Math.max(w.y1,p.y2),p.y1),w.y2=Math.min(Math.max(w.y2,p.y2),p.y1);var x=e.getMetaData(n,c);m=s.elem("line",w,t.classNames.bar).attr({"ct:value":[o.x,o.y].filter(e.isNumeric).join(","),"ct:meta":e.serialize(x)}),this.eventEmitter.emit("draw",e.extend({type:"bar",value:o,index:c,meta:x,series:n,seriesIndex:i,axisX:f,axisY:d,chartRect:p,group:s,element:m},w))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:u.bounds,chartRect:p,axisX:f,axisY:d,svg:this.svg,options:t})}})}(this||n,t),function(t,e){"use strict";t.window,t.document;var n={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",sliceDonutSolid:"ct-slice-donut-solid",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutSolid:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:e.noop,labelDirection:"neutral",reverseData:!1,ignoreEmptyValues:!1};function r(t,e,n){var r=e.x>t.x;return r&&"explode"===n||!r&&"implode"===n?"start":r&&"implode"===n||!r&&"explode"===n?"end":"middle"}e.Pie=e.Base.extend({constructor:function(t,r,i,a){e.Pie.super.constructor.call(this,t,r,n,e.extend({},n,i),a)},createChart:function(t){var i,a,o,s,l,u=e.normalizeData(this.data),c=[],h=t.startAngle;this.svg=e.createSvg(this.container,t.width,t.height,t.donut?t.classNames.chartDonut:t.classNames.chartPie),a=e.createChartRect(this.svg,t,n.padding),o=Math.min(a.width()/2,a.height()/2),l=t.total||u.normalized.series.reduce((function(t,e){return t+e}),0);var f=e.quantity(t.donutWidth);"%"===f.unit&&(f.value*=o/100),o-=t.donut&&!t.donutSolid?f.value/2:0,s="outside"===t.labelPosition||t.donut&&!t.donutSolid?o:"center"===t.labelPosition?0:t.donutSolid?o-f.value/2:o/2,s+=t.labelOffset;var d={x:a.x1+a.width()/2,y:a.y2+a.height()/2},p=1===u.raw.series.filter((function(t){return t.hasOwnProperty("value")?0!==t.value:0!==t})).length;u.raw.series.forEach(function(t,e){c[e]=this.svg.elem("g",null,null)}.bind(this)),t.showLabel&&(i=this.svg.elem("g",null,null)),u.raw.series.forEach(function(n,a){if(0!==u.normalized.series[a]||!t.ignoreEmptyValues){c[a].attr({"ct:series-name":n.name}),c[a].addClass([t.classNames.series,n.className||t.classNames.series+"-"+e.alphaNumerate(a)].join(" "));var v=l>0?h+u.normalized.series[a]/l*360:0,g=Math.max(0,h-(0===a||p?0:.2));v-g>=359.99&&(v=g+359.99);var y,m,b,_=e.polarToCartesian(d.x,d.y,o,g),w=e.polarToCartesian(d.x,d.y,o,v),x=new e.Svg.Path(!t.donut||t.donutSolid).move(w.x,w.y).arc(o,o,0,v-h>180,0,_.x,_.y);t.donut?t.donutSolid&&(b=o-f.value,y=e.polarToCartesian(d.x,d.y,b,h-(0===a||p?0:.2)),m=e.polarToCartesian(d.x,d.y,b,v),x.line(y.x,y.y),x.arc(b,b,0,v-h>180,1,m.x,m.y)):x.line(d.x,d.y);var k=t.classNames.slicePie;t.donut&&(k=t.classNames.sliceDonut,t.donutSolid&&(k=t.classNames.sliceDonutSolid));var E=c[a].elem("path",{d:x.stringify()},k);if(E.attr({"ct:value":u.normalized.series[a],"ct:meta":e.serialize(n.meta)}),t.donut&&!t.donutSolid&&(E._node.style.strokeWidth=f.value+"px"),this.eventEmitter.emit("draw",{type:"slice",value:u.normalized.series[a],totalDataSum:l,index:a,meta:n.meta,series:n,group:c[a],element:E,path:x.clone(),center:d,radius:o,startAngle:h,endAngle:v}),t.showLabel){var O,S;O=1===u.raw.series.length?{x:d.x,y:d.y}:e.polarToCartesian(d.x,d.y,s,h+(v-h)/2),S=u.normalized.labels&&!e.isFalseyButZero(u.normalized.labels[a])?u.normalized.labels[a]:u.normalized.series[a];var T=t.labelInterpolationFnc(S,a);if(T||0===T){var L=i.elem("text",{dx:O.x,dy:O.y,"text-anchor":r(d,O,t.labelDirection)},t.classNames.label).text(""+T);this.eventEmitter.emit("draw",{type:"label",index:a,group:i,element:L,text:""+T,x:O.x,y:O.y})}}h=v}}.bind(this)),this.eventEmitter.emit("created",{chartRect:a,svg:this.svg,options:t})},determineAnchorPosition:r})}(this||n,t),t}()}.apply(e,[]))||(t.exports=r)}).call(this,n(14))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));let r=(t=21)=>{let e="",n=t;for(;n--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__11__},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__12__},function(t,e,n){var r=n(18);t.exports=function(t,e,n){var i={},a="SAFE_EVAL_"+Math.floor(1e6*Math.random());i[a]={};return t="\n    (function(){\n      Function = undefined;\n      const keys = Object.getOwnPropertyNames(this).concat(['constructor']);\n      keys.forEach((key) => {\n        const item = this[key];\n        if(!item || typeof item.constructor !== 'function') return;\n        this[key].constructor = undefined;\n      });\n    })();\n  "+a+"="+t,e&&Object.keys(e).forEach((function(t){i[t]=e[t]})),r.runInNewContext(t,i,n),i[a]}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__15__},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__16__},function(t,e){},function(module,exports){var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,n){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(t){return function(t,e,n){t[e]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var n=e.contentWindow,r=n.eval,i=n.execScript;!r&&i&&(i.call(n,"null"),r=n.eval),forEach(Object_keys(t),(function(e){n[e]=t[e]})),forEach(globals,(function(e){t[e]&&(n[e]=t[e])}));var a=Object_keys(n),o=r.call(n,this.code);return forEach(Object_keys(n),(function(e){(e in t||-1===indexOf(a,e))&&(t[e]=n[e])})),forEach(globals,(function(e){e in t||defineProp(t,e,n[e])})),document.body.removeChild(e),o},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),n=this.runInContext(e);return t&&forEach(Object_keys(e),(function(n){t[n]=e[n]})),n},forEach(Object_keys(Script.prototype),(function(t){exports[t]=Script[t]=function(e){var n=Script(e);return n[t].apply(n,[].slice.call(arguments,1))}})),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),(function(n){e[n]=t[n]})),e}},function(t){t.exports=JSON.parse('{"type":"panel","name":"FlowCharting","id":"flowcharting","info":{"description":"Flowcharting is a Grafana plugin. Use it to display complexe diagrams using the online graphing library draw.io like a vsio","author":{"name":"AKMind Team","url":"https://github.com/algenty/grafana-flowcharting"},"keywords":["flowchart","panel","diagram","workflow","floorplan","map","organigram","draw.io","visio","mxgraph"],"links":[{"name":"Project site","url":"https://github.com/algenty/grafana-flowcharting"},{"name":"Documentation","url":"https://algenty.github.io/flowcharting-repository/"},{"name":"Demonstration","url":"https://play.grafana.org/d/Unu5JcjWk/flowcharting-index?orgId=1"},{"name":"Apache License","url":"https://github.com/algenty/grafana-flowcharting/blob/master/LICENSE"}],"version":"1.0.0d","updated":"2022-04-24","logos":{"small":"img/agenty-flowcharting.svg","large":"img/agenty-flowcharting.svg"}},"dependencies":{"grafanaVersion":"7.x.x","plugins":[]}}')},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){"use strict";i=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),o=new O(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var g={};u(g,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&n.call(m,o)&&(g=m);var b=v.prototype=d.prototype=Object.create(g);function _(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var i;this._invoke=function(a,o){function s(){return new e((function(i,s){!function i(a,o,s,l){var u=h(t[a],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==r(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,s,l)}),(function(t){i("throw",t,s,l)})):e.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return i("throw",t,s,l)}))}l(u.arg)}(a,o,i,s)}))}return i=i?i.then(s,s):s()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),u(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},_(b),u(b,l,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function a(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){a(o,r,i,s,l,"next",t)}function l(t){a(o,r,i,s,l,"throw",t)}s(void 0)}))}}var s=n(8),l=n(21),u=n(13);t.exports={stringToBytes:function(t){for(var e=new Array(t.length),n=0;n<t.length;n+=1)e[n]=t.charCodeAt(n);return e},bytesToString:function(t){for(var e="",n=0;n<t.length;n+=1)e+=String.fromCharCode(t[n]);return e},encode:function(t,e,n,r){var i=t;if(e)try{i=encodeURIComponent(i)}catch(t){return}if(n&&i.length>0)try{i=this.bytesToString(s.deflateRaw(i))}catch(t){return}if(r)try{i=btoa(i)}catch(t){return}return i},removeLinebreaks:function(t){return t.replace(/(\r\n|\n|\r)/gm,"")},isencoded:function(t){try{var e=this.parseXml(t).documentElement;if(null==e||"mxfile"!==e.nodeName)return-1===t.indexOf("mxGraphModel");if(e.getElementsByTagName("diagram").length>0)return!0}catch(t){return!0}return!1},decode:function(t,e,n,r){try{var i=this.parseXml(t).documentElement;if(null!=i&&"mxfile"===i.nodeName){var a=i.getElementsByTagName("diagram");a.length>0&&(t=this.getTextContent(a[0]))}}catch(t){}return r&&(t=atob(t)),n&&t.length>0&&(t=this.bytesToString(s.inflateRaw(t))),e&&(t=decodeURIComponent(t)),t},parseXml:function(t){if(window.DOMParser)return(new DOMParser).parseFromString(t,"text/xml");var e=this.createXmlDocument();return e.async="false",e.loadXML(t),e},createXmlDocument:function(){var t=null;return document.implementation&&document.implementation.createDocument?t=document.implementation.createDocument("","",null):window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLDOM")),t},decodeFromUri:function(t){try{t=decodeURIComponent(t)}catch(t){return}return t},getTextContent:function(t){return null!=t?t[void 0===t.textContent?"text":"textContent"]:""},normalizeXml:function(t){try{var e=t;return e=(e=e.replace(/>\s*/g,">")).replace(/\s*</g,"<"),t}catch(t){return}},sleep:function(t,e){return o(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(t){return new Promise((function(e){return setTimeout(e,t)}))},e.next=3,n(t);case 3:case 4:case"end":return e.stop()}}),e)})))()},uniqueID:function(){function t(){return Math.random().toString(16).slice(-4)}return"".concat(t()+t(),"-").concat(t(),"-").concat(t(),"-").concat(t(),"-").concat(t()).concat(t()).concat(t())},stringToJsRegex:function(t){if("/"!==t[0])return new RegExp("^".concat(t,"$"));var e=t.match(new RegExp("^/(.*?)/(g?i?m?y?)$"));return new RegExp(e[1],e[2])},matchString:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==t||null==e||0===t.length||0===e.length)return!1;if(t===e)return!0;if(n){var r=this.stringToJsRegex(e);return t.toString().match(r)}return!1},minify:function(t){try{return l.xmlmin(t,!1)}catch(e){return this.log(3,"Error in minify",e),t}},prettify:function(t){try{return l.xml(t)}catch(e){return this.log(3,"Error in prettify",e),t}},prettifyJSON:function(t){try{return l.json(t)}catch(e){return this.log(3,"Error in prettify",e),t}},addScript:function(t){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src",t);var n=document.getElementsByTagName("script")[0];null!=n&&n.parentNode.insertBefore(e,n)},loadJS:function(t){try{var e=this.loadFile(t);e&&this.evalRaw(e)}catch(t){window.console}},loadFile:function(t){try{var e=mxUtils.load(t);if(null!=e&&e.getStatus()>=200&&e.getStatus()<=299)return e.getText()}catch(t){window.console}},$loadFile:function(t){var e;return $.ajax({type:"GET",url:t,async:!1,success:function(t){e=t},error:function(t){}}),e},$evalFile:function(t){$.ajax({type:"GET",url:t,async:!1,success:function(t){eval.call(window,t)},error:function(t){}})},evalRaw:function(t){try{eval.call(window,t)}catch(t){window.console}},evalIt:function(t){var e=t;try{e=u(t)}catch(n){e=t}return e},getfileContent:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){(function(){var e=o(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:e.sent;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}))}},function(t,e){function n(t){var e="    ";if(isNaN(parseInt(t)))e=t;else switch(t){case 1:e=" ";break;case 2:e="  ";break;case 3:e="   ";break;case 4:e="    ";break;case 5:e="     ";break;case 6:e="      ";break;case 7:e="       ";break;case 8:e="        ";break;case 9:e="         ";break;case 10:e="          ";break;case 11:e="           ";break;case 12:e="            "}for(var n=["\n"],r=0;r<100;r++)n.push(n[r]+e);return n}function r(){this.step="    ",this.shift=n(this.step)}function i(t,e){return e-(t.replace(/\(/g,"").length-t.replace(/\)/g,"").length)}function a(t,e){return t.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+e+e+"AND ").replace(/ BETWEEN /gi,"~::~"+e+"BETWEEN ").replace(/ CASE /gi,"~::~"+e+"CASE ").replace(/ ELSE /gi,"~::~"+e+"ELSE ").replace(/ END /gi,"~::~"+e+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+e+"ON ").replace(/ OR /gi,"~::~"+e+e+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+e+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+e).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+e+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}r.prototype.xml=function(t,e){var r=t.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),i=r.length,a=!1,o=0,s="",l=0,u=e?n(e):this.shift;for(l=0;l<i;l++)r[l].search(/<!/)>-1?(s+=u[o]+r[l],a=!0,(r[l].search(/-->/)>-1||r[l].search(/\]>/)>-1||r[l].search(/!DOCTYPE/)>-1)&&(a=!1)):r[l].search(/-->/)>-1||r[l].search(/\]>/)>-1?(s+=r[l],a=!1):/^<\w/.exec(r[l-1])&&/^<\/\w/.exec(r[l])&&/^<[\w:\-\.\,]+/.exec(r[l-1])==/^<\/[\w:\-\.\,]+/.exec(r[l])[0].replace("/","")?(s+=r[l],a||o--):r[l].search(/<\w/)>-1&&-1==r[l].search(/<\//)&&-1==r[l].search(/\/>/)?s=s+=a?r[l]:u[o++]+r[l]:r[l].search(/<\w/)>-1&&r[l].search(/<\//)>-1?s=s+=a?r[l]:u[o]+r[l]:r[l].search(/<\//)>-1?s=s+=a?r[l]:u[--o]+r[l]:r[l].search(/\/>/)>-1?s=s+=a?r[l]:u[o]+r[l]:r[l].search(/<\?/)>-1||r[l].search(/xmlns\:/)>-1||r[l].search(/xmlns\=/)>-1?s+=u[o]+r[l]:s+=r[l];return"\n"==s[0]?s.slice(1):s},r.prototype.json=function(t,e){e=e||this.step;return"undefined"==typeof JSON?t:"string"==typeof t?JSON.stringify(JSON.parse(t),null,e):"object"==typeof t?JSON.stringify(t,null,e):t},r.prototype.css=function(t,e){var r=t.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),i=r.length,a=0,o="",s=0,l=e?n(e):this.shift;for(s=0;s<i;s++)/\{/.exec(r[s])?o+=l[a++]+r[s]:/\}/.exec(r[s])?o+=l[--a]+r[s]:(/\*\\/.exec(r[s]),o+=l[a]+r[s]);return o.replace(/^\n{1,}/,"")},r.prototype.sql=function(t,e){var r=t.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),o=r.length,s=[],l=0,u=this.step,c=0,h="",f=0,d=e?n(e):this.shift;for(f=0;f<o;f++)s=f%2?s.concat(r[f]):s.concat(a(r[f],u));for(o=s.length,f=0;f<o;f++){c=i(s[f],c),/\s{0,}\s{0,}SELECT\s{0,}/.exec(s[f])&&(s[f]=s[f].replace(/\,/g,",\n"+u+u)),/\s{0,}\s{0,}SET\s{0,}/.exec(s[f])&&(s[f]=s[f].replace(/\,/g,",\n"+u+u)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(s[f])?h+=d[++l]+s[f]:/\'/.exec(s[f])?(c<1&&l&&l--,h+=s[f]):(h+=d[l]+s[f],c<1&&l&&l--)}return h=h.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},r.prototype.xmlmin=function(t,e){return(e?t:t.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},r.prototype.jsonmin=function(t){return"undefined"==typeof JSON?t:JSON.stringify(JSON.parse(t),null,0)},r.prototype.cssmin=function(t,e){return(e?t:t.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},r.prototype.sqlmin=function(t){return t.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},t.exports=new r},function(t,e){t.exports={executeLayout:function(t,e,n,r){if(t.isEnabled()){t.getModel().beginUpdate();try{e()}catch(t){throw t}finally{t.getModel().endUpdate(),null!=r&&r()}}},executeLayoutList:function(t,e,n){for(var r=t.getSelectionCells(),i=0;i<e.length;i++){var a=new window[e[i].layout](t);if(null!=e[i].config)for(var o in e[i].config)a[o]=e[i].config[o];this.executeLayout(t,(function(){a.execute(t.getDefaultParent(),0===r.length?null:r)}),i===e.length-1,n)}},csvToArray:function(t){if(!/^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*)*$/.test(t))return null;var e=[];return t.replace(/(?!\s*$)\s*(?:'([^'\\]*(?:\\[\S\s][^'\\]*)*)'|"([^"\\]*(?:\\[\S\s][^"\\]*)*)"|([^,'"\s\\]*(?:\s+[^,'"\s\\]+)*))\s*(?:,|$)/g,(function(t,n,r,i){return void 0!==n?e.push(n.replace(/\\'/g,"'")):void 0!==r?e.push(r.replace(/\\"/g,'"')):void 0!==i&&e.push(i),""})),/,\s*$/.test(t)&&e.push(""),e},importCsv:function(t,e){try{var n=e.split("\n"),r=[],i=[],a={};if(n.length>0){var o={},s=null,l=null,u=null,c=null,h=null,f=null,d=null,p=null,v="",g="auto",y="auto",m=null,b=null,_=40,w=40,x=100,k=0,E=(t.view,t.getGraphBounds(),function(){}),O=t.getFreeInsertPoint(),S=O.x,T=O.y,L=T,M=null,C="auto";p=null;for(var D=[],A=null,P=null,N=0;N<n.length&&"#"===n[N].charAt(0);){for(e=n[N],N++;N<n.length&&"\\"===e.charAt(e.length-1)&&"#"===n[N].charAt(0);)e=e.substring(0,e.length-1)+mxUtils.trim(n[N].substring(1)),N++;if("#"!==e.charAt(1)){var R=e.indexOf(":");if(R>0){var F=mxUtils.trim(e.substring(1,R)),I=mxUtils.trim(e.substring(R+1));"label"===F?M=t.sanitizeHtml(I):"labelname"===F&&I.length>0&&"-"!==I?c=I:"labels"===F&&I.length>0&&"-"!==I?h=JSON.parse(I):"style"===F?s=I:"parentstyle"===F?f=I:"stylename"===F&&I.length>0&&"-"!==I?u=I:"styles"===F&&I.length>0&&"-"!==I?l=JSON.parse(I):"identity"===F&&I.length>0&&"-"!==I?d=I:"parent"===F&&I.length>0&&"-"!==I?p=I:"namespace"===F&&I.length>0&&"-"!==I?v=I:"width"===F?g=I:"height"===F?y=I:"left"===F&&I.length>0?m=I:"top"===F&&I.length>0?b=I:"ignore"===F?P=I.split(","):"connect"===F?D.push(JSON.parse(I)):"link"===F?A=I:"padding"===F?k=parseFloat(I):"edgespacing"===F?_=parseFloat(I):"nodespacing"===F?w=parseFloat(I):"levelspacing"===F?x=parseFloat(I):"layout"===F&&(C=I)}}}if(null==n[N])throw new Error(mxResources.get("invalidOrMissingFile"));for(var j=this.csvToArray(n[N]),H=null,G=null,z=[],V=0;V<j.length;V++)d===j[V]&&(H=V),p===j[V]&&(G=V),z.push(mxUtils.trim(j[V]).replace(/[^a-z0-9]+/gi,"_").replace(/^\d+/,"").replace(/_+$/,""));if(null==M&&(M="%"+z[0]+"%"),null!=D)for(var U=0;U<D.length;U++)null==o[D[U].to]&&(o[D[U].to]={});for(var B=[],$=N+1;$<n.length;$++){var Y=this.csvToArray(n[$]);if(null==Y){var X=n[$].length>40?n[$].substring(0,40)+"...":n[$];throw new Error(X+" ("+$+"):\n"+mxResources.get("containsValidationErrors"))}Y.length>0&&B.push(Y)}t.model.beginUpdate();try{for(var W=0;W<B.length;W++){var Z=B[W],q=null,K=null!=H?v+Z[H]:null;null!=K&&(q=t.model.getCell(K));var J=null!=q,Q=new mxCell(M,new mxGeometry(S,L,0,0),s||"whiteSpace=wrap;html=1;");Q.vertex=!0,Q.id=K;for(var tt=0;tt<Z.length;tt++)t.setAttributeForCell(Q,z[tt],Z[tt]);if(null!=c&&null!=h){var et=h[Q.getAttribute(c)];null!=et&&t.labelChanged(Q,et)}if(null!=u&&null!=l){var nt=l[Q.getAttribute(u)];null!=nt&&(Q.style=nt)}if(t.setAttributeForCell(Q,"placeholders","1"),Q.style=t.replacePlaceholders(Q,Q.style),J&&(t.model.setGeometry(q,Q.geometry),t.model.setStyle(q,Q.style),mxUtils.indexOf(i,q)<0&&i.push(q)),q=Q,!J)for(var rt=0;rt<D.length;rt++)o[D[rt].to][q.getAttribute(D[rt].to)]=q;null!=A&&"link"!==A&&(t.setLinkForCell(q,q.getAttribute(A)),t.setAttributeForCell(q,A,null)),t.fireEvent(new mxEventObject("cellsInserted","cells",[q]));var it=t.getPreferredSizeForCell(q);q.vertex&&(null!=m&&null!=q.getAttribute(m)&&(q.geometry.x=S+parseFloat(q.getAttribute(m))),null!=b&&null!=q.getAttribute(b)&&(q.geometry.y=T+parseFloat(q.getAttribute(b))),"@"===g.charAt(0)&&null!=q.getAttribute(g.substring(1))?q.geometry.width=parseFloat(q.getAttribute(g.substring(1))):q.geometry.width="auto"===g?it.width+k:parseFloat(g),"@"===y.charAt(0)&&null!=q.getAttribute(y.substring(1))?q.geometry.height=parseFloat(q.getAttribute(y.substring(1))):q.geometry.height="auto"===y?it.height+k:parseFloat(y),L+=q.geometry.height+w),J?(null==a[K]&&(a[K]=[]),a[K].push(q)):(p=null!=G?t.model.getCell(v+Z[G]):null,r.push(q),null!=p?(p.style=t.replacePlaceholders(p,f),t.addCell(q,p)):i.push(t.addCell(q)))}for(var at=i.slice(),ot=i.slice(),st=0;st<D.length;st++)for(var lt=D[st],ut=0;ut<r.length;ut++){q=r[ut];var ct=mxUtils.bind(this,(function(e,n,r){var i=n.getAttribute(r.from);if(null!=i&&(t.setAttributeForCell(n,r.from,null),""!==i))for(var a=i.split(","),s=0;s<a.length;s++){var l=o[r.to][a[s]];if(null!=l){var u=r.label;null!=r.fromlabel&&(u=(n.getAttribute(r.fromlabel)||"")+(u||"")),null!=r.tolabel&&(u=(u||"")+(l.getAttribute(r.tolabel)||""));var c="target"===r.placeholders==!r.invert?l:e,h=null!=r.style?t.replacePlaceholders(c,r.style):t.createCurrentEdgeStyle();ot.push(t.insertEdge(null,null,u||"",r.invert?l:e,r.invert?e:l,h)),mxUtils.remove(r.invert?e:l,at)}}}));if(ct(q,q,lt),null!=a[q.id])for(var ht=0;ht<a[q.id].length;ht++)ct(q,a[q.id][ht],lt)}if(null!=P)for(var ft=0;ft<r.length;ft++){q=r[ft];for(var dt=0;dt<P.length;dt++)t.setAttributeForCell(q,mxUtils.trim(P[dt]),null)}if(i.length>0){var pt=new mxParallelEdgeLayout(t);pt.spacing=_;var vt=function(){pt.spacing>0&&pt.execute(t.getDefaultParent());for(var e=0;e<i.length;e++){var n=t.getCellGeometry(i[e]);n.x=Math.round(t.snap(n.x)),n.y=Math.round(t.snap(n.y)),"auto"===g&&(n.width=Math.round(t.snap(n.width))),"auto"===y&&(n.height=Math.round(t.snap(n.height)))}};if("["===C.charAt(0)){var gt=E;t.view.validate(),this.executeLayoutList(t,JSON.parse(C),(function(){vt(),gt()})),E=null}else if("circle"===C){var yt=new mxCircleLayout(t);yt.resetEdges=!1;var mt=yt.isVertexIgnored;yt.isVertexIgnored=function(t){return mt.apply(this,arguments)||mxUtils.indexOf(i,t)<0},this.executeLayout(t,(function(){yt.execute(t.getDefaultParent()),vt()}),!0,E),E=null}else if("horizontaltree"===C||"verticaltree"===C||"auto"===C&&ot.length===2*i.length-1&&1===at.length){t.view.validate();var bt=new mxCompactTreeLayout(t,"horizontaltree"===C);bt.levelDistance=w,bt.edgeRouting=!1,bt.resetEdges=!1,this.executeLayout(t,(function(){bt.execute(t.getDefaultParent(),at.length>0?at[0]:null)}),!0,E),E=null}else if("horizontalflow"===C||"verticalflow"===C||"auto"===C&&1===at.length){t.view.validate();var _t=new mxHierarchicalLayout(t,"horizontalflow"===C?mxConstants.DIRECTION_WEST:mxConstants.DIRECTION_NORTH);_t.intraCellSpacing=w,_t.parallelEdgeSpacing=_,_t.interRankCellSpacing=x,_t.disableEdgeStyle=!1,this.executeLayout(t,(function(){_t.execute(t.getDefaultParent(),ot),t.moveCells(ot,S,T)}),!0,E),E=null}else if("organic"===C||"auto"===C&&ot.length>i.length){t.view.validate();var wt=new mxFastOrganicLayout(t);wt.forceConstant=3*w,wt.resetEdges=!1;var xt=wt.isVertexIgnored;wt.isVertexIgnored=function(t){return xt.apply(this,arguments)||mxUtils.indexOf(i,t)<0},(pt=new mxParallelEdgeLayout(t)).spacing=_,this.executeLayout(t,(function(){wt.execute(t.getDefaultParent()),vt()}),!0,E),E=null}}}finally{t.model.endUpdate()}null!=E&&E()}}catch(U){}},anonymize:function(t){var e=document.createElement("div"),n=t.model,r=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t.charAt(r);"\n\t`~!@#$%^&*()_+{}|:\"<>?-=[];'./,\n\t".indexOf(i)>=0?n.push(i):isNaN(parseInt(i))?i.toLowerCase()!==i?n.push(String.fromCharCode(65+Math.round(25*Math.random()))):i.toUpperCase()!==i?n.push(String.fromCharCode(97+Math.round(25*Math.random()))):/\s/.test(i)?n.push(" "):n.push("?"):n.push(e?"0":Math.round(9*Math.random()))}return n.join("")},i=function(t){return e.innerHTML=t,function t(e){if(null!=e.nodeValue&&(e.nodeValue=r(e.nodeValue)),e.nodeType===mxConstants.NODETYPE_ELEMENT)for(var n=e.firstChild;null!=n;)t(n),n=n.nextSibling}(e),e.innerHTML};n.beginUpdate();try{var a=[];for(var o in n.cells){var s=n.cells[o],l=t.getLabel(s);l=t.isHtmlLabel(s)?i(l):r(l),a.push({cell:s,label:l})}for(var u=0;u<a.length;u++)n.setValue(a[u].cell,a[u].label)}finally{n.endUpdate()}},addExtFont:function(t,e,n){if(t&&e){var r="extFont_"+t;if(null===document.getElementById(r))if(0===e.indexOf(Editor.GOOGLE_FONTS))mxClient.link("stylesheet",e,null,r);else{document.getElementsByTagName("head")[0];var i=document.createElement("style");i.appendChild(document.createTextNode('@font-face {\n\tfont-family: "'+t+'";\n\tsrc: url("'+e+'");\n}')),i.setAttribute("id",r),document.getElementsByTagName("head")[0].appendChild(i)}if(!n){null==this.extFonts&&(this.extFonts=[]);for(var a=this.extFonts,o=!0,s=0;s<a.length;s++)if(a[s].name===t){o=!1;break}o&&this.extFonts.push({name:t,url:e})}}}}},function(t,e,n){"use strict";(function(t){var r=n(24),i=n(25),a=n(26);function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=f(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):f(t,e);if("Buffer"===e.type&&a(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=s(t,e<0?0:0|d(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return G(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return L(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var a,o=1,s=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,l/=2,n/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var c=-1;for(a=n;a<s;a++)if(u(t,a)===u(e,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){for(var h=!0,f=0;f<l;f++)if(u(t,a+f)!==u(e,f)){h=!1;break}if(h)return a}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function _(t,e,n,r){return V(G(e,t.length-n),t,n,r)}function w(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return w(t,e,n,r)}function k(t,e,n,r){return V(z(e),t,n,r)}function E(t,e,n,r){return V(function(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,l,u=t[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(a=t[i+1]))&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=t[i+1],o=t[i+2],128==(192&a)&&128==(192&o)&&(l=(15&u)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return u(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=l.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):v.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,r,i){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(a,o),u=this.slice(r,i),c=t.slice(e,n),h=0;h<s;++h)if(u[h]!==c[h]){a=u[h],o=c[h];break}return a<o?-1:o<a?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function L(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function M(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=H(t[a]);return i}function C(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function D(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function A(t,e,n,r,i,a){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function R(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,a){return a||R(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function I(t,e,n,r,a){return a||R(t,0,n,8),i.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var i=e-t;n=new l(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},l.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},l.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||A(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||A(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);A(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);A(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return I(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return I(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=l.isBuffer(t)?t:G(new l(t,r).toString()),s=o.length;for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function H(t){return t<16?"0"+t.toString(16):t.toString(16)}function G(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(14))},function(t,e,n){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=u(t),o=r[0],s=r[1],l=new a(function(t,e,n){return 3*(e+n)/4-n}(0,o,s)),c=0,h=s>0?o-4:o;for(n=0;n<h;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,l[c++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e);return l},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(c(t,o,o+16383>s?s:o+16383));1===i?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,a,o=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+t[e+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+t[e+h],h+=f,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=u}return(d?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(e*l-1)*Math.pow(2,i),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;t[n+d]=255&o,d+=p,o/=256,u-=8);t[n+d-p]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports={customize:function(){mxTooltipHandler.prototype.show=function(t,e,n){this.destroyed||null!=t&&0!==t.length&&(null==this.div&&this.init(),mxUtils.isNode(t)?(this.div.innerHTML="",this.div.appendChild(t)):this.div.innerHTML=t.replace(/\n/g,"<br>"),this.$div.place_tt(e+20,n),this.div.style.visibility="",mxUtils.fit(this.div))},mxTooltipHandler.prototype.init=function(){null!==this.div&&void 0!==this.div||(this.$div=$('<div class="graph-tooltip">'),this.div=this.$div[0],mxEvent.addGestureListeners(this.div,mxUtils.bind(this,(function(t){this.hideTooltip()}))))},mxTooltipHandler.prototype.hideTooltip=function(){null!=this.div&&(this.div.style.visibility="hidden",this.div.innerHTML="")},mxTooltipHandler.prototype.delay=200,Graph.prototype.getTooltipForCell=function(t){var e=!1,n=document.createElement("div");if(mxUtils.isNode(t.value)){var r=t.value.getAttribute("tooltip");if(null!=r){e=!0,null!=r&&this.isReplacePlaceholders(t)&&(r=this.replacePlaceholders(t,r));var i=document.createElement("div");i.className="tooltip-text",i.innerHTML=this.sanitizeHtml(r),n.appendChild(i)}}if(void 0!==t.gf){var a=t.gf.tooltip.tooltipHandler;if(t.gf.tooltip.enableTooltip)null!==a.getDiv(n)&&(e=!0)}return e?n:""},mxEvent.addMouseWheelListener=function(t,e){if(null!=t){var n=function(e){var n;null==e&&(e=window.event),n=mxClient.IS_FF?-e.detail/2:e.wheelDelta/120,0!==n&&t(e,0<n)};mxClient.IS_NS&&null==document.documentMode?mxEvent.addListener(mxClient.IS_GC&&null!=e?e:window,mxClient.IS_SF||mxClient.IS_GC?"mousewheel":"DOMMouseScroll",n):mxEvent.addListener(document,"mousewheel",n)}}}}},,,function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(7),a=n(2),o=n(0),s=n(4),l=n(11),u=n.n(l),c=n(15),h=n.n(c),f=n(12),d=n(16),p={formatValue:function(t,e,n){return u.a.valueFormats[e](t,n,null).toString()},getUnitFormats:function(){return u.a.getUnitFormats()},loadCss:function(){Object(i.loadPluginCss)({dark:"plugins/flowcharting/styles/dark.css",light:"plugins/flowcharting/styles/light.css"})},getTimeSeries:function(t){return new h.a({datapoints:t.datapoints||[],alias:t.target,unit:t.unit})},getFormatedDate:function(t,e){return Object(f.dateTime)(t).format(e)},appEvents:n.n(d).a,MetricsPanelCtrl:i.MetricsPanelCtrl,PanelEvents:f.PanelEvents},v=n(5),g=n.n(v);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(){m=function(t,e){return new n(t,void 0,e)};var t=RegExp.prototype,e=new WeakMap;function n(t,r,i){var a=new RegExp(t,r);return e.set(a,i||e.get(t)),_(a,n.prototype)}function r(t,n){var r=e.get(n);return Object.keys(r).reduce((function(e,n){return e[n]=t[r[n]],e}),Object.create(null))}return b(n,RegExp),n.prototype.exec=function(e){var n=t.exec.call(this,e);return n&&(n.groups=r(n,this)),n},n.prototype[Symbol.replace]=function(n,i){if("string"==typeof i){var a=e.get(this);return t[Symbol.replace].call(this,n,i.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+a[e]})))}if("function"==typeof i){var o=this;return t[Symbol.replace].call(this,n,(function(){var t=arguments;return"object"!=y(t[t.length-1])&&(t=[].slice.call(t)).push(r(t,o)),i.apply(this,t)}))}return t[Symbol.replace].call(this,n,i)},m.apply(this,arguments)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}function _(t,e){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=k(t);if(e){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function x(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(){E=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new O(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==e&&n.call(g,i)&&(p=g);var m=d.prototype=h.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==y(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=d,s(m,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},b(_.prototype),s(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new _(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},b(m),s(m,o,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var L=["threshold_initalized","threshold_changed","threshold_freed"],M=function(){function t(e,n,r,i,s){O(this,t),this._hidden=!1,this.validComp=[],this.type="unknown",this.reduce=!0,this.events=a.a.create(L),this.uid=o.a.genUid(this.constructor.name),this.data=i,this.data.value=r,this.data.color=e,this.data.comparator=n,s&&this.import(s),this._setType(),this.init()}return T(t,[{key:"init",value:function(){this._eventsConnect(),this.events.emit("threshold_initalized",this)}},{key:"change",value:function(){this.events.emit("threshold_changed",this)}},{key:"clear",value:function(){this.validComp=[]}},{key:"free",value:function(){return Object(r.a)(this,void 0,void 0,E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.clear(),this._eventsDisconnect(),t.next=4,this.events.emit("threshold_freed",this);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"value",get:function(){return this.data.value},set:function(t){("string"!=typeof t||t&&0!==t.length)&&this.data.value!==t&&(this.data.value=t,this.change())}},{key:"color",get:function(){return this.data.color},set:function(t){t&&0!==t.length&&this.data.color!==t&&(this.data.color=t,this.change())}},{key:"comparator",get:function(){return this.data.comparator},set:function(t){t&&0!==t.length&&this.data.comparator!==t&&(this.data.comparator=t,this.change())}},{key:"hidden",get:function(){return this._hidden},set:function(t){t!==this._hidden&&(this._hidden=t,this.change())}},{key:"_eventsConnect",value:function(){}},{key:"_eventsDisconnect",value:function(){}},{key:"import",value:function(t,e,n){return e&&n?this.data.color=n:(t.color?this.data.color=t.color:this.data.color="",t.comparator&&(this.data.comparator=t.comparator),t.value?this.data.value=t.value:this.data.value=void 0,t.level&&(this.data.comparator=t.level)),this}},{key:"isValidComp",value:function(t){return-1!==this.validComp.indexOf(t)}},{key:"isValidValue",value:function(){return!0}},{key:"getData",value:function(){return this.data}}]),t}(),C=function(t){b(n,t);var e=w(n);function n(){var t;return O(this,n),(t=e.apply(this,arguments)).validComp=["ge","gt"],t}return T(n,[{key:"_setType",value:function(){this.type="number"}},{key:"isValidValue",value:function(){return"number"==typeof this.data.value}},{key:"match",value:function(t){if(void 0===this.value)return!0;if(void 0===t)return!1;switch(this.comparator){case"ge":return t>=this.data.value;case"gt":return t>this.value;default:throw new Error("Unknown comparator: "+this.comparator)}}}],[{key:"getDefaultData",value:function(){return{color:"rgba(245, 54, 54, 0.9)",comparator:"ge",value:50,level:0}}}]),n}(M),D=function(t){b(n,t);var e=w(n);function n(){var t;return O(this,n),(t=e.apply(this,arguments)).type="string",t.validComp=["eq","ne"],t}return T(n,[{key:"_setType",value:function(){this.type="string"}},{key:"isValidValue",value:function(){try{new RegExp(this.value)}catch(t){return!1}return!0}},{key:"match",value:function(t){if(void 0===this.value)return!0;if(void 0===t)return!1;var e=o.a.matchString(t,this.value);switch(this.comparator){case"eq":return e;case"ne":return!e;default:throw new Error("Unknown comparator: "+this.comparator)}}}],[{key:"getDefaultData",value:function(){return{color:"rgba(245, 54, 54, 0.9)",comparator:"eq",value:"/.*/",level:0}}}]),n}(M),A=function(t){b(n,t);var e=w(n);function n(){var t;return O(this,n),(t=e.apply(this,arguments)).pattern=m(/^(\+|\x2D)?(\d+\.?\d*)(d|w|M|Q|y|h|m|s|ms)$/,{signe:1,number:2,precision:3}),t.matchs=[],t.isValidated=!1,t.isDate=!1,t.isPattern=!1,t.type="date",t.validComp=["eq","ne","ge","gt"],t}return T(n,[{key:"_setType",value:function(){this.type="date"}},{key:"isValidValue",value:function(){return this.testedValue===this.value&&this.isValidated?this.isValidated:(this.testedValue=this.value,this.isValidated=!1,this.isPattern=!1,this.isDate=!1,void 0===this.testedValue||null===this.testedValue||0===this.testedValue.toString().length?this.isValidated:g()(this.testedValue).isValid()?(this.date=g()(this.testedValue),this.isDate=!0,this.isValidated=!0,this.isValidated):!0===this.pattern.test(this.testedValue.toString())?(this.matchs=this.pattern.exec(this.testedValue.toString()),this.isValidated=!0,this.isPattern=!0,null!==this.matchs&&void 0!==this.matchs.groups&&void 0===this.matchs.groups.signe&&(this.matchs.groups.signe="+"),this.isValidated):this.isValidated)}},{key:"match",value:function(t){if(void 0===this.value)return!0;if(void 0===t)return!1;if(!this.isValidated&&!this.isValidValue())return!1;return this.isDate?this._matchDate(t):!!this.isPattern&&this._matchPattern(t)}},{key:"_matchDate",value:function(t){return n.compareDates(this.date,t,this.data.comparator,"d")}},{key:"_matchPattern",value:function(t){if(this.isValidated&&null!==this.matchs&&void 0!==this.matchs.groups){var e=g()(),r=this.matchs.groups.signe,i=parseFloat("".concat(this.matchs.groups.number)),a=void 0!==this.matchs.groups.precision?this.matchs.groups.precision:"d";return e="-"===r?g()(e).subtract(i,a):g()(e).add(i,a),n.compareDates(e,t,this.data.comparator,a)}return!1}}],[{key:"getDefaultData",value:function(){return{color:"rgba(245, 54, 54, 0.9)",comparator:"ge",value:"-1d",level:0}}},{key:"isValidDate",value:function(t){try{var e=g()(t),n=g()(t).isValid();return!(n&&e.year()<=1980)&&n}catch(t){return!1}}},{key:"compareDates",value:function(t,e,n,r){switch(n){case"eq":return g()(e).isSame(t,r);case"ne":return!g()(e).isSame(t,r);case"ge":return g()(e).isSame(t,r)||g()(e).isAfter(t,r);case"gt":return g()(e).isAfter(t,r);default:return!1}}}]),n}(M);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(){N=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==e&&n.call(g,i)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==P(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var F=["rule_initalized","rule_updated","rule_changed","rule_freed"],I=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initialized=!1,this.metrics=new Map,this.mapsObj={shapes:[],texts:[],links:[],events:[]},this.valueMaps=[],this.rangeMaps=[],this.numberTH=[],this.stringTH=[],this.dateTH=[],this.removeClick=2,this.states=new Map,this.shapeStates=new Map,this.textStates=new Map,this.linkStates=new Map,this.eventStates=new Map,this.highestLevel=-1,this.highestColor="",this.highestFormattedValue="",this.highestValue=void 0,this.execTimes=0,this.events=a.a.create(F),this.$gf=e,this.uid=o.a.genUid(this.constructor.name),this.data=r,this.data.pattern=n,i&&this._convert(i),this.init(),this.change()}var e,n,i;return e=t,i=[{key:"getDefaultData",value:function(){return{order:1,pattern:".*",unit:"short",type:"number",metricType:"serie",alias:"myRule",refId:"A",column:"Time",hidden:!1,aggregation:"current",decimals:2,reduce:!0,dateColumn:"Time",dateFormat:"YYYY-MM-DD HH:mm:ss",numberTHData:[],stringTHData:[],dateTHData:[],invert:!1,gradient:!1,overlayIcon:!1,tooltip:!1,tooltipLabel:"",tooltipColors:!1,tooltipOn:"a",tpDirection:"v",tpMetadata:!1,tpGraph:!1,tpGraphSize:"100%",tpGraphType:"line",tpGraphLow:null,tpGraphHigh:null,tpGraphScale:"linear",mapsDat:{shapes:{options:t.getDefaultMapOptions(),dataList:[]},texts:{options:t.getDefaultMapOptions(),dataList:[]},links:{options:t.getDefaultMapOptions(),dataList:[]},events:{options:t.getDefaultMapOptions(),dataList:[]}},mappingType:1,valueData:[],rangeData:[],sanitize:!1,newRule:!0}}},{key:"getDefaultMapOptions",value:function(){return{identByProp:"id",metadata:"",enableRegEx:!0}}}],(n=[{key:"update",value:function(){return this.initCycle(),this.events.emit("rule_updated",this),this}},{key:"init",value:function(){return this._eventsConnect(),this.events.emit("rule_initalized",this),this}},{key:"_eventsConnect",value:function(){var t,e,n,r;return null===(e=null===(t=this.$gf)||void 0===t?void 0:t.metricHandler)||void 0===e||e.events.connect("metric_created",this,this._on_metricHandler_metric_created.bind(this)),null===(r=null===(n=this.$gf)||void 0===n?void 0:n.metricHandler)||void 0===r||r.events.connect("metric_deleted",this,this._on_metricHandler_metric_deleted.bind(this)),this}},{key:"_eventsDisconnect",value:function(){var t,e,n,i,a=this;return null===(e=null===(t=this.$gf)||void 0===t?void 0:t.metricHandler)||void 0===e||e.events.connect("metric_created",this,this._on_metricHandler_metric_created.bind(this)),null===(i=null===(n=this.$gf)||void 0===n?void 0:n.metricHandler)||void 0===i||i.events.connect("metric_deleted",this,this._on_metricHandler_metric_deleted.bind(this)),this.getThresholds().map((function(t){return Object(r.a)(a,void 0,void 0,N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.events.disconnect("threshold_changed",this);case 1:case"end":return e.stop()}}),e,this)})))})),this}},{key:"change",value:function(){return this.events.emit("rule_changed",this),this}},{key:"free",value:function(){return Object(r.a)(this,void 0,void 0,N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.events.emit("rule_freed",this);case 2:return this._eventsDisconnect(),this.events.clear(),t.abrupt("return",this);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"clear",value:function(){return this.shapeStates.clear(),this.textStates.clear(),this.linkStates.clear(),this}},{key:"reduce",get:function(){return this.data.reduce},set:function(t){this.data.reduce!==t&&(this.data.reduce=t)}},{key:"name",get:function(){return this.data.alias},set:function(t){var e;t&&0!==t.length&&t!==this.data.alias&&((null===(e=this.$gf.rulesHandler)||void 0===e?void 0:e.getRule(t))?this.$gf.notify("Rule with name ".concat(t," already exit"),"error"):this.data.alias=t)}},{key:"metric",get:function(){var t,e,n="";return(null===(t=this.$gf.metricHandler)||void 0===t?void 0:t.isMultipleType())?"serie"===this.data.metricType?n+="Series/"+this.data.pattern:n+="Tables/"+this.data.refId+"/"+this.data.column:n=(null===(e=this.$gf.metricHandler)||void 0===e?void 0:e.isTypeOf("serie"))?this.data.pattern:this.data.refId+"/"+this.data.column,n},set:function(t){var e,n,r;if(t||0!==t.length){var i=t.split("/"),a=i.length;if(null===(e=this.$gf.metricHandler)||void 0===e?void 0:e.isMultipleType())if(3===a){if("Tables"!==i[0])return void this.$gf.notify("Invalid name metric : "+t,"error");this.data.metricType="table",this.data.refId=i[1],this.data.column=i[2]}else{if(2!==a)return void this.$gf.notify("Invalid name metric : "+t,"error");if("Series"!==i[0])return void this.$gf.notify("Invalid name metric : "+t,"error");this.data.metricType="serie",this.data.pattern=i[1]}else if(null===(n=this.$gf.metricHandler)||void 0===n?void 0:n.isTypeOf("serie"))this.data.metricType="serie",this.data.pattern=i[0];else{if(!(null===(r=this.$gf.metricHandler)||void 0===r?void 0:r.isTypeOf("table")))return void this.$gf.notify("Invalid name metric : "+t,"error");this.data.metricType="table",this.data.refId=i[0],this.data.column=i[1]}this.change()}}},{key:"metricType",get:function(){return this.data.metricType},set:function(t){this.data.metricType=t}},{key:"metricPattern",get:function(){return this.data.pattern},set:function(t){t&&0!==t.length&&("serie"===this.metricType&&this.data.pattern!==t&&(this.data.pattern=t,this.change()),this.metricType)}},{key:"metricTable",get:function(){return this.data.refId},set:function(t){t&&0!==t.length&&this.data.refId!==t&&(this.data.refId=t,this.change())}},{key:"metricColumn",get:function(){return this.data.column},set:function(t){(t||0!==t.length||this.data.column!==t)&&(this.data.column=t,this.change())}},{key:"hidden",get:function(){return this.data.hidden},set:function(t){this.data.hidden!==t&&(this.data.hidden=t,this.change())}},{key:"tooltip",get:function(){return this.data.tooltip},set:function(t){this.data.tooltip!==t&&(this.data.tooltip=t,this.change())}},{key:"tooltipLabel",get:function(){return this.data.tooltipLabel},set:function(t){this.data.tooltipLabel!==t&&(this.data.tooltipLabel=t,this.change())}},{key:"tooltipOn",get:function(){return this.data.tooltipOn},set:function(t){t&&0!==t.length&&this.data.tooltipOn===t||(this.data.tooltipOn=t,this.change())}},{key:"tooltipMetadata",get:function(){return this.data.tpMetadata},set:function(t){t!==this.data.tpMetadata&&(this.data.tpMetadata=t,this.change())}},{key:"tooltipColors",get:function(){return this.data.tooltipColors},set:function(t){t!==this.data.tooltipColors&&(this.data.tooltipColors=t,this.change())}},{key:"tooltipForGraph",get:function(){return this.data.tpGraph},set:function(t){this.data.tpGraph!==t&&(this.data.tpGraph=t,this.change())}},{key:"graphDirection",get:function(){return this.data.tpDirection},set:function(t){t&&0!==t.length&&this.data.tpDirection===t||(this.data.tpDirection=t,this.change())}},{key:"graphType",get:function(){return this.data.tpGraphType},set:function(t){t&&0!==t.length&&this.data.tpGraphType===t||(this.data.tpGraphType=t,this.change())}},{key:"graphSize",get:function(){return this.data.tpGraphSize},set:function(t){t&&0!==t.length&&this.data.tpGraphSize===t||(this.data.tpGraphSize=t,this.change())}},{key:"graphLow",get:function(){return this.data.tpGraphLow},set:function(t){t!==this.data.tpGraphLow&&(this.data.tpGraphLow=t,this.change())}},{key:"graphHigh",get:function(){return this.data.tpGraphHigh},set:function(t){t!==this.data.tpGraphHigh&&(this.data.tpGraphHigh=t,this.change())}},{key:"graphScale",get:function(){return this.data.tpGraphScale},set:function(t){t&&0!==t.length&&this.data.tpGraphScale===t||(this.data.tpGraphScale=t,this.change())}},{key:"aggregation",get:function(){return this.data.aggregation},set:function(t){t&&this.data.aggregation!==t&&(this.data.aggregation=t,this.change())}},{key:"dataType",get:function(){return this.data.type},set:function(t){t&&this.data.type!==t&&(this.data.type=t,this.change())}},{key:"dataUnit",get:function(){return this.data.unit},set:function(t){t&&0!==t.length&&this.data.type!==t&&(this.data.unit=t,this.change())}},{key:"dataDecimals",get:function(){return this.data.decimals},set:function(t){t||(t=0),t!==this.data.decimals&&(this.data.decimals=t,this.change())}},{key:"value",set:function(t){t&&0!==t.length&&this.data.dateFormat!==t&&(this.data.dateFormat=t,this.change())}},{key:"dateFormat",get:function(){return this.data.dateFormat}},{key:"sanitize",get:function(){return this.data.sanitize},set:function(t){t&&this.data.sanitize!==t&&(this.data.sanitize=t)}},{key:"mappingType",get:function(){return this.data.mappingType},set:function(t){t!==this.data.mappingType&&(this.data.mappingType=t,this.change())}},{key:"invert",get:function(){return this.data.invert},set:function(t){t!==this.data.invert&&(this.data.invert=t,this.invertThesholdsColors())}},{key:"gradient",get:function(){return this.data.gradient},set:function(t){t!==this.data.gradient&&(this.data.gradient=t,this.change())}},{key:"overlayIcon",get:function(){return this.data.overlayIcon},set:function(t){t!==this.data.overlayIcon&&(this.data.overlayIcon=t,this.change())}},{key:"_convert",value:function(t){var e=this;t.unit&&(this.data.unit=t.unit),t.type&&(this.data.type=t.type),t.metricType&&(this.data.metricType=t.metricType),t.alias&&(this.data.alias=t.alias),t.refId&&(this.data.refId=t.refId),t.column&&(this.data.column=t.column),t.aggregation&&(this.data.aggregation=t.aggregation),(t.decimals||0===t.decimals)&&(this.data.decimals=t.decimals),this.data.reduce&&(this.data.reduce=!0);var n=void 0;t.colorOn&&(n=t.colorOn);var r=void 0;t.style&&(r=t.style);var i=!1,a=void 0,o=void 0;t.link&&(i=t.link),t.linkUrl&&(a=t.linkUrl),t.linkParams&&(o=t.linkParams);var s=void 0;t.linkOn&&(s=t.linkOn);var l=void 0;t.textOn&&(l=t.textOn);var u=void 0,c=void 0;if(t.textReplace&&(u=t.textReplace),t.textPattern&&(c=t.textPattern),t.pattern&&(this.data.pattern=t.pattern),t.dateColumn&&(this.data.dateColumn=t.dateColumn),t.dateFormat&&(this.data.dateFormat=t.dateFormat),this.data.numberTHData=[],this.numberTH=[],t.thresholds&&t.colors){var h=0,f=0;t.colors.forEach((function(n){if(0===h)e._addNumberThreshold(h++,n).events.connect("threshold_changed",e,e._on_TH_threshold_changed.bind(e));else{var r=t.thresholds[f++];"string"==typeof r&&r.length>0&&(r=parseFloat(r)),e._addNumberThreshold(h++,n,r).events.connect("threshold_changed",e,e._on_TH_threshold_changed.bind(e))}}))}else if(t.numberTHData){var d=t.numberTHData;void 0!==d&&null!=d&&d.length>0&&d.forEach((function(t){e._addNumberThreshold().import(t).events.connect("threshold_changed",e,e._on_TH_threshold_changed.bind(e))}))}0===this.numberTH.length&&(this._addNumberThreshold(0,"rgba(245, 54, 54, 0.9)",0).events.connect("threshold_changed",this,this._on_TH_threshold_changed.bind(this)),this._addNumberThreshold(1,"rgba(237, 129, 40, 0.89)",50).events.connect("threshold_changed",this,this._on_TH_threshold_changed.bind(this)),this._addNumberThreshold(2,"rgba(50, 172, 45, 0.97)",80).events.connect("threshold_changed",this,this._on_TH_threshold_changed.bind(this)));var p=[];if(this.data.stringTHData=[],this.stringTH=[],t.stringThresholds&&(p=t.stringThresholds.slice(0)),t.stringWarning&&(p[1]=t.stringWarning),t.stringCritical&&(p[0]=t.stringCritical),p&&t.colors){var v=0,g=0;t.colors.forEach((function(t){if(0===v)e._addStringThreshold(v++,t).events.connect("threshold_changed",e,e._on_TH_threshold_changed.bind(e));else{var n=p[g++];"number"==typeof n&&(n=n.toString()),e._addStringThreshold(v++,t,n).events.connect("threshold_changed",e,e._on_TH_threshold_changed.bind(e))}}))}else if(t.stringTHData){var y=t.stringTHData;void 0!==y&&null!=y&&y.length>0&&y.forEach((function(t){e._addStringThreshold().import(t).events.connect("threshold_changed",e,e._on_TH_threshold_changed.bind(e))}))}0===this.stringTH.length&&(this._addStringThreshold(0,"rgba(245, 54, 54, 0.9)","/.*/").events.connect("threshold_changed",this,this._on_TH_threshold_changed.bind(this)),this._addStringThreshold(1,"rgba(237, 129, 40, 0.89)","/.*warning.*/").events.connect("threshold_changed",this,this._on_TH_threshold_changed.bind(this)),this._addStringThreshold(2,"rgba(50, 172, 45, 0.97)","/.*(success|ok).*/").events.connect("threshold_changed",this,this._on_TH_threshold_changed.bind(this))),0===this.dateTH.length&&(this._addDateThreshold(0,"rgba(245, 54, 54, 0.9)","0d").events.connect("threshold_changed",this,this._on_TH_threshold_changed.bind(this)),this._addDateThreshold(1,"rgba(237, 129, 40, 0.89)","-1d").events.connect("threshold_changed",this,this._on_TH_threshold_changed.bind(this)),this._addDateThreshold(2,"rgba(50, 172, 45, 0.97)","-1w").events.connect("threshold_changed",this,this._on_TH_threshold_changed.bind(this))),(t.invert||!1===t.invert)&&(this.data.invert=t.invert),(t.gradient||!1===t.gradient)&&(this.data.gradient=t.gradient),(t.overlayIcon||!1===t.overlayIcon)&&(this.data.overlayIcon=t.overlayIcon),(t.tooltip||!1===t.tooltip)&&(this.data.tooltip=t.tooltip),t.tooltipLabel&&(this.data.tooltipLabel=t.tooltipLabel),(t.tooltipColors||!1===t.tooltipColors)&&(this.data.tooltipColors=t.tooltipColors),t.tooltipOn&&(this.data.tooltipOn=t.tooltipOn),t.tpDirection&&(this.data.tpDirection=t.tpDirection),t.tpMetadata&&(this.data.tpMetadata=t.tpMetadata),(t.tpGraph||!1===this.data.tpGraph)&&(this.data.tpGraph=t.tpGraph),t.tpGraphSize&&(this.data.tpGraphSize=t.tpGraphSize),t.tpGraphType&&(this.data.tpGraphType=t.tpGraphType),(t.tpGraphLow||0===t.tpGraphLow)&&(this.data.tpGraphLow=t.tpGraphLow),(t.tpGraphHigh||0===t.tpGraphHigh)&&(this.data.tpGraphHigh=t.tpGraphHigh),t.tpGraphScale&&(this.data.tpGraphScale=t.tpGraphScale);var m=[];return t.shapeProp&&(this.data.mapsDat.shapes.options.identByProp=t.shapeProp),(t.shapeRegEx||!1===t.shapeRegEx)&&(this.data.mapsDat.shapes.options.enableRegEx=t.shapeRegEx),t.mapsDat&&t.mapsDat.shapes&&(this.data.mapsDat.shapes.options.identByProp=void 0!==t.mapsDat.shapes.options.identByProp?t.mapsDat.shapes.options.identByProp:this.data.mapsDat.shapes.options.identByProp,this.data.mapsDat.shapes.options.enableRegEx=t.mapsDat.shapes.options.enableRegEx,this.data.mapsDat.shapes.options.metadata=t.mapsDat.shapes.options.metadata),m=[],this.data.mapsDat.shapes.dataList=[],null!=(m=void 0!==t.shapeMaps&&null!==t.shapeMaps?t.shapeMaps:void 0!==t.shapeData&&null!==t.shapeData?t.shapeData:t.mapsDat.shapes.dataList)&&m.length>0&&m.forEach((function(t){r&&(t.style=r),n&&(t.colorOn=n),e.addShapeMap().import(t)})),t.textProp&&(this.data.mapsDat.texts.options.identByProp=t.textProp),(t.textRegEx||!1===t.textRegEx)&&(this.data.mapsDat.texts.options.enableRegEx=t.textRegEx),t.mapsDat&&t.mapsDat.texts&&(this.data.mapsDat.texts.options.identByProp=void 0!==t.mapsDat.texts.options.identByProp?t.mapsDat.texts.options.identByProp:this.data.mapsDat.texts.options.identByProp,this.data.mapsDat.texts.options.enableRegEx=t.mapsDat.texts.options.enableRegEx,this.data.mapsDat.texts.options.metadata=t.mapsDat.texts.options.metadata),m=[],this.data.mapsDat.texts.dataList=[],void 0!==(m=void 0!==t.textMaps&&null!==t.textMaps?t.textMaps:void 0!==t.textData&&null!==t.textData?t.textData:t.mapsDat.texts.dataList)&&null!=m&&m.length>0&&m.forEach((function(t){u&&(t.textReplace=u),c&&(t.textPattern=c),l&&(t.textOn=l),e.addTextMap().import(t)})),t.linkProp&&(this.data.mapsDat.links.options.identByProp=t.linkProp),(t.linkRegEx||!1===t.linkRegEx)&&(this.data.mapsDat.links.options.enableRegEx=t.linkRegEx),t.mapsDat&&t.mapsDat.links&&(this.data.mapsDat.links.options.identByProp=void 0!==t.mapsDat.links.options.identByProp?t.mapsDat.links.options.identByProp:this.data.mapsDat.links.options.identByProp,this.data.mapsDat.links.options.enableRegEx=t.mapsDat.links.options.enableRegEx,this.data.mapsDat.links.options.metadata=t.mapsDat.links.options.metadata),this.data.mapsDat.links.dataList=[],m=[],(m=void 0!==t.linkMaps&&null!==t.linkMaps?t.linkMaps:void 0!==t.linkData&&null!==t.linkData?t.linkData:t.mapsDat.links.dataList).length>0&&m.forEach((function(t){a&&i&&(t.linkUrl=a),o&&i&&(t.linkParams=o),s&&(t.linkOn=s),e.addLinkMap().import(t)})),t.eventProp&&(this.data.mapsDat.events.options.identByProp=t.eventProp),(t.eventRegEx||!1===t.eventRegEx)&&(this.data.mapsDat.events.options.enableRegEx=t.eventRegEx),t.mapsDat&&t.mapsDat.events&&(this.data.mapsDat.events.options.identByProp=void 0!==t.mapsDat.events.options.identByProp?t.mapsDat.events.options.identByProp:this.data.mapsDat.events.options.identByProp,this.data.mapsDat.events.options.enableRegEx=t.mapsDat.events.options.enableRegEx,this.data.mapsDat.events.options.metadata=t.mapsDat.events.options.metadata),this.data.mapsDat.events.dataList=[],m=[],void 0!==t.eventData&&null!=t.eventData&&(m=t.eventData),void 0!==t.eventsMap&&null!==t.eventsMap&&(m=t.eventsMap.dataList),t.mapsDat&&t.mapsDat.events&&t.mapsDat.events.dataList&&(m=t.mapsDat.events.dataList),void 0!==m&&null!=m&&m.length>0&&m.forEach((function(t){e.addEventMap().import(t)})),this.data.mappingType=t.mappingType||1,this.data.valueData=[],void 0!==t.valueData&&null!=t.valueData&&t.valueData.length>0&&t.valueData.forEach((function(t){e.addValueMap("value","text").import(t),e.change()})),this.data.rangeData=[],void 0!==t.rangeData&&null!=t.rangeData&&t.rangeData.length>0&&t.rangeData.forEach((function(t){e.addRangeMap("from","to","text").import(t),e.change()})),this.data.sanitize=t.sanitize||!1,this.data.newRule=!1,this}},{key:"getMetrics",value:function(){return this.metrics}},{key:"getData",value:function(){return this.data}},{key:"highlightXCells",value:function(){return Object(r.a)(this,void 0,void 0,N().mark((function t(){var e=this;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.states){t.next=2;break}return t.abrupt("return",Promise.all(Array.from(this.states.values()).map((function(t){return Object(r.a)(e,void 0,void 0,N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.highlightCell();case 1:case"end":return e.stop()}}),e)})))}))));case 2:return t.abrupt("return");case 3:case"end":return t.stop()}}),t,this)})))}},{key:"unhighlightXCells",value:function(){return Object(r.a)(this,void 0,void 0,N().mark((function t(){var e=this;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.states){t.next=2;break}return t.abrupt("return",Promise.all(Array.from(this.states.values()).map((function(t){return Object(r.a)(e,void 0,void 0,N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.unhighlightCell();case 1:case"end":return e.stop()}}),e)})))}))));case 2:return t.abrupt("return");case 3:case"end":return t.stop()}}),t,this)})))}},{key:"enableMapping",value:function(){var t=[];Object.values(this.mapsObj).forEach((function(e){e.forEach((function(e){e.onMapping=!0,t.push(e.setPattern.bind(e))}))})),this.$gf.setMappingCallBack(t)}},{key:"setOrder",value:function(t){return this.data.order=t,this}},{key:"getOrder",value:function(){return this.data.order}},{key:"_invertColorOrder",value:function(){return this._invertColorOrderFor(this.numberTH),this._invertColorOrderFor(this.stringTH),this._invertColorOrderFor(this.dateTH),this}},{key:"_invertColorOrderFor",value:function(t){var e=[];t.forEach((function(t){e.push(t.color)})),e.reverse();var n=0;return t.forEach((function(t){t.color=e[n++]})),this}},{key:"invertThesholds",value:function(){return this._invertColorOrder(),this.data.invert=!this.data.invert,this}},{key:"invertThesholdsColors",value:function(){return this._invertColorOrder(),this.change(),this}},{key:"addThreshold",value:function(t,e,n){var r;switch(this.data.type){case"number":r=this._addNumberThreshold(t,e,n);break;case"string":r=this._addStringThreshold(t,e,n);break;case"date":r=this._addDateThreshold(t,e,n);break;default:throw new Error("Type of threshold unknown : "+this.data.type)}return r.events.connect("threshold_changed",this,this._on_TH_threshold_changed.bind(this)),r}},{key:"getThreshold",value:function(t){switch(this.data.type){case"number":return this.numberTH[t];case"string":return this.stringTH[t];case"date":return this.dateTH[t];default:throw new Error("Type of threshold unknown : "+this.data.type)}}},{key:"cloneThreshold",value:function(t){var e=this.getThreshold(t);return void 0!==e&&this.addThreshold(t,e.color,e.value).import(e.getData()),this.change(),e}},{key:"_addNumberThreshold",value:function(t,e,n){var r=this.numberTH,i=this.data.numberTHData,a=e,s=n,l=C.getDefaultData(),u=new C(l.color,l.comparator,l.value,l),c=i.length;void 0!==t&&0!==c||(t=c),t>c-1&&(t=c-1);var h=t;if(0===t&&c>1&&(h=1),c>0){var f=r[h];if(u.import(f.getData()),void 0===a){var d=f.color;if(h<c-1&&0!==t){var p=r[h+1].color;a=o.a.calculateColorForRatio(d,p,.5)}else a=d}if(void 0===s){var v=f.value;if(h<c-1&&0!==t){var g=r[h+1].value;s=o.a.calculateValueForRatio(v,g,.5)}else s=v}}return void 0!==a&&(u.color=a),void 0!==s&&(u.value=s),r.splice(t+1,0,u),i.splice(t+1,0,l),u}},{key:"_addStringThreshold",value:function(t,e,n){var r=this.stringTH,i=this.data.stringTHData,a=e,s=n,l=D.getDefaultData(),u=new D(l.color,l.comparator,l.value,l),c=i.length;void 0!==t&&0!==c||(t=c),t>c-1&&(t=c-1);var h=t;if(0===t&&c>1&&(h=1),c>0){var f=r[h];if(u.import(f.getData()),void 0===a){var d=f.color;if(h<c-1&&0!==t){var p=r[h+1].color;a=o.a.calculateColorForRatio(d,p,.5)}else a=d}void 0===s&&(s=f.value)}return void 0!==a&&(u.color=a),void 0!==s&&(u.value=s),r.splice(t+1,0,u),i.splice(t+1,0,l),u}},{key:"_addDateThreshold",value:function(t,e,n,r){var i=this.dateTH,a=this.data.dateTHData,s=e,l=n,u=A.getDefaultData(),c=new A(u.color,u.comparator,u.value,u,r),h=a.length;void 0!==t&&0!==h||(t=h),t>h-1&&(t=h-1);var f=t;if(0===t&&h>1&&(f=1),h>0){var d=i[f];if(c.import(d.getData()),void 0===s){var p=d.color;if(f<h-1&&0!==t){var v=i[f+1].color;s=o.a.calculateColorForRatio(p,v,.5)}else s=p}void 0===l&&(l=d.value)}return void 0!==s&&(c.color=s),void 0!==l&&(c.value=l),i.splice(t+1,0,c),a.splice(t+1,0,u),c}},{key:"removeThreshold",value:function(t){var e=this.getThresholds(),n=this.getThresholdDatas();return e.splice(t,1),n.splice(t,1),this.change(),this}},{key:"getThresholds",value:function(){switch(this.data.type){case"number":return this.numberTH;case"string":return this.stringTH;case"date":return this.dateTH;default:throw new Error("Type of threshold unknown : "+this.data.type)}}},{key:"clearThresholds",value:function(){return this._clearNumberThresholds(),this._clearStringThresholds(),this._clearDateThresholds(),this}},{key:"initThresholds",value:function(){return this._initNumberThresholds(),this._initStringThresholds(),this._initDateThresholds(),this}},{key:"_clearNumberThresholds",value:function(){return this.data.numberTHData=[],this.numberTH=[],this}},{key:"_initNumberThresholds",value:function(){return this._clearNumberThresholds(),this._addNumberThreshold(0,"rgba(245, 54, 54, 0.9)",0),this._addNumberThreshold(1,"rgba(237, 129, 40, 0.89)",50),this._addNumberThreshold(2,"rgba(50, 172, 45, 0.97)",80),this}},{key:"_clearStringThresholds",value:function(){return this.data.stringTHData=[],this.stringTH=[],this}},{key:"_initStringThresholds",value:function(){return this._clearStringThresholds(),this._addStringThreshold(0,"rgba(245, 54, 54, 0.9)","/.*/"),this._addStringThreshold(1,"rgba(237, 129, 40, 0.89)","/.*warning.*/"),this._addStringThreshold(2,"rgba(50, 172, 45, 0.97)","/.*(success|ok).*/"),this}},{key:"_clearDateThresholds",value:function(){return this.data.dateTHData=[],this.dateTH=[],this}},{key:"_initDateThresholds",value:function(){return this._clearDateThresholds(),this._addDateThreshold(0,"rgba(245, 54, 54, 0.9)","0d"),this._addDateThreshold(1,"rgba(237, 129, 40, 0.89)","-1d"),this._addDateThreshold(2,"rgba(50, 172, 45, 0.97)","-1w"),this}},{key:"getThresholdDatas",value:function(){switch(this.data.type){case"number":return this.data.numberTHData;case"string":return this.data.stringTHData;case"date":return this.data.dateTHData;default:throw new Error("Type of threshold unknown : "+this.data.type)}}},{key:"getThresholdCount",value:function(){return this.getThresholds().length}},{key:"toIconize",value:function(t){return!1!==this.data.overlayIcon&&!0===this.data.overlayIcon&&t>=1}},{key:"toTooltipize",value:function(t){return(!1!==this.data.tooltip||!1!==this.data.tpMetadata)&&("a"===this.data.tooltipOn||"wc"===this.data.tooltipOn&&t>=1)}},{key:"MatchState",value:function(t){var e=t.getXCell(),n=this.getShapeMapOptions(),r=e.getDefaultValues(n);return!!(this.matchShape(r,n)||(n=this.getTextMapOptions(),r=e.getDefaultValues(n),this.matchText(r,n)||(n=this.getLinkMapOptions(),r=e.getDefaultValues(n),this.matchLink(r,n)||(n=this.getEventMapOptions(),r=e.getDefaultValues(n),this.matchEvent(r,n)))))}},{key:"_matchMaps",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._getMapsOptions(t),r=this._getMapsObjType(t),i=!1,a=r.length,o=0;o<a;o++){var s=r[o];if(i=s.match(e,n))break}return i}},{key:"_getMapsDat",value:function(){return this.data.mapsDat}},{key:"_getRuleMapsData",value:function(t){return this._getMapsDat()["".concat(t,"s")]}},{key:"_getMapsObj",value:function(){return this.mapsObj}},{key:"_getMapsObjType",value:function(t){return this._getMapsObj()["".concat(t,"s")]}},{key:"_getMapsDatList",value:function(t){return this._getRuleMapsData(t).dataList}},{key:"_getMapsOptions",value:function(t){return this._getRuleMapsData(t).options}},{key:"_addMaps",value:function(t){var e=this._getMapsObjType(t.getType()),n=this._getMapsDatList(t.getType());e.push(t),n.push(t.getData())}},{key:"_removeMaps",value:function(t,e){var n=this._getMapsObjType(e),r=this._getMapsDatList(e),i=-1;"number"!=typeof t&&(i=n.indexOf(t)),"number"==typeof t&&(i=t),-1!==i&&(n[i].events.disconnect("map_changed",this),n[i].free(),n.splice(i,1),r.splice(i,1)),this.change()}},{key:"addShapeMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=K.getDefaultData(),n=new K(this.$gf,t,e);return n.setOptions(this.getShapeMapOptions()),this._addMaps(n),n.events.connect("map_changed",this,this._on_map_map_changed.bind(this)),n}},{key:"cloneShapeMap",value:function(t){return this.addShapeMap().import(t)}},{key:"removeShapeMap",value:function(t){return this._removeMaps(t,"shape"),this}},{key:"getShapeMapOptions",value:function(){return this._getMapsOptions("shape")}},{key:"getShapeMap",value:function(t){var e=this._getMapsObjType("shape")[t];if(e instanceof K)return e;throw new Error("map is not an instance of ShapeMap")}},{key:"getShapeMaps",value:function(){return this._getMapsObj().shapes}},{key:"matchShape",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getShapeMapOptions();return this._matchMaps("shape",t,e)}},{key:"addTextMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=J.getDefaultData(),n=new J(this.$gf,t,e);return n.setOptions(this.getTextMapOptions()),this._addMaps(n),n.events.connect("map_changed",this,this._on_map_map_changed.bind(this)),n}},{key:"cloneTextMap",value:function(t){return this.addTextMap().import(t)}},{key:"removeTextMap",value:function(t){return this._removeMaps(t,"text"),this}},{key:"getTextMapOptions",value:function(){return this._getMapsOptions("text")}},{key:"getTextMap",value:function(t){var e=this._getMapsObjType("text")[t];if(e instanceof J)return e;throw new Error("map is not an instance of TextMap")}},{key:"getTextMaps",value:function(){return this._getMapsObj().texts}},{key:"matchText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTextMapOptions();return this._matchMaps("text",t,e)}},{key:"addEventMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=tt.getDefaultData(),n=new tt(this.$gf,t,e);return n.setOptions(this.getEventMapOptions()),this._addMaps(n),n.events.connect("map_changed",this,this._on_map_map_changed.bind(this)),n}},{key:"cloneEventMap",value:function(t){return this.addEventMap().import(t.getData())}},{key:"removeEventMap",value:function(t){return this._removeMaps(t,"event"),this}},{key:"getEventMapOptions",value:function(){return this._getMapsOptions("event")}},{key:"getEventMap",value:function(t){var e=this._getMapsObjType("event")[t];if(e instanceof tt)return e;throw new Error("map is not an instance of EventMap")}},{key:"getEventMaps",value:function(){return this._getMapsObj().events}},{key:"matchEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getEventMapOptions();return this._matchMaps("event",t,e)}},{key:"addLinkMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=Q.getDefaultData(),n=new Q(this.$gf,t,e);return n.setOptions(this.getLinkMapOptions()),this._addMaps(n),n.events.connect("map_changed",this,this._on_map_map_changed.bind(this)),n}},{key:"cloneLinkMap",value:function(t){return this.addLinkMap().import(t)}},{key:"removeLinkMap",value:function(t){return this._removeMaps(t,"link"),this}},{key:"getLinkMapOptions",value:function(){return this._getMapsOptions("link")}},{key:"getLinkMap",value:function(t){var e=this._getMapsObjType("link")[t];if(e instanceof Q)return e;throw new Error("map is not an instance of LinkMap")}},{key:"getLinkMaps",value:function(){return this._getMapsObj().links}},{key:"matchLink",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLinkMapOptions();return this._matchMaps("link",t,e)}},{key:"addValueMap",value:function(t,e){var n=nt.getDefaultdata(),r=new nt(t,e,n);return r.events.connect("map_changed",this,this._on_map_map_changed.bind(this)),this.valueMaps.push(r),this.data.valueData.push(n),this.change(),r}},{key:"cloneValueMap",value:function(t){var e=this.getValueMap(t).getData();return this.addValueMap().import(e)}},{key:"removeValueMap",value:function(t){var e=-1;if(t instanceof nt&&(e=this.valueMaps.indexOf(t)),"number"==typeof t&&(e=t,t=this.valueMaps[e]),-1===e)throw new Error("map is not an instance of ValueMap");return t.events.disconnect("map_changed",this),t.free(),this.data.valueData.splice(e,1),this.valueMaps.splice(e,1),this.change(),this}},{key:"getValueMap",value:function(t){return this.valueMaps[t]}},{key:"getValueMaps",value:function(){return this.valueMaps}},{key:"addRangeMap",value:function(t,e,n){var r=rt.getDefaultData(),i=new rt(t,e,n,r);return i.events.connect("map_changed",this,this._on_map_map_changed.bind(this)),this.rangeMaps.push(i),this.data.rangeData.push(r),this.change(),i}},{key:"cloneRangeMap",value:function(t){var e=this.getRangeMap(t).getData(),n=this.addRangeMap().import(e);return this.change(),n}},{key:"removeRangeMap",value:function(t){var e=-1;if(t instanceof rt&&(e=this.rangeMaps.indexOf(t)),"number"==typeof t&&(e=t,t=this.rangeMaps[e]),-1===e)throw new Error("map is not an instance of RangeMap");t.events.disconnect("map_changed",this),t.free(),this.data.rangeData.splice(e,1),this.rangeMaps.splice(e,1),this.change()}},{key:"getRangeMap",value:function(t){return this.rangeMaps[t]}},{key:"getRangeMaps",value:function(){return this.rangeMaps}},{key:"getExectedTime",value:function(){return"number"==typeof this.execTimes?"".concat(this.execTimes.toFixed(2)," ms"):"".concat(this.execTimes," ms")}},{key:"getThresholdColor",value:function(t){switch(this.data.type){case"number":return this._getColorForNumberTH(t);case"string":return this._getColorForStringTH(t);case"date":return this._getColorForDateTH(t);default:throw new Error("Data type unknown"+this.data.type)}}},{key:"_getColorForNumberTH",value:function(t){var e=this._getIndexNumberTHForValue(t);if(this.data.gradient){if(0===e)return this.numberTH[e].color;if(e===this.numberTH.length-1)return this.numberTH[e].color;var n=this.numberTH[e].color,r=this.numberTH[e].value,i=this.numberTH[e+1].color,a=this.numberTH[e+1].value,s=o.a.calculateRatioForValue(r,a,t);return o.a.calculateColorForRatio(n,i,s)}return this.numberTH[e].color}},{key:"_getIndexTHForValue",value:function(t){switch(this.data.type){case"number":return this._getIndexNumberTHForValue(t);case"string":return this._getIndexStringTHForValue(t);case"date":return this._getIndexDateTHForValue(t);default:throw new Error("Type of threshold unknown : "+this.data.type)}}},{key:"_getIndexNumberTHForValue",value:function(t){for(var e=-1,n=0;n<this.numberTH.length;n++){var r=this.numberTH[n];if(0===n)e=n;else if(!r.hidden){if(!r.match(t))break;e=n}}return e}},{key:"_getIndexStringTHForValue",value:function(t){for(var e=-1,n=0;n<this.stringTH.length;n++){var r=this.stringTH[n];(0===n||!r.hidden&&r.match(t))&&(e=n)}return e}},{key:"_getColorForStringTH",value:function(t){return this.stringTH[this._getIndexStringTHForValue(t)].color}},{key:"_getIndexDateTHForValue",value:function(t){for(var e=-1,n=0;n<this.dateTH.length;n++){var r=this.dateTH[n];(0===n||!r.hidden&&r.match(t))&&(e=n)}return e}},{key:"_getColorForDateTH",value:function(t){return this.dateTH[this._getIndexDateTHForValue(t)].color}},{key:"getThresholdColorForLevel",value:function(t){var e=this.getThresholdIndexForLevel(t);return this.getThreshold(e).color}},{key:"getThresholdIndexForLevel",value:function(t){var e=this.getThresholds().length;return this.data.invert?t:e-1-t}},{key:"getThresholdLevel",value:function(t){var e=this._getIndexTHForValue(t),n=this.getThresholds().length;return this.data.invert&&-1!==e?e:-1!==e?n-1-e:e}},{key:"getThresholdLevelForTH",value:function(t){var e=this.getThresholds().indexOf(t);return-1!==e?this.data.invert?e:this.getThresholdCount()-1-e:e}},{key:"getThresholdLevelForIndex",value:function(t){return-1!==t?this.data.invert?t:this.getThresholdCount()-1-t:t}},{key:"getValueForMetric",value:function(t){if(this.matchMetric(t))try{return t.getValue(this.data.aggregation,this.data.column)}catch(t){return o.c.error("Datapoint for metric is null",t),null}return"-"}},{key:"getFormattedValueForMetric",value:function(t){var e=this.getValueForMetric(t);return this.getFormattedValue(e)}},{key:"getFormattedValue",value:function(t){if("number"===this.data.type){if(!Object(s.isFinite)(t))return"null";if(null==t)return"-";var e=this._decimalPlaces(t);return e="number"==typeof this.data.decimals?Math.min(this.data.decimals,e):e,p.formatValue(t,this.data.unit,this.data.decimals)}if("string"===this.data.type){null==t&&(t="null"),Object(s.isArray)(t)&&(t=t.join(", "));var n=this.data.mappingType||0;if(1===n&&this.valueMaps){for(var r=0;r<this.valueMaps.length;r+=1){var i=this.valueMaps[r];if(!i.hidden&&i.match(t))return i.getFormattedText(t)}return t.toString()}if(2===n&&this.rangeMaps){for(var a=0;a<this.rangeMaps.length;a+=1){var o=this.rangeMaps[a];if(!o.hidden&&o.match(t))return o.getFormattedText(t)}return t.toString()}if(null==t)return"null"}return"date"===this.data.type?null==t?"-":(Object(s.isArray)(t)&&(t=t[0]),p.getFormatedDate(t,this.data.dateFormat)):t}},{key:"$sanitize",value:function(t){throw new Error("Method not implemented.")}},{key:"_decimalPlaces",value:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}},{key:"initCycle",value:function(){return this.highestLevel=-1,this.highestFormattedValue="",this.highestColor="",this.highestValue="",this.execTimes=0,this}},{key:"matchMetric",value:function(t){return"serie"===this.data.metricType&&"serie"===t.type?o.a.matchString(t.getName(),this.data.pattern):"table"===this.data.metricType&&"table"===t.type&&t.getName()===this.data.refId}},{key:"clearMetrics",value:function(){return this.metrics.clear(),this}},{key:"hasMetric",value:function(t){return this.metrics.has(t.uid)}},{key:"_on_metricHandler_metric_deleted",value:function(t){this.constructor.name,this.metrics.has(t.uid)&&(this.metrics.delete(t.uid),this.update())}},{key:"_on_metricHandler_metric_created",value:function(t){this.constructor.name,this.matchMetric(t)&&(this.metrics.set(t.uid,t),this.update())}},{key:"_on_TH_threshold_changed",value:function(){this.constructor.name,this.change()}},{key:"_on_map_map_changed",value:function(){this.constructor.name,this.change()}}])&&R(e.prototype,n),i&&R(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=G(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}}).apply(this,arguments)}function G(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$(t)););return t}function z(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}function V(t,e){return(V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$(t);if(e){var i=$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return B(this,n)}}function B(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W(t,e,n){return e&&X(t.prototype,e),n&&X(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Z=["map_initalized","map_changed","map_freed"],q=function(){function t(e,n,r,i){Y(this,t),this.type="shape",this.options=I.getDefaultMapOptions(),this.reduce=!0,this.onMapping=!1,this.events=a.a.create(Z),this.$gf=e,this.uid=o.a.genUid(),this.data=r,this.data.pattern=n,i&&this.import(i),this.init()}return W(t,[{key:"init",value:function(){this._setType(),this.events.emit("map_initalized",this),this.$gf.events.connect("mapping_disabled",this,this._on_global_mapping_disabled.bind(this))}},{key:"change",value:function(){this.events.emit("map_changed",this)}},{key:"free",value:function(){this.clear(),this.$gf.events.disconnect("mapping_disabled",this),this.events.emit("map_freed",this)}},{key:"clear",value:function(){this.events.clear()}},{key:"import",value:function(t){return t.metadata&&(this.data.pattern=t.metadata),t.pattern&&(this.data.pattern=t.pattern),t.hidden&&(this.data.hidden=t.hidden),this}},{key:"pattern",get:function(){return this.data.pattern},set:function(t){t&&0!==t.length&&t!==this.data.pattern&&(this.data.pattern=t,this.change())}},{key:"hidden",get:function(){return this.data.hidden},set:function(t){t!==this.data.hidden&&(this.data.hidden=t,this.change())}},{key:"getData",value:function(){return this.data}},{key:"getType",value:function(){return this.type}},{key:"setOptions",value:function(t){return this.options=t,this}},{key:"getOptions",value:function(){return this.options}},{key:"setPattern",value:function(t){var e=t.getDefaultValues(this.options);Array.isArray(e)?this.pattern=e[0]:this.pattern=e}},{key:"match",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.getDefaultMapOptions(),n=arguments.length>2?arguments[2]:void 0,r=this.data.pattern;return void 0!==n&&(r=n.replaceText(r)),null!=t&&0!==t.length&&o.a.matchString(t,r,e.enableRegEx)}},{key:"enableMapping",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.onMapping=t,this.$gf.setMappingCallBack(this.setPattern.bind(this))}},{key:"export",value:function(){return{pattern:this.data.pattern,hidden:this.data.hidden}}},{key:"_on_global_mapping_disabled",value:function(){this.constructor.name,this.onMapping=!1}}],[{key:"getDefaultMethods",value:function(){return this.methods}},{key:"getDefaultPlaceHolder",value:function(t){var e=this.methods.find((function(e){return e.value===t}));if(void 0!==e)return e.placeholder}},{key:"getDefaultValue",value:function(t){var e=this.methods.find((function(e){return e.value===t}));if(void 0!==e)return e.default}}]),t}();q.methods=[];var K=function(t){z(n,t);var e=U(n);function n(){return Y(this,n),e.apply(this,arguments)}return W(n,[{key:"_setType",value:function(){this.type="shape"}},{key:"condition",get:function(){return this.data.colorOn},set:function(t){t&&0!==t.length&&t!==this.data.colorOn&&(this.data.colorOn=t,this.change())}},{key:"style",get:function(){return this.data.style},set:function(t){t&&0!==t.length&&t!==this.data.style&&(this.data.style=t,this.change())}},{key:"isEligible",value:function(t){return-1!==t&&("n"!==this.data.colorOn&&("a"===this.data.colorOn||"wc"===this.data.colorOn&&t>=1))}},{key:"import",value:function(t){return H($(n.prototype),"import",this).call(this,t),t.style&&(this.data.style=t.style),t.colorOn&&(this.data.colorOn=t.colorOn),this}}],[{key:"getDefaultData",value:function(){return{pattern:"",hidden:!1,style:"fillColor",colorOn:"a"}}}]),n}(q),J=function(t){z(n,t);var e=U(n);function n(){return Y(this,n),e.apply(this,arguments)}return W(n,[{key:"_setType",value:function(){this.type="text"}},{key:"condition",get:function(){return this.data.textOn},set:function(t){t&&0!==t.length&&t!==this.data.textOn&&(this.data.textOn=t,this.change())}},{key:"method",get:function(){return this.data.textReplace},set:function(t){t&&0!==t.length&&t!==this.data.textReplace&&(this.data.textReplace=t,this.change())}},{key:"textToReplace",get:function(){return this.data.textPattern},set:function(t){t&&0!==t.length&&t!==this.data.textPattern&&(this.data.textPattern=t,this.change())}},{key:"isEligible",value:function(t){return"wmd"===this.data.textOn||"n"!==this.data.textOn&&("wc"===this.data.textOn&&t>=1||"co"===this.data.textOn&&t>=2)}},{key:"import",value:function(t){return H($(n.prototype),"import",this).call(this,t),t.textReplace&&(this.data.textReplace=t.textReplace),t.textPattern&&(this.data.textPattern=t.textPattern),t.textOn&&(this.data.textOn=t.textOn),this}},{key:"getReplaceText",value:function(t,e){if("content"===this.data.textReplace)return e;if("pattern"===this.data.textReplace){var n=o.a.stringToRegEx(this.data.textPattern);return n&&t.toString().match(n)?t.toString().replace(n,e):t}return"as"===this.data.textReplace?"".concat(t," ").concat(e):"anl"===this.data.textReplace?"".concat(t,"\n").concat(e):t}}],[{key:"getDefaultData",value:function(){return{pattern:"",hidden:!1,textReplace:"content",textPattern:"/.*/",textOn:"wmd"}}}]),n}(q),Q=function(t){z(n,t);var e=U(n);function n(){return Y(this,n),e.apply(this,arguments)}return W(n,[{key:"_setType",value:function(){this.type="link"}},{key:"condition",get:function(){return this.data.linkOn},set:function(t){t&&0!==t.length&&t!==this.data.linkOn&&(this.data.linkOn=t,this.change())}},{key:"url",get:function(){return this.data.linkUrl},set:function(t){t&&0!==t.length&&t!==this.data.linkUrl&&(this.data.linkUrl=t,this.change())}},{key:"dasboardParams",set:function(t){t!==this.data.linkParams&&(this.data.linkParams=t,this.change())}},{key:"dashboardParams",get:function(){return this.data.linkParams}},{key:"getLink",value:function(){return this.data.linkParams?this.data.linkUrl+window.location.search:this.data.linkUrl}},{key:"import",value:function(t){return H($(n.prototype),"import",this).call(this,t),t.linkUrl&&(this.data.linkUrl=t.linkUrl),t.linkParams&&(this.data.linkParams=t.linkParams),t.linkOn&&(this.data.linkOn=t.linkOn),this}},{key:"isEligible",value:function(t){return"a"===this.data.linkOn||"wc"===this.data.linkOn&&t>=1}}],[{key:"getDefaultData",value:function(){return{pattern:"",hidden:!1,linkUrl:"",linkParams:!1,linkOn:"a"}}}]),n}(q),tt=function(t){z(n,t);var e=U(n);function n(){var t;return Y(this,n),(t=e.apply(this,arguments)).validComp=["lt","le","eq","ne","ge","gt","al"],t}return W(n,[{key:"_setType",value:function(){this.type="event"}},{key:"level",get:function(){return this.data.eventOn},set:function(t){t!==this.data.eventOn&&(this.data.eventOn=t)}},{key:"comparator",get:function(){return this.data.comparator},set:function(t){t&&0!==t.length&&t!==this.data.comparator&&(this.data.comparator=t,this.change())}},{key:"animation",get:function(){return this.data.style},set:function(t){t&&0!==t.length&&t!==this.data.style&&(this.data.style=t,this.change())}},{key:"value",get:function(){return this.data.value},set:function(t){t&&0!==t.length&&t!==this.data.value&&(this.data.value=t,this.change())}},{key:"getPlaceHolder",value:function(){var t=n.getDefaultPlaceHolder(this.data.style);return void 0!==t?t:""}},{key:"isValidComp",value:function(t){return-1!==this.validComp.indexOf(t)}},{key:"getTypeahead",value:function(){var t=this,e=this.$gf.getFullAvailableVarNames(),r=n.methods.find((function(e){return e.value===t.data.style}));if(void 0!==r&&void 0!==r.typeahead)return e=e.concat(r.typeahead.split("|"));if("shape"===this.data.style){var i=this.getFormNames();Array.prototype.push.apply(e,i)}return e}},{key:"getValueByDefault",value:function(){var t=n.getDefaultValue(this.data.style);return void 0!==t?t:""}},{key:"getFormNames",value:function(){if(n.shapes.length>0)return n.shapes;var t=o.a.utils.loadFile(o.d.getRootPath()+o.b.CONF_FILE_SHAPESTXT);return void 0!==t&&0===n.shapes.length?(n.shapes=n.shapes.concat(t.split(/\n/)),n.shapes):n.shapes}},{key:"isEligible",value:function(t){switch(this.data.comparator){case"al":return!0;case"lt":return t<this.data.eventOn;case"le":return t<=this.data.eventOn;case"eq":return t===this.data.eventOn;case"ne":return t!==this.data.eventOn;case"ge":return t>=this.data.eventOn;case"gt":return t>this.data.eventOn;default:return-1===this.data.eventOn||t===this.data.eventOn}}},{key:"import",value:function(t){return H($(n.prototype),"import",this).call(this,t),t.style&&(this.data.style=t.style),t.comparator&&(this.data.comparator=t.comparator),t.eventOn&&(this.data.eventOn=t.eventOn,-1===this.data.eventOn&&(this.data.comparator="al",this.data.eventOn=0)),t.value&&(this.data.value=t.value),this}}],[{key:"getDefaultData",value:function(){return{pattern:"",hidden:!1,style:"shape",comparator:"eq",eventOn:0,value:""}}}]),n}(q);tt.methods=o.b.EVENTMETHODS,tt.shapes=[];var et=function(){function t(e){Y(this,t),this.uid=o.a.genUid(this.constructor.name),this.reduce=!0,this.events=a.a.create(Z),this.data=e,this.init()}return W(t,[{key:"init",value:function(){this.events.emit("map_initalized",this)}},{key:"change",value:function(){this.events.emit("map_changed",this)}},{key:"free",value:function(){this.events.clear(),this.events.emit("map_freed",this)}},{key:"hidden",get:function(){return this.data.hidden},set:function(t){t!==this.data.hidden&&(this.data.hidden=t,this.change())}},{key:"text",get:function(){var t;return null!==(t=this.data.text)&&void 0!==t?t:""},set:function(t){t!==this.data.text&&(this.data.text=t.trim(),this.change())}},{key:"import",value:function(t){return t.text&&(this.data.text=t.text),this}},{key:"getData",value:function(){return this.data}}]),t}(),nt=function(t){z(n,t);var e=U(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;return Y(this,n),(t=e.call(this,a)).data.value=r,t.data.text=i,t.import(a),t}return W(n,[{key:"value",get:function(){var t;return null!==(t=this.data.value)&&void 0!==t?t:""},set:function(t){t!==this.data.value&&(this.data.value=t,this.change())}},{key:"import",value:function(t){return this.data.value=t.value||this.data.value||void 0,this.data.text=t.text||this.data.text||void 0,this.data.hidden=t.hidden||this.data.hidden||!1,this}},{key:"match",value:function(t){return null==t?"null"===this.data.value:!Object(s.isString)(t)&&Number(this.data.value)===Number(t)||o.a.matchString(t.toString(),this.data.value)}},{key:"getFormattedText",value:function(t){return null!=t||"null"!==this.data.value&&"undefined"!==this.data.value?this.match(t)?this.data.text?this.data.text:"":"".concat(t):this.data.text?this.data.text:""}}],[{key:"getDefaultdata",value:function(){return{value:void 0,text:void 0,hidden:!1}}}]),n}(et),rt=function(t){z(n,t);var e=U(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3?arguments[3]:void 0;return Y(this,n),(t=e.call(this,s)).reduce=!0,t.uid=o.a.genUid(),t.data=s,t.data.from=r,t.data.to=i,t.data.text=a,t.data.hidden=!1,t}return W(n,[{key:"to",get:function(){var t;return null!==(t=this.data.to)&&void 0!==t?t:""},set:function(t){t!==this.data.to&&(this.data.to=t,this.change())}},{key:"from",get:function(){var t;return null!==(t=this.data.from)&&void 0!==t?t:""},set:function(t){t!==this.data.from&&(this.data.from=t,this.change())}},{key:"import",value:function(t){return this.data.from=t.from?t.from:void 0,this.data.to=t.to?t.to:void 0,this.data.text=t.text?t.text:void 0,this.data.hidden=!(!t.hidden&&!1!==t.hidden)&&t.hidden,this}},{key:"match",value:function(t){if(void 0!==t&&"string"==typeof t&&t.length>0||void 0!==t&&"number"==typeof t){var e=Number(t);return void 0!==this.data.from&&"string"==typeof t&&this.data.from.length>0||void 0!==this.data.from&&"number"==typeof t?e>=Number(this.data.from)&&(!(void 0!==this.data.to&&"string"==typeof this.data.to&&this.data.to.length>0||void 0!==this.data.from&&"number"==typeof this.data.to)||e<Number(this.data.to)):!(void 0!==this.data.to&&"string"==typeof this.data.to&&this.data.to.length>0||void 0!==this.data.to&&"number"==typeof this.data.to)||e<Number(this.data.to)}return!1}},{key:"getFormattedText",value:function(t){return this.match(t)?this.data.text:t}}],[{key:"getDefaultData",value:function(){return{from:void 0,to:void 0,text:void 0,hidden:!1}}}]),n}(et);function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(){at=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==e&&n.call(g,i)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==it(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}lt.$inject=["$q","uiSegmentSrv"];var st=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.style=o.b.COLORMETHODS,this.metricTypes=o.b.METRIC_TYPES,this.colorOn=o.b.COLOR_APPLYON,this.linkOn=o.b.LINK_APPLYON,this.tooltipOn=o.b.TOOLTIP_APPLYON,this.textOn=o.b.TEXT_APPLYON,this.textReplace=o.b.TEXTMETHODS,this.comparator=o.b.COMPARATOR_TYPES,this.EventType=tt.getDefaultMethods(),this.tpDirection=o.b.TOOLTIP_DIRECTION_TYPES,this.propTypes=o.b.IDENT_TYPES,this.textPattern="/.*/",this.valueTypes=o.b.VALUE_TYPES,this.dateFormats=o.b.VALUE_DATEFORMAT_TYPES,this.aggregationTypes=o.b.AGGREGATION_TYPES,this.mappingTypes=o.b.VALUEMAPPINGTYPES,this.tpGraphType=o.b.TOOLTIP_GRAPH_TYPES,this.tpGraphScale=o.b.TOOLTIP_GRAPH_SCALE_TYPES,this.tpGraphSize=o.b.TOOLTIP_GRAPH_SIZE_TYPES,this.currentParams=new Map,this.getCellNamesTypeHead=function(){var t=r.getCurrentMap(),e=[],n=void 0;return(n=t?t.getOptions():r.getCurrentParam("currentOptions"))&&(e=r.getCellNames4(n)),e},this.getCellNamesMD=function(){var t,e=r.getCurrentMap(),n=[];if(e){var i=e.getOptions(),a=null===(t=r.flowchartHandler)||void 0===t?void 0:t.getFlowchart();a&&(n=a.getNamesByOptions(i,"value"))}return n},e.editor=this,this.$scope=e,this.ctrl=e.ctrl,e.GFPlugin=this.ctrl.GFPlugin,e.$GF=this.ctrl.$gf,this.$gf=this.ctrl.$gf;var i=n.find("#templateMapping");this.parentDiv=i[0],this.rulesHandler=this.ctrl.rulesHandler,this.flowchartHandler=this.ctrl.flowchartHandler,this.rulesHandler=this.ctrl.rulesHandler,this.metricHandler=this.ctrl.metricHandler,this.unitFormats=p.getUnitFormats(),this.tpGraphSize=o.b.TOOLTIP_GRAPH_SIZE_TYPES;var a=0;this.rulesTableData={data:[],columns:[{index:a++,id:"expand",label:"<>",desc:"Show/Hide detail",width:"30px",sort:"asc",select:!1},{index:a++,id:"rule",label:"Rule",desc:"Rule Name",width:"100px",sort:"asc",select:!1},{index:a++,id:"metric",label:"Metric",desc:"Metric Name",width:"100px",sort:"asc",select:!1},{index:a++,id:"level",label:"Lvl",desc:"Highest level",width:"40px",sort:"asc",select:!1},{index:a++,id:"fval",label:"F. val.",desc:"Formated value",width:"50px",sort:"asc",select:!1},{index:a++,id:"color",label:"Color",desc:"Highest color",width:"50px",sort:"asc",select:!1},{index:a++,id:"options",label:"Options",desc:"Options",width:"80px",sort:"asc",select:!1},{index:a++,id:"actions",label:"Actions",desc:"Actions",width:"120px",sort:"asc",select:!1}]},a=0,this.shapesTableData={data:[],columns:[{index:a++,id:"expand",label:"",desc:"Expand/collapse",width:"30px",sort:"asc",select:!1},{index:a++,id:"what",label:"What",desc:"What is the shape to apply this rule",width:"100px",sort:"asc",select:!1},{index:a++,id:"when",label:"When",desc:"When to apply this rule on shape",width:"100px",sort:"asc",select:!1},{index:a++,id:"how",label:"How",desc:"How to apply this rule on shape",width:"100px",sort:"asc",select:!1},{index:a++,id:"actions",label:"Actions",desc:"Actions",width:"100px",sort:"asc",select:!1}]},a=0,this.textsTableData={data:[],columns:[{index:a++,id:"expand",label:"",desc:"Expand/collapse",width:"30px",sort:"asc",select:!1},{index:a++,id:"what",label:"What",desc:"What is the shape/label to apply this rule",width:"100px",sort:"asc",select:!1},{index:a++,id:"when",label:"When",desc:"When to apply this rule on shape",width:"100px",sort:"asc",select:!1},{index:a++,id:"how",label:"How",desc:"How to apply this rule on shape",width:"100px",sort:"asc",select:!1},{index:a++,id:"with",label:"With",desc:"Text to replace",width:"100px",sort:"asc",select:!1},{index:a++,id:"actions",label:"Actions",desc:"Actions",width:"100px",sort:"asc",select:!1}]},a=0,this.linksTableData={data:[],columns:[{index:a++,id:"expand",label:"",desc:"Expand/collapse",width:"30px",sort:"asc",select:!1},{index:a++,id:"what",label:"What",desc:"What is the shape/label to apply this rule",width:"100px",sort:"asc",select:!1},{index:a++,id:"when",label:"When",desc:"When to apply this rule on shape",width:"100px",sort:"asc",select:!1},{index:a++,id:"url",label:"URL",desc:"URL relative or absolute",width:"150px",sort:"asc",select:!1},{index:a++,id:"options",label:"Options",desc:"Options",width:"45px",sort:"asc",select:!1},{index:a++,id:"actions",label:"Actions",desc:"Actions",width:"100px",sort:"asc",select:!1}]},a=0,this.eventsTableData={data:[],columns:[{index:a++,id:"expand",label:"",desc:"Expand/collapse",width:"30px",sort:"asc",select:!1},{index:a++,id:"what",label:"What",desc:"What is the shape/label to apply this rule",width:"100px",sort:"asc",select:!1},{index:a++,id:"when",label:"When",desc:"When current level is",width:"80px",sort:"asc",select:!1},{index:a++,id:"level",label:"Lvl",desc:"Threshold level",width:"60px",sort:"asc",select:!1},{index:a++,id:"then",label:"Then",desc:"Then execute this action",width:"120px",sort:"asc",select:!1},{index:a++,id:"with",label:"With",desc:"With this value/parameter",width:"80px",sort:"asc",select:!1},{index:a++,id:"actions",label:"Actions",desc:"Actions",width:"100px",sort:"asc",select:!1}]},a=0,this.THsTableData={data:[],columns:[{index:a++,id:"expand",label:"",desc:"Expand/collapse",width:"30px",align:"center",sort:"asc",select:!1},{index:a++,id:"colors",label:"Colors",desc:"Colorize object",align:"center",width:"75px",sort:"asc",select:!1},{index:a++,id:"when",label:"When",desc:"When metric value like...",width:"67px",sort:"asc",select:!1},{index:a++,id:"value",label:"Than",desc:"Enter a value to define the level",width:"80px",align:"left",sort:"asc",select:!1},{index:a++,id:"level",label:"lvl.",desc:"Level",width:"50px",sort:"asc",select:!1},{index:a++,id:"actions",label:"Actions",desc:"Actions",width:"100px",sort:"asc",select:!1}]},a=0,this.valuesTableData={data:[],columns:[{index:a++,id:"expand",label:"",desc:"Expand/collapse",width:"30px",sort:"asc",select:!1},{index:a++,id:"value",label:"Value",desc:"Origin value",width:"100px",sort:"asc",select:!1},{index:a++,id:"text",label:"Text",desc:"Final value",width:"100px",sort:"asc",select:!1},{index:a++,id:"actions",label:"Actions",desc:"Actions",width:"100px",sort:"asc",select:!1}]},a=0,this.rangesTableData={data:[],columns:[{index:a++,id:"expand",label:"",desc:"Expand/collapse",width:"30px",sort:"asc",select:!1},{index:a++,id:"from",label:"From",desc:"Min of value to replace",width:"100px",sort:"asc",select:!1},{index:a++,id:"to",label:"To",desc:"Max of value to replace",width:"100px",sort:"asc",select:!1},{index:a++,id:"text",label:"Text",desc:"Final value",width:"100px",sort:"asc",select:!1},{index:a++,id:"actions",label:"Actions",desc:"Actions",width:"100px",sort:"asc",select:!1}]};var s=i.find("#RulesTable")[0];this.rulesTable=new o.e(this.rulesTableData,s);var l=i.find("#ShapesTable")[0];this.shapesTable=new o.e(this.shapesTableData,l);var u=i.find("#TextsTable")[0];this.textsTable=new o.e(this.textsTableData,u);var c=i.find("#LinksTable")[0];this.linksTable=new o.e(this.linksTableData,c);var h=i.find("#EventsTable")[0];this.eventsTable=new o.e(this.eventsTableData,h);var f=i.find("#THsTable")[0];this.THsTable=new o.e(this.THsTableData,f);var d=i.find("#ValuesTable")[0];this.valuesTable=new o.e(this.valuesTableData,d);var v=i.find("#RangesTable")[0];this.rangesTable=new o.e(this.rangesTableData,v),this.getMetricNames=function(){return r.metricHandler?r.metricHandler.getNames("serie"):[]},this.getVariables=function(){return r.$gf.getFullAvailableVarNames()},this.getEventValues=[]}var e,n,i;return t.$inject=["$scope","$element"],e=t,(n=[{key:"setCurrentParam",value:function(t,e){this.currentParams.set(t,e)}},{key:"unsetCurrentParam",value:function(t){this.currentParams.delete(t)}},{key:"setCurrentMap",value:function(t){this.setCurrentParam("currentMap",t)}},{key:"unsetCurrentMap",value:function(){this.unsetCurrentParam("currentMap")}},{key:"getCurrentMap",value:function(){return this.getCurrentParam("currentMap")}},{key:"getCurrentParam",value:function(t){return this.currentParams.get(t)}},{key:"getCellNames4",value:function(t){var e,n=[];if(t){var r=null===(e=this.flowchartHandler)||void 0===e?void 0:e.getFlowchart();r&&(n=r.getNamesByOptions(t))}return n}},{key:"isFirstRule",value:function(t){return 0===t}},{key:"isOnlySeries",value:function(){var t,e,n=(null===(t=this.metricHandler)||void 0===t?void 0:t.isTypeOf("serie"))&&!(null===(e=this.metricHandler)||void 0===e?void 0:e.isTypeOf("table"));return void 0!==n&&n}},{key:"isOnlyTables",value:function(){var t,e,n=!(null===(t=this.metricHandler)||void 0===t?void 0:t.isTypeOf("serie"))&&(null===(e=this.metricHandler)||void 0===e?void 0:e.isTypeOf("table"));return void 0!==n&&n}},{key:"isMultipleType",value:function(){var t,e,n=(null===(t=this.metricHandler)||void 0===t?void 0:t.isTypeOf("serie"))&&(null===(e=this.metricHandler)||void 0===e?void 0:e.isTypeOf("table"));return void 0!==n&&n}},{key:"initType",value:function(t){this.isOnlyTables()?t.data.metricType="table":this.isOnlySeries()&&(t.data.metricType="serie")}},{key:"getTablesName",value:function(){return this.metricHandler?this.metricHandler.getNames("table"):[]}},{key:"getColumnsForTable",value:function(t){return this.metricHandler?this.metricHandler.getColumnsName(t,"table"):[]}},{key:"getFastEditMectricNames",value:function(t){var e;return this.$gf.metricHandler?null===(e=this.$gf.metricHandler)||void 0===e?void 0:e.getMetricNames():[]}},{key:"ValidateDate",value:function(t){if("date"!==t.dataType)return!0;try{var e="serie",n=t.metricPattern,r=void 0;if("table"===t.metricType&&(e="table",n=t.metricTable,r=t.metricColumn),this.metricHandler)for(var i=this.metricHandler.findMetrics(n,e),a=i.length,o=0;o<a;o++){var s=i[o],l=s.getValue(t.aggregation,r);if(!A.isValidDate(l))return this.$gf.notify("The value for the metric ".concat(s.getName()," and the aggregation ").concat(this.$gf.GetT4V(this.aggregationTypes,t.aggregation)," is not a valid date : ").concat(l)),!1}return!0}catch(t){return!1}}},{key:"getColumnsNameForRule",value:function(t){var e="serie",n=t.data.pattern;return"table"===t.data.metricType&&(e="table",n=t.metricTable),this.metricHandler?this.metricHandler.getColumnsName(n,e):[]}},{key:"isLastRule",value:function(t){var e,n=null===(e=this.rulesHandler)||void 0===e?void 0:e.countRules();return void 0!==n&&t===n-1}},{key:"render",value:function(){this.ctrl.render()}},{key:"setUnitFormat",value:function(t,e){t.data.unit=e.value}},{key:"onRulesChange",value:function(t){var e;return t?t.change():null===(e=this.ctrl.rulesHandler)||void 0===e||e.change(),!0}},{key:"removeShapeMap",value:function(t,e){var n=t.getShapeMap(e);this.unhighlightXCells(n),t.removeShapeMap(e)}},{key:"removeTextMap",value:function(t,e){var n=t.getTextMap(e);this.unhighlightXCells(n),t.removeTextMap(e)}},{key:"removeLinkMap",value:function(t,e){var n=t.getLinkMap(e);this.unhighlightXCells(n),t.removeLinkMap(e)}},{key:"removeEventMap",value:function(t,e){var n=t.getEventMap(e);this.unhighlightXCells(n),t.removeEventMap(e)}},{key:"onColorChange",value:function(t){return function(e){t.color=e}}},{key:"highlightXCells",value:function(t){var e,n=null===(e=this.flowchartHandler)||void 0===e?void 0:e.getFlowchart(),r=null==n?void 0:n.getXGraph();r&&r.highlightXCells(t.pattern,t.getOptions(),!0)}},{key:"unhighlightXCells",value:function(t){var e,n=null===(e=this.flowchartHandler)||void 0===e?void 0:e.getFlowchart(),r=null==n?void 0:n.getXGraph();r&&r.highlightXCells(t.pattern,t.getOptions(),!1)}},{key:"highlightXCells4Rule",value:function(t){return Object(r.a)(this,void 0,void 0,at().mark((function e(){return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.highlightXCells();case 1:case"end":return e.stop()}}),e)})))}},{key:"unhighlightXCells4Rule",value:function(t){return Object(r.a)(this,void 0,void 0,at().mark((function e(){return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.unhighlightXCells();case 1:case"end":return e.stop()}}),e)})))}},{key:"unhighlightAllCells",value:function(){var t;return Object(r.a)(this,void 0,void 0,at().mark((function e(){var n,r;return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null===(t=this.flowchartHandler)||void 0===t?void 0:t.getFlowchart(),(r=null==n?void 0:n.getXGraph())&&r.unhighlightCells();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"removeRule",value:function(t,e){var n;(1===t.removeClick||e)&&(this.unhighlightAllCells(),null===(n=this.rulesHandler)||void 0===n||n.removeRule(t),this.onRulesChange()),t.removeClick=1,window.setInterval((function(){t&&(t.removeClick=2)}),2e3)}},{key:"cloneRule",value:function(t){var e;null===(e=this.rulesHandler)||void 0===e||e.cloneRule(t),this.onRulesChange()}},{key:"moveRule",value:function(t,e){var n,r;e?null===(n=this.rulesHandler)||void 0===n||n.moveRuleToUp(t):null===(r=this.rulesHandler)||void 0===r||r.moveRuleToDown(t),this.onRulesChange()}},{key:"onEventValue",value:function(t){this.getEventValues=t.getTypeahead()}}])&&ot(e.prototype,n),i&&ot(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lt(t,e){return{restrict:"E",scope:!0,templateUrl:"".concat(o.d.getPartialPath(),"/rules/rulesTab.html"),controller:st}}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}ht.$inject=["$q","$sce","uiSegmentSrv"];var ct=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceTypes=o.b.SOURCE_TYPES,this.themes=o.b.DIOTHEME_TYPES,this.errorSourceFlag=!1,this.errorSourceMsg="",this.errorDownloadFlag=!1,this.errorDownloadMsg="",this.editMode=!1,this.newName="",this.currentFlowchartName="Main",e.editor=this,this.ctrl=e.ctrl,e.GFPlugin=this.ctrl.GFPlugin,e.$GF=this.ctrl.$gf,this.$gf=this.ctrl.$gf,this.$scope=e,this.flowchartHandler=this.ctrl.flowchartHandler,this.currentFlowchart=null===(n=this.flowchartHandler)||void 0===n?void 0:n.getFlowchart();var r=0;this.flowchartsTableData={data:[],columns:[{index:r++,id:"expand",label:"",desc:"Expand/collapse",width:"30px",sort:"asc",select:!1},{index:r++,id:"name",label:"Flowchart name",desc:"Flowchart Name",width:"120px",sort:"asc",select:!1},{index:r++,id:"type",label:"Type",desc:"XML or CSV",width:"45px",sort:"asc",select:!1},{index:r++,id:"source",label:"source",desc:"Src. origin",width:"60px",sort:"asc",select:!1},{index:r++,id:"background",label:"BG Col.",desc:"Background color",width:"60px",sort:"asc",select:!1},{index:r++,id:"options",label:"Options",desc:"Checked options",width:"150px",sort:"asc",select:!1}]},this.flowchartsTable=new o.e(this.flowchartsTableData)}var e,n,r;return t.$inject=["$scope"],e=t,(n=[{key:"render",value:function(){var t;null===(t=this.flowchartHandler)||void 0===t||t.render()}},{key:"onColorChange",value:function(t){return function(e){t.background=e}}},{key:"getFlowcharts",value:function(){return this.flowchartHandler?this.flowchartHandler.getFlowcharts():[]}},{key:"addFlowchart",value:function(){var t;this.editMode=!0,this.currentFlowchart=null===(t=this.flowchartHandler)||void 0===t?void 0:t.addFlowchart(this.flowchartHandler.getFlowchartTmpName()),this.currentFlowchart}},{key:"removeFlowchart",value:function(){}},{key:"selectFlowchart",value:function(){var t,e;null===(t=this.flowchartHandler)||void 0===t||t.setCurrentFlowchart(this.flowchartHandler.currentFlowchartName),this.currentFlowchart=null===(e=this.flowchartHandler)||void 0===e?void 0:e.getCurrentFlowchart(),this.flowchartHandler&&this.currentFlowchart&&(this.currentFlowchartName=this.flowchartHandler.getCurrentFlowchartName(),this.ctrl.notify(this.currentFlowchartName))}},{key:"cancelFlowchart",value:function(){}},{key:"edit",value:function(t){var e,n,r=null===(e=this.flowchartHandler)||void 0===e?void 0:e.getFlowchart(t);r&&!r.data.download&&(null===(n=this.flowchartHandler)||void 0===n||n.openDrawEditor(t))}},{key:"getNames",value:function(){return this.flowchartHandler?this.flowchartHandler.getFlowchartNames():[]}},{key:"getCurrentFlowchart",value:function(){var t,e=null===(t=this.flowchartHandler)||void 0===t?void 0:t.getCurrentFlowchart();return e?[e]:this.flowchartHandler&&this.flowchartHandler.flowcharts.length>0?[this.flowchartHandler.flowcharts[0]]:[]}}])&&ut(e.prototype,n),r&&ut(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ht(t,e,n){return{restrict:"E",scope:!0,templateUrl:"".concat(o.d.getPartialPath(),"/flowcharts/flowchartsTab.html"),controller:ct}}var ft=n(6),dt=n.n(ft);function pt(t){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vt(){vt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==e&&n.call(g,i)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==pt(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var yt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isHidden=!1,this._isHighlighted=!1,this._isBlink=!1,this._surroundHL=new Map,this.percent=100,this._mxcellHL=null,this.uid=o.a.genUid("xcell"),this.graph=e,this.mxcell=n,this.uid=n.getId(),this.gf=this._getDefaultGFXCell(),this.mxcell.gf=this.gf,this._isHidden=!this.graph.model.isVisible(this.mxcell)}var e,n,i;return e=t,i=[{key:"refactore",value:function(e,n){return new t(e,n)}}],(n=[{key:"_getDefaultGFXCell",value:function(){return{defaultValues:{id:void 0,value:void 0,metadata:void 0,link:void 0,styles:void 0,dimension:void 0},tooltip:{enableTooltip:!1,displayMetadata:!1,tooltipHandler:void 0}}}},{key:"_getDefaultValue",value:function(t){this._initDefaultValue(t);var e=this.gf.defaultValues[t];return void 0===e?null:e}},{key:"_initDefaultValue",value:function(t){return void 0===this.gf.defaultValues[t]&&this._setDefaultValue(t),this}},{key:"getDefaultValue",value:function(t){return this._getDefaultValue(t)}},{key:"getValue",value:function(t){switch(t){case"id":return this.getId();case"value":return this.getLabel();case"link":return this.getLink();case"metadata":return this.getDefaultValue("metadata");default:throw new Error("Type ".concat(t," not implemented in method getValue()"))}}},{key:"getValues",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.getDefaultMapOptions(),e=this.getValue(t.identByProp);return"metadata"===t.identByProp&&(e=this.getDefaultMetadatasValues(t.metadata,t.enableRegEx)),e}},{key:"getDefaultValues",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.getDefaultMapOptions(),e=this.getDefaultValue(t.identByProp);return"metadata"===t.identByProp&&(e=this.getDefaultMetadatasValues(t.metadata,t.enableRegEx)),e}},{key:"_setDefaultValue",value:function(t){switch(t){case"id":var e=this.mxcell.getId();return this.gf.defaultValues.id=e,e;case"value":var n=this.getLabel();return this.gf.defaultValues.value=n,n;case"link":var r=this.getLink();this.gf.defaultValues.link=r;case"dimension":this.gf.defaultValues.dimension=this.getDimension();case"metadata":return this.gf.defaultValues.metadata=this.getMetadatas();case"styles":return this._setDefaultStyles();default:throw new Error("Unknow type : "+t)}}},{key:"getId",value:function(){return this.mxcell.getId()}},{key:"getDefaultId",value:function(){return this.getDefaultValue("id")}},{key:"setId",value:function(t){return this._initDefaultValue("id"),this.mxcell.id=t,this}},{key:"restoreId",value:function(){return this.setId(this.getDefaultId()),this}},{key:"getDefaultLabel",value:function(){return this.getDefaultValue("value")}},{key:"getLabel",value:function(){return mxUtils.isNode(this.mxcell.value)?this.mxcell.getAttribute("label"):this.mxcell.getValue()}},{key:"setLabel",value:function(t){return this._initDefaultValue("value"),this.graph.cellLabelChanged(this.mxcell,t,!1),this}},{key:"restoreLabel",value:function(){return this.setLabel(this.getDefaultLabel()),this}},{key:"getDefaultLink",value:function(){return this.getDefaultValue("link")}},{key:"getLink",value:function(){return this.graph.getLinkForCell(this.mxcell)}},{key:"setLink",value:function(t){return this._initDefaultValue("link"),this.graph.setLinkForCell(this.mxcell,t),this}},{key:"restoreLink",value:function(){this.setLink(this.getDefaultLink())}},{key:"getMetadatas",value:function(){var t=new Map;if(this.mxcell&&mxUtils.isNode(this.mxcell.value))for(var e=["label","tooltip","placeholders","placeholder","link"],n=this.mxcell.value.attributes,r=n.length,i=0;i<r;i++)if(!e.includes(n[i].nodeName)){var a=n[i].nodeName,o=n[i].nodeValue;t.set(a,o)}return t}},{key:"setMetadata",value:function(t,e){return this._initDefaultValue("metadata"),this.mxcell.setAttribute(t,e),this}},{key:"getMetadata",value:function(t){return this.mxcell.getAttribute(t)}},{key:"getDefaultMetadatasKeys",value:function(){var t=this._getDefaultValue("metadata");return void 0!==t?Array.from(t.keys()):[]}},{key:"getDefaultMetadatasValues",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._getDefaultValue("metadata"),r=n;if(!e&&r.has(t)){var i=r.get(t);return null!=i?[i]:[]}var a=this.getDefaultMetadatasKeys();if(void 0!==a){for(var s=[],l=a.length,u=0;u<l;u++){var c=a[u];if(o.a.matchString(c,t,e)){var h=r.get(t);null!=h&&s.push(h)}}return s}return[]}},{key:"hasMetadataName",value:function(t){return this.getDefaultMetadatasKeys().includes(t)}},{key:"_matchMetadata",value:function(t,e){for(var n=this.getDefaultMetadatasValues(e.metadata,e.enableRegEx),r=n.length,i=0;i<r;i++){var a=n[i];if(o.a.matchString(a,t,e.enableRegEx))return!0}return!1}},{key:"_setDefaultMetadatas",value:function(){var t=new Map;if(this.mxcell&&mxUtils.isNode(this.mxcell.value))for(var e=["label","tooltip","placeholders","placeholder","link"],n=this.mxcell.value.attributes,r=n.length,i=0;i<r;i++)if(!e.includes(n[i].nodeName)){var a=n[i].nodeName,o=n[i].nodeValue;t.set(a,o)}return this.gf.defaultValues.metadata=t,t}},{key:"_initDefaultStyle",value:function(t){return void 0!==this.gf.defaultValues.styles&&this.gf.defaultValues.styles.has(t)||this._setDefaultStyle(t),this}},{key:"_setDefaultStyles",value:function(){return void 0===this.gf.defaultValues.styles&&(this.gf.defaultValues.styles=new Map),this.gf.defaultValues.styles}},{key:"_setDefaultStyle",value:function(t){void 0===this.gf.defaultValues.styles&&this._setDefaultStyles();var e=this.graph.view.getState(this.mxcell),n=null;return e&&(n=e.style[t]),void 0!==this.gf.defaultValues.styles&&this.gf.defaultValues.styles.set(t,n),n}},{key:"getDefaultStyle",value:function(t){return void 0!==this.gf.defaultValues.styles&&this.gf.defaultValues.styles.has(t)?this.gf.defaultValues.styles.get(t):this._setDefaultStyle(t)}},{key:"setStyle",value:function(t,e){return this._initDefaultStyle(t),this.graph.setCellStyles(t,e,[this.mxcell]),this}},{key:"getStyle",value:function(t){var e=this.graph.view.getState(this.mxcell);return e?e.style[t]:null}},{key:"isStyleChanged",value:function(t){return this.getDefaultStyle(t)===this.getStyle(t)}},{key:"restoreStyle",value:function(t){var e=this.getDefaultStyle(t);return this.setStyle(t,e),this}},{key:"getDefaultDimension",value:function(){return this.getDefaultValue("dimension")}},{key:"getDimension",value:function(){return this.graph.model.getGeometry(this.mxcell)}},{key:"setDimension",value:function(t){return Object(r.a)(this,void 0,void 0,vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.graph.resizeCell(this.mxcell,t,!0);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"restoreDimension",value:function(){return Object(r.a)(this,void 0,void 0,vt().mark((function t(){var e;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.getDefaultValue("dimension"),this.setDimension(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getMxCell",value:function(){return this.mxcell}},{key:"getMxCellState",value:function(){return this.graph.view.getState(this.mxcell)}},{key:"isVertex",value:function(){return this.mxcell.isVertex()}},{key:"getSvgNode",value:function(){var t=this.getMxCellState();return t&&t.shape.node?t.shape.node:null}},{key:"cloneSVG",value:function(){var t=document.createElement("svg"),e=this.getSvgNode();if(null!==e){var n=e.cloneNode(!0);return t.appendChild(n),t}return t}},{key:"cloneMxCell",value:function(){return this.graph.cloneCell(this.mxcell,!0)}},{key:"match",value:function(t,e){if("id"===e.identByProp||"value"===e.identByProp){var n=this.getDefaultValue(e.identByProp);return o.a.matchString(n,t,e.enableRegEx)}if("metadata"===e.identByProp)return this._matchMetadata(t,e);throw new Error("Type is unknown : "+e)}},{key:"hide",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!this._isHidden&&t?this.graph.model.setVisible(this.mxcell,!1):this._isHidden&&!t&&this.graph.model.setVisible(this.mxcell,!0),this._isHidden=t}},{key:"show",value:function(){this.hide(!1)}},{key:"isHidden",value:function(){return this._isHidden}},{key:"highlight",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=o.b.CONF_HIGHTLIGHT_COLOR;!this._isHighlighted&&t?(this._isHighlighted=!0,this.surround(e,!0,!0)):this._isHighlighted&&!t&&(this.surround(e,!0,!1),this._isHighlighted=!1),this._isHighlighted=t}},{key:"unhighlight",value:function(){this.highlight(!1)}},{key:"isHighlighted",value:function(){return this._isHighlighted}},{key:"collapse",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.graph.isCellCollapsed(this.mxcell);!e&&t?this.graph.foldCells(!0,!1,[this.mxcell],null,null):e&&!t&&this.graph.foldCells(!1,!1,[this.mxcell],null,null)}},{key:"isCollapsed",value:function(){return this.graph.isCellCollapsed(this.mxcell)}},{key:"expand",value:function(){this.collapse(!1)}},{key:"enableTooltip",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.gf.tooltip.enableTooltip=t,t||(this.gf.tooltip.tooltipHandler&&this.gf.tooltip.tooltipHandler.destroy(),this.gf.tooltip.tooltipHandler=void 0),this}},{key:"setTooltipHandler",value:function(t){return this.gf.tooltip.tooltipHandler=t,this}},{key:"zoom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return Object(r.a)(this,void 0,void 0,vt().mark((function e(){var n,r,i,a,o,s,l,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.getDefaultDimension(),100!==t?(this._initDefaultValue("dimension"),null!==n&&(r=n.x,i=n.width,a=n.y,o=n.height,r-=((s=i*(t/100))-i)/2,a-=((l=o*(t/100))-o)/2,u=new mxRectangle(r,a,s,l),this.setDimension(u),this.percent=t)):100!==this.percent&&(this.setDimension(n),this.percent=100);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"resize",value:function(t,e){return Object(r.a)(this,void 0,void 0,vt().mark((function n(){var r,i,a,o,s,l,u,c;return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this._initDefaultValue("dimension"),null!==(r=this.getDimension())&&(i=r.x,a=r.width,o=r.y,s=r.height,i=void 0!==t&&t<0?i+t+a:i,o=void 0!==e&&e<0?o+e+s:o,l=void 0!==e?Math.abs(e):r.height,u=void 0!==t?Math.abs(t):r.width,c=new mxRectangle(i,o,u,l),this.setDimension(c));case 3:case"end":return n.stop()}}),n,this)})))}},{key:"isSurrounded",value:function(t){return void 0!==this._surroundHL?this._surroundHL.has(t):(this._surroundHL=new Map,!1)}},{key:"surround",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r&&!this.isSurrounded(t)){var i=100,a=this.getMxCellState();if(null!==a){var o=Math.max(5,mxUtils.getValue(a.style,mxConstants.STYLE_STROKEWIDTH,1)+4),s=new mxCellHighlight(this.graph,t,o,!1);null!==i&&(s.opacity=i),s.highlight(a),this._surroundHL.set(t,s)}}else if(!r&&this.isSurrounded(t)){var l=this._surroundHL.get(t),u=300;l&&null!==l.shape&&void 0!==l.shape&&(n&&mxUtils.setPrefixedStyle(l.shape.node.style,"transition","all ".concat(u,"ms ease-in-out")),l.shape.node.style.opacity=0,n?window.setTimeout((function(){l.destroy(),e._surroundHL.delete(t)}),u):(l.destroy(),this._surroundHL.delete(t)))}return this}},{key:"unsurround",value:function(){return this.surround("",!1),this}},{key:"blink",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="blink-".concat(this.uid),r=o.b.CONF_BLINK_COLOR;if(e&&!this._isBlink){this._isBlink=!0;var i=o.f.create(n);i.addStep(this.surround.bind(this,r,!1),t),i.addStep(this.surround.bind(this,r,!1,!1),2*t),i.setCyclic(),i.start()}else!e&&this._isBlink&&(o.f.stop(n),this.surround(r,!1,!1),this._isBlink=!1);this._isBlink=e}},{key:"unblink",value:function(){this.blink(1e3,!1)}},{key:"isBlink",value:function(){return this._isBlink}},{key:"addOverlay",value:function(t){var e,n,r;return this.graph.addCellOverlay(this.mxcell,(e=this.graph.warningImage,n="State: ".concat(t),(r=new mxCellOverlay(e,n)).addListener(mxEvent.CLICK,(function(t,e){mxUtils.alert("".concat(n,"\nLast update: ").concat(new Date))})),r)),this}},{key:"removeOverlay",value:function(){return Object(r.a)(this,void 0,void 0,vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.graph.removeCellOverlays(this.mxcell),t.abrupt("return",this);case 2:case"end":return t.stop()}}),t,this)})))}}])&&gt(e.prototype,n),i&&gt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),mt=n(3);function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _t(){_t=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==e&&n.call(g,i)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==bt(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var xt=n(22),kt=["graph_initialized","graph_updated","graph_changed","graph_freed"],Et=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isGraphIniatilized=!1,this._xmlGraph="",this._csvGraph="",this._type="xml",this._graph=void 0,this._scale=!0,this._tooltip=!0,this._lock=!0,this._center=!0,this._AllowDioRessources=!1,this._animation=!0,this._definition="",this._cumulativeZoomFactor=1,this._grid=!1,this._zoomPercent="1",this.events=a.a.create(kt),this.$gf=e,this.uid=o.a.genUid(this.constructor.name),this.container=n,this._type=r,this.xcells=[],this._definition=i,this.init()}var e,n,i;return e=t,i=[{key:"isMxGraphStyle",value:function(t){var e=t;return o.b.MXGRAPH_STYLES.includes(e)}},{key:"isMxGraphAnimStyle",value:function(t){var e=t;return o.b.MXGRAPH_STYLES_ANIM.includes(e)}},{key:"isMxGraphStaticStyle",value:function(t){var e=t;return o.b.MXGRAPH_STYLES_STATIC.includes(e)}},{key:"preview",value:function(t,e){var n=new Graph(t);if(n)try{var r=n.getModel();r.beginUpdate(),r.clear();var i=e.cloneMxCell();n.setTooltips(!1);var a=r.getChildAt(r.getRoot(),0);r.add(a,i),n.updateCssTransform(),n.selectUnlockedLayer(),n.view.rendering=!0,n.setEnabled(!1),n.getModel().endUpdate();var s=2,l=3,u=n.getGraphBounds(),c=n.container.clientWidth-s,h=n.container.clientHeight-s,f=u.width/n.view.scale,d=u.height/n.view.scale,p=Math.min(l,Math.min(c/f,h/d));n.view.scaleAndTranslate(p,(s+c-f*p)/(2*p)-u.x/n.view.scale,(s+h-d*p)/(2*p)-u.y/n.view.scale)}catch(t){o.c.error("Error in preview",t)}}}],(n=[{key:"init",value:function(){return this._eventsConnect(),"xml"===this._type&&(mt.a.isEncoded(this._definition)?this._xmlGraph=mt.a.decode(this._definition):this._xmlGraph=this._definition),"csv"===this._type&&(this._csvGraph=this._definition),mt.a.isInitalized()&&this.init_graph(),this}},{key:"change",value:function(){return this.events.emit("graph_changed",this),this}},{key:"update",value:function(){return this.update_graph(),this.events.emit("graph_updated",this),this}},{key:"clear",value:function(){this.xcells=[]}},{key:"free",value:function(){return o.c.debug("".concat(this.constructor.name,".").concat("free","() : ").concat(this.uid)),this.free_graph(),this.clear(),this.events.emit("graph_freed",this),this._eventsDisconnect(),this.events.clear(),this}},{key:"source",get:function(){return"csv"===this._type?this._csvGraph:this._xmlGraph},set:function(t){"xml"===this._type&&(this._xmlGraph=t),"csv"===this._type&&this._csvGraph===t&&(this._csvGraph=t)}},{key:"_eventsConnect",value:function(){this.$gf.events.connect("debug_asked",this,this._on_global_debug_asked.bind(this)),mt.a.events.connect("drawio_initialized",this,this._on_drawio_drawio_initialized.bind(this))}},{key:"_eventsDisconnect",value:function(){this.$gf.events.disconnect("debug_asked",this),mt.a.events.disconnect("drawio_initialized",this)}},{key:"init_graph",value:function(){return Object(r.a)(this,void 0,void 0,_t().mark((function t(){return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._isGraphIniatilized||!mt.a.isInitalized()){t.next=13;break}return this._isGraphIniatilized=!0,t.next=4,this._init_mxGraph();case 4:return this._init_fonts(),t.next=7,this._display();case 7:return t.next=9,this.update_options();case 9:return t.next=11,this._init_xcells();case 11:this.events.emit("graph_initialized"),this.change();case 13:return t.abrupt("return");case 14:case"end":return t.stop()}}),t,this)})))}},{key:"isInitialized",value:function(){return this._isGraphIniatilized}},{key:"_init_mxGraph",value:function(){return Object(r.a)(this,void 0,void 0,_t().mark((function t(){return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._graph=new Graph(this.container),this._graph.setPanning(!0),this.dioClick=this._graph.click.bind(this._graph),this._graph.click=this._on_xgraph_mxcell_clicked.bind(this),this.dioDbclick=this._graph.dblClick,mxEvent.addMouseWheelListener(mxUtils.bind(this,this.eventMouseWheel),this.container),(mxClient.IS_IE||mxClient.IS_EDGE)&&mxEvent.addListener(this.container,"wheel",mxUtils.bind(this,this.eventMouseWheel)),mxEvent.addListener(document,"keydown",mxUtils.bind(this,this.eventKey)),this.container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._graph.dblClick=this.eventDbClick.bind(this),t.abrupt("return");case 11:case"end":return t.stop()}}),t,this)})))}},{key:"_display",value:function(){if(void 0===this._graph)throw new Error("Graph class was not created");this._graph.getModel().beginUpdate(),this._graph.getModel().clear();try{if("xml"===this._type){var t=mxUtils.parseXml(this._xmlGraph),e=new mxCodec(t);this._graph.model.clear(),this._graph.view.scale=1,e.decode(t.documentElement,this._graph.getModel()),this._init_fonts(),this._graph.updateCssTransform(),this._graph.selectUnlockedLayer()}if("csv"===this._type)try{xt.importCsv(this._graph,this._csvGraph),this.update_graph()}catch(t){o.c.error("Bad CSV format",t),this.$gf.notify("Bad CSV format","error")}}catch(t){o.c.error("Error in draw",t)}finally{this._graph.getModel().endUpdate(),this._init_xcells()}return this}},{key:"_init_xcells",value:function(){return Object(r.a)(this,void 0,void 0,_t().mark((function t(){var e,n,i=this;return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this._graph.getModel(),this.xcells=[],n=Object.values(e.cells),t.abrupt("return",Promise.all(n.map((function(t){return Object(r.a)(i,void 0,void 0,_t().mark((function e(){var n;return _t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=yt.refactore(this._graph,t),this.xcells.push(n);case 2:case"end":return e.stop()}}),e,this)})))}))));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"_init_fonts",value:function(){var t;return Object(r.a)(this,void 0,void 0,_t().mark((function e(){var n,r,i;return _t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._graph){e.next=2;break}return e.abrupt("return");case 2:if(n=this._graph.getModel(),r=n.extFonts)try{for(r=r.split("|").map((function(t){var e=t.split("^");return{name:e[0],url:e[1]}})),i=0;i<r.length;i++)null===(t=this._graph)||void 0===t||t.addExtFont(r[i].name,r[i].url)}catch(t){o.c.error("ExtFonts format error:",t.message)}return e.abrupt("return");case 6:case"end":return e.stop()}}),e,this)})))}},{key:"update_options",value:function(){return Object(r.a)(this,void 0,void 0,_t().mark((function t(){return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isInitialized()){t.next=2;break}return t.abrupt("return",this);case 2:return this.zoomDisplay(),this.enableTooltip(),this.enableLock(),this.scaleDisplay(),this.centerDisplay(),this.gridDisplay(),this.enableDioRessources(),this.enableAnimation(),this._graph.foldingEnabled=!0,this._graph.cellRenderer.forceControlClickHandler=!0,t.abrupt("return");case 13:case"end":return t.stop()}}),t,this)})))}},{key:"update_graph",value:function(){return this.isInitialized()?(this._cumulativeZoomFactor=1,this._graph.zoomActual(),this.update_options(),this._graph.refresh(),this):this}},{key:"free_graph",value:function(){var t;return null===(t=this._graph)||void 0===t||t.destroy(),this._graph=void 0,this}},{key:"enableLock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._lock;return this._lock=t,this.isInitialized()?(t?this._graph.setEnabled(!1):this._graph.setEnabled(!0),this):this}},{key:"enableTooltip",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._tooltip;return this._tooltip=t,this._isGraphIniatilized?(t?this._graph.setTooltips(!0):this._graph.setTooltips(!1),this):this}},{key:"anonymize",value:function(){return Object(r.a)(this,void 0,void 0,_t().mark((function t(){return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:xt.anonymize(this._graph);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"enableDioRessources",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._AllowDioRessources;return this._isGraphIniatilized?(this._AllowDioRessources=t,this._isGraphIniatilized?t?(mxUrlConverter.prototype.baseUrl=o.b.CONF_EDITOR_URL,mxUrlConverter.prototype.baseDomain="",this):(mxUrlConverter.prototype.baseUrl=null,mxUrlConverter.prototype.baseDomain=null,this):this):this}},{key:"enableAnimation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._animation;return this._animation=t,this}},{key:"centerDisplay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._center;return this._center=t,this._isGraphIniatilized?(this._graph.centerZoom=!1,!0===this._center&&(!0===this._scale?this._fitDisplay():this._graph.center(!0,!0)),!1===this._center&&this._graph.center(!1,!1),this):this}},{key:"scaleDisplay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._scale;return this._scale=t,this._isGraphIniatilized?(!1===this._scale&&this.zoomDisplay(),!0===this._scale?(this._center?this._fitDisplay():(this._graph.fit(),this._graph.zoomActual()),this):this):this}},{key:"_fitDisplay",value:function(){if(!this._isGraphIniatilized)return this;var t=this._graph.getGraphBounds(),e=this._graph.container.clientWidth-2,n=this._graph.container.clientHeight-2,r=t.width/this._graph.view.scale,i=t.height/this._graph.view.scale,a=Math.min(3,Math.min(e/r,n/i));return this._graph.view.scaleAndTranslate(a,(2+e-r*a)/(2*a)-t.x/this._graph.view.scale,(2+n-i*a)/(2*a)-t.y/this._graph.view.scale),this}},{key:"gridDisplay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._grid;return this._grid=t,this.container.style.backgroundImage=t?"url('data:image/gif;base64,R0lGODlhCgAKAJEAAAAAAP///8zMzP///yH5BAEAAAMALAAAAAAKAAoAAAIJ1I6py+0Po2wFADs=')":"",this}},{key:"zoomDisplay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._zoomPercent;if(this._zoomPercent=t,!this.isInitialized())return this;if(this._scale)this._fitDisplay();else{if(t&&t.length>0&&"100%"!==t&&"0%"!==t){var e=Number(t.replace("%",""))/100;this._graph.zoomTo(e,!0)}this._graph.zoomActual()}return this}},{key:"getMxGraph",value:function(){return this._graph}},{key:"getXCells",value:function(){return this.xcells}},{key:"getXCellValues",value:function(t){var e=[];return this.getXCells().forEach((function(n){return e.push(n.getDefaultValue(t))})),e}},{key:"getXCell",value:function(t){for(var e=this.xcells.length,n=0;n<e;n++){var r=this.xcells[n];if(r.getDefaultValue("id")===t)return r}}},{key:"findXCells",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.getDefaultMapOptions(),n=this.getXCells(),r=[],i=n.length,a=0;a<i;a++){var o=n[a];o.match(t,e)&&r.push(o)}return r}},{key:"highlightXCells",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(r.a)(this,void 0,void 0,_t().mark((function i(){var a,o=this;return _t().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=this.findXCells(t,e),i.abrupt("return",a.map((function(t){return Object(r.a)(o,void 0,void 0,_t().mark((function e(){return _t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.highlight(n);case 1:case"end":return e.stop()}}),e)})))})));case 2:case"end":return i.stop()}}),i,this)})))}},{key:"unhighlightXCells",value:function(t,e){return Object(r.a)(this,void 0,void 0,_t().mark((function n(){return _t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.highlightXCells(t,e,!1));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"getDefaultValues",value:function(t){return this.getXCellValues(t.identByProp)}},{key:"getDefaultValuesWithKey",value:function(t,e){for(var n=this.getXCells(),r=n.length,i=new Set,a=0;a<r;a++)n[a].getDefaultValues(t).forEach((function(t){null!=t&&t.length>0&&i.add(t)}));return Array.from(i.keys())}},{key:"getXmlModel",value:function(){var t=(new mxCodec).encode(this._graph.getModel());return mxUtils.getXml(t)}},{key:"isAnimated",value:function(){return this._animation}},{key:"setAnimColorCell",value:function(t,e,n){if(this.isAnimated()&&n)try{var r="".concat(e,"-").concat(this.uid,"-").concat(t.uid),i=t.getStyle(e);if(i){for(var a=n,s=dt.a.scale([i,a]).mode("lrgb").colors(o.b.CONF_COLORS_STEPS+1),l=o.f.create(r),u=o.b.CONF_COLORS_MS,c=1;c<s.length;c++)l.addStep(t.setStyle.bind(t,e,s[c]),u*c);l.start()}else{var h=dt()(n).hex();t.setStyle(e,h)}}catch(r){o.c.error("Error on graduate color",r),t.setStyle(e,n)}else{if(null!==n)try{n=dt()(n).hex()}catch(t){o.c.error("Invalid Color",n)}t.setStyle(e,n)}return this}},{key:"setAnimStyleCell",value:function(t,e,n,i){return Object(r.a)(this,void 0,void 0,_t().mark((function r(){var a,s,l,u,c,h,f,d;return _t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.isAnimated()&&null!==n)try{if(a=Number(n),s=Number(void 0!==i?i:t.getStyle(e)),a!==s){for(l="".concat(e,"-").concat(this.uid,"-").concat(t.uid),u=o.a.calculateIntervalCounter(s,a,o.b.CONF_ANIMS_STEP),c=u.length,h=o.f.create(l),f=o.b.CONF_ANIMS_MS,d=1;d<c;d++)h.addStep(t.setStyle.bind(t,e,u[d].toString()),f*d);h.start()}}catch(r){this._graph.setCellStyles(e,n,[t])}else t.setStyle(e,n);case 1:case"end":return r.stop()}}),r,this)})))}},{key:"eventDebug",value:function(t){}},{key:"eventDbClick",value:function(t,e){if(void 0!==e){var n=this.getXCell(e.id);n&&this.lazyZoomCell(n)}}},{key:"eventMouseWheel",value:function(t,e){if(this._graph.isZoomWheelEvent(t)&&this.$gf.ctrl.isMouseInPanel()){null==e&&(e=t.deltaY<0);var n=this.container.getBoundingClientRect(),r=t.clientX-n.left,i=t.clientY-n.top;this._cumulativeZoomFactor=e?1.2*this._cumulativeZoomFactor:.8*this._cumulativeZoomFactor,this.lazyZoomPointer(this._cumulativeZoomFactor,r,i),mxEvent.consume(t)}}},{key:"eventKey",value:function(t){mxEvent.isConsumed(t)||27!==t.keyCode||this.update_graph()}},{key:"lazyZoomCenter",value:function(t){return Object(r.a)(this,void 0,void 0,_t().mark((function e(){return _t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._graph.zoomTo(t,!0);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"lazyZoomPointer",value:function(t,e,n){return Object(r.a)(this,void 0,void 0,_t().mark((function r(){var i,a,o,s,l;return _t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=2*e,a=2*n,t=Math.max(.01,Math.min(this._graph.view.scale*t,160))/this._graph.view.scale,t=this._cumulativeZoomFactor/this._graph.view.scale,o=Math.round(this._graph.view.scale*t*100)/100,(t=o/this._graph.view.scale)>1?(i*=-(s=(t-1)/(2*o)),a*=-s):(l=(1/t-1)/(2*this._graph.view.scale),i*=l,a*=l),this._graph.view.scaleAndTranslate(o,this._graph.view.translate.x+i,this._graph.view.translate.y+a);case 8:case"end":return r.stop()}}),r,this)})))}},{key:"highlightCells",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getXCells();return Object(r.a)(this,void 0,void 0,_t().mark((function e(){var n;return _t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=0;n<t.length;n++)t[n].highlight();case 1:case"end":return e.stop()}}),e)})))}},{key:"unhighlightCells",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getXCells();return Object(r.a)(this,void 0,void 0,_t().mark((function e(){var n;return _t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=0;n<t.length;n++)t[n].highlight(!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"setAnimZoomCell",value:function(t,e){return Object(r.a)(this,void 0,void 0,_t().mark((function n(){var r,i,a,s,l,u;return _t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.isAnimated()){for(r="setAnimZoomCell-".concat(this.uid).concat(t.getId),i=o.a.calculateIntervalCounter(t.percent,e,o.b.CONF_ANIMS_STEP),a=o.f.create(r),s=i.length,l=o.b.CONF_ANIMS_MS,u=1;u<s;u++)a.addStep(t.zoom.bind(t,i[u]),l*u);a.start()}else t.zoom(e);case 1:case"end":return n.stop()}}),n,this)})))}},{key:"setAnimSizeCell",value:function(t,e,n){return Object(r.a)(this,void 0,void 0,_t().mark((function r(){var i,a,s,l,u,c,h,f,d,p;return _t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=t.getDimension(),a=void 0!==e&&e>=0?1:-1,s=void 0!==n&&n>=0?1:-1,e=void 0!==e?e:void 0,n=void 0!==n?n:void 0,this.isAnimated()){for(l="setAnimSizeCell-".concat(this.uid,"-").concat(t.getId()),u=o.a.calculateIntervalCounter(i.width*a,e,o.b.CONF_ANIMS_STEP),c=o.a.calculateIntervalCounter(i.height*s,n,o.b.CONF_ANIMS_STEP),h=u.length,f=o.f.create(l),d=o.b.CONF_ANIMS_MS,p=1;p<h;p++)f.addStep(t.resize.bind(t,u[p],c[p]),d*p);f.start()}else t.resize(e,n);case 6:case"end":return r.stop()}}),r,this)})))}},{key:"lazyZoomCell",value:function(t){return Object(r.a)(this,void 0,void 0,_t().mark((function e(){var n,r;return _t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isVertex()&&null!==(n=t.getMxCellState())&&(r=void 0!==n.width&&n.width>0&&void 0!==n.height&&n.height>0?n.shape.bounds:n.text.boundingBox,this._graph.zoomToRect(r),this._cumulativeZoomFactor=this._graph.view.scale);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"_on_global_debug_asked",value:function(){this.constructor.name,this.constructor.name}},{key:"_on_drawio_drawio_initialized",value:function(){this.constructor.name,this.init_graph()}},{key:"_on_xgraph_mxcell_clicked",value:function(t){this.constructor.name,this.dioClick(t);var e=t.getState();if(e){var n=this.getXCell(e.cell.id);this.$gf.events.emit("xcell_clicked",n)}}}])&&wt(e.prototype,n),i&&wt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Tt.$inject=["$q","uiSegmentSrv"];var St=function(){function t(e,n,r){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.enable=!1,this.indexTable=0,this.pressed=!1,this.startX=0,this.startWidth=0;var a=0;this.statesTableData={data:this.getStates(),columns:[{index:a++,id:"expand",label:"<>",desc:"Show/Hide detail",width:"30px",sort:"asc",select:!1},{index:a++,id:"id",label:"ID",desc:"Uniq Id",width:"100px",sort:"asc",select:!1},{index:a++,id:"label",label:"Label",desc:"Text/Label",width:"100px",sort:"asc",select:!1},{index:a++,id:"shape",label:"Shape",desc:"Draw.io shape model",width:"100px",sort:"asc",select:!1},{index:a++,id:"level",label:"Lvl",desc:"Current level",width:"45px",sort:"asc",select:!1},{index:a++,id:"rval",label:"R.Val.",desc:"Raw value",width:"80px",sort:"asc",select:!1},{index:a++,id:"fval",label:"F.Val.",desc:"Formated value",width:"80px",sort:"asc",select:!1},{index:a++,id:"colors",label:"Colors",desc:"Shape ID",width:"80px",sort:"asc",select:!1},{index:a++,id:"tags",label:"Tags",desc:"Tags",width:"100px",sort:"asc",select:!1}]},e.editor=this;var s=n.find("#templateInspect");this.parentDiv=s[0];var l=s.find("#StatesTable")[0];this.statesTable=new o.e(this.statesTableData,l),this.ctrl=e.ctrl,e.GFPlugin=this.ctrl.GFPlugin,e.$GF=this.ctrl.$gf,this.$sce=r,this.$gf=this.ctrl.$gf,this.flowchartHandler=this.ctrl.flowchartHandler,this.stateHandler=null===(i=this.flowchartHandler)||void 0===i?void 0:i.getFlowchart().getStateHandler()}var e,n,r;return t.$inject=["$scope","$element","$sce"],e=t,(n=[{key:"initPreview",value:function(t){var e=document.getElementById("preview-".concat(t.xcell.getId()));return null!==e&&(e.innerHTML="",Et.preview(e,t.getXCell())),!0}},{key:"renderStyles",value:function(t){var e=this,n='<div class="gf-table-content" style="text-align: center;">';return["fontColor","fillColor","strokeColor"].forEach((function(r){n="".concat(n,'\n\n      <div style="display:table-cell;vertical-align:middle;">\n        ').concat(e.renderStyle(t,r),"\n      </div>\n      ")})),n+="</div>",this.$sce.trustAsHtml(n)}},{key:"renderStyle",value:function(t,e){var n,r,i=t.getStatus(e),a="";if(!(t.haveStatus(e)&&i.length>0&&"none"!==i))return this.$sce.trustAsHtml(a);switch(e){case"fillColor":n="F",r="Fill color";break;case"strokeColor":n="S",r="Border/stroke color";break;case"fontColor":n="T",r="Text/Font color"}return a='\n      <div title="'.concat(r," : ").concat(i,'"\n          class="gf-inspect-color-picker"\n          style="background-color: ').concat(i,';">\n          <span>').concat(n,"</span>\n      </div>\n    "),this.$sce.trustAsHtml(a)}},{key:"getStates",value:function(){if(this.stateHandler){var t=this.stateHandler.getStatesForInspect();return Object(s.orderBy)(t,["cellId","globalLevel"],["asc"])}return[]}},{key:"anonymize",value:function(){var t,e=null===(t=this.flowchartHandler)||void 0===t?void 0:t.getFlowchart(),n=null==e?void 0:e.getXGraph();n&&n.anonymize()}}])&&Ot(e.prototype,n),r&&Ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Tt(t,e){return{restrict:"E",scope:!0,templateUrl:"".concat(o.d.getPartialPath(),"inspect/inspectTab.html"),controller:St}}function Lt(t){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mt(){Mt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==e&&n.call(g,i)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==Lt(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function Ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Dt=["rule_created","rule_updated","rule_changed","rule_deleted"],At=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.activeRuleIndex=0,this.events=a.a.create(Dt),this.$gf=e,this.$gf.rulesHandler=this,this.uid=o.a.genUid(this.constructor.name),this.rules=[],this.data=n,r&&this._convert(r),this.init()}var e,n,i;return e=t,i=[{key:"getDefaultData",value:function(){return{rulesData:[I.getDefaultData()]}}}],(n=[{key:"clear",value:function(){return o.c.debug(this.constructor.name+".clear()"),this.rules.forEach((function(t){return t.clear()})),this.rules=[],this.data.rulesData=[],this}},{key:"init",value:function(){return o.c.debug(this.constructor.name+".init()"),this.$gf.events.connect("debug_asked",this,this._on_global_debug_asked.bind(this)),this.$gf.events.connect("panel_closed",this,this._on_global_panel_closed.bind(this)),this}},{key:"update",value:function(){return o.c.debug(this.constructor.name+".refresh()"),this.rules.forEach((function(t){return t.update()})),this}},{key:"change",value:function(){return o.c.debug(this.constructor.name+".change()"),this.rules.forEach((function(t){return t.change()})),this}},{key:"free",value:function(){return o.c.debug(this.constructor.name+".free()"),this.$gf.events.disconnect("debug_asked",this),this.$gf.events.disconnect("panel_closed",this),this.rules.forEach((function(t){return t.free()})),this.clear(),this.events.clear(),this.$gf.rulesHandler=void 0,this}},{key:"setData",value:function(t){return this.data=t,this}},{key:"_convert",value:function(t){var e=this;o.c.info("RuleHandler.import()"),this.clear();var n,i=1;return null!=t&&((n=Array.isArray(t)?t:t.rulesData).length>0&&void 0!==n[0].order&&(n=Object(s.sortBy)(Object(s.sortBy)(n,(function(t){return t.order})))),n.map((function(t){return Object(r.a)(e,void 0,void 0,Mt().mark((function e(){var n;return Mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.addRule("",t)).setOrder(i),i+=1,this.events.emit("rule_created",n);case 4:case"end":return e.stop()}}),e,this)})))}))),this.change(),this}},{key:"getRules",value:function(){return this.rules}},{key:"getRule",value:function(t){if("number"==typeof t)return this.rules[t];for(var e=0;e<this.rules.length;e++){var n=this.rules[e];if(t===n.name)return n}return null}},{key:"addRule",value:function(t,e){var n=I.getDefaultData(),r=new I(this.$gf,t,n,e);return this.rules.push(r),this.data.rulesData.push(n),r.setOrder(this.countRules()),r.events.connect("rule_updated",this,this._on_rule_rule_updated.bind(this)),r.events.connect("rule_changed",this,this._on_rule_rule_changed.bind(this)),r}},{key:"countRules",value:function(){return void 0!==this.rules&&Array.isArray(this.rules)?this.rules.length:0}},{key:"setOrder",value:function(){for(var t=this.rules.length,e=0;e<t;e++)this.rules[e].setOrder(e+1);return this}},{key:"removeRule",value:function(t){o.c.debug(this.constructor.name+".removeRule()",t),t.events.disconnect("rule_updated",this),t.events.disconnect("rule_changed",this);var e=t.getOrder()-1;return t.free(),this.rules.splice(e,1),this.data.rulesData.splice(e,1),this.setOrder(),this}},{key:"cloneRule",value:function(t){o.c.debug(this.constructor.name+".cloneRule()",t);var e=t.getOrder()-1,n=t.getData(),r=I.getDefaultData();this.reduce();var i=new I(this.$gf,r.pattern,r,n);return r.alias="Copy of ".concat(r.alias),this.rules.splice(e,0,i),this.data.rulesData.splice(e,0,r),i.data.reduce=!1,this.activeRuleIndex=e,this.setOrder(),o.a.setFocus(i.uid),i}},{key:"reduce",value:function(){return this.getRules().forEach((function(t){t.reduce=!0})),this}},{key:"moveRuleToUp",value:function(t){var e=t.getOrder()-1,n=this.rules,r=n.length-1;if(0!==e&&0!==r){var i=n[e];i.setOrder(e);var a=n[e-1];a.setOrder(e+1),n[e-1]=i,n[e]=a}}},{key:"moveRuleToDown",value:function(t){var e=t.getOrder()-1,n=this.rules,r=n.length-1;if(e!==r&&0!==r){var i=n[e];i.setOrder(e+2);var a=n[e+1];a.setOrder(e+1),n[e+1]=i,n[e]=a}}},{key:"_on_rule_rule_updated",value:function(t){this.constructor.name,this.events.emit("rule_updated",t)}},{key:"_on_rule_rule_changed",value:function(t){this.constructor.name,this.events.emit("rule_changed",t)}},{key:"_on_global_debug_asked",value:function(){this.constructor.name,this.constructor.name}},{key:"_on_global_panel_closed",value:function(){this.free()}}])&&Ct(e.prototype,n),i&&Ct(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Pt=n(9),Nt=n.n(Pt);function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&It(t,e)}function It(t,e){return(It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gt(t);if(e){var i=Gt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ht(this,n)}}function Ht(t,e){if(e&&("object"===Rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Gt(t){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ut(t,e,n){return e&&Vt(t.prototype,e),n&&Vt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Bt=function(){function t(){zt(this,t),this.timeFormat="YYYY-MM-DD HH:mm:ss",this.checked=!1,this.metadata=null,this.div=null,this.checked=!1,this.metrics=new Set}return Ut(t,[{key:"isChecked",value:function(){return this.checked}},{key:"addMetric",value:function(){this.checked=!0;var t=new $t;return this.metrics.add(t),t}},{key:"addMetadata",value:function(){return this.checked=!0,this.metadata=new Zt,this.metadata}},{key:"updateDate",value:function(){this.lastChange=o.a.getCurrentDate()}},{key:"destroy",value:function(){this.metrics.clear()}},{key:"getDiv",value:function(t){if(null!==this.div&&void 0!==this.div)return t&&this.div&&t.appendChild(this.div),this.div;if(!this.checked)return null;var e=document.createElement("div");return void 0!==t&&t.appendChild(e),this.metrics.size>0&&(this.getDateDiv(e),this.metrics.forEach((function(t){t.getDiv(e)}))),void 0!==this.metadata&&null!==this.metadata&&this.metadata.getDiv(e),this.div=e,e}},{key:"getDateDiv",value:function(t){var e=document.createElement("div");return void 0!==t&&t.appendChild(e),e.className="graph-tooltip-time tooltip-date",e.innerHTML="".concat(this.lastChange),e}}]),t}(),$t=function(){function t(){zt(this,t),this.direction="v",this.color="#8c8980",this.graphs=new Set,this.label="",this.value=""}return Ut(t,[{key:"setLabel",value:function(t){return this.label=t,this}},{key:"setValue",value:function(t){return this.value=t,this}},{key:"setColor",value:function(t){return null!==t&&(this.color=t),this}},{key:"setDirection",value:function(t){return this.direction=t,this}},{key:"getDiv",value:function(t){var e=document.createElement("div");return e.className="tooltip-metric","h"===this.direction&&(e.style.display="inline-block"),void 0!==t&&t.appendChild(e),this.div=e,this.getTextDiv(e),this.getGraphsDiv(e),e}},{key:"getTextDiv",value:function(t){var e=document.createElement("div");e.className="tooltip-text";var n="";return void 0!==t&&t.appendChild(e),void 0!==this.label&&(n+="".concat(this.label," : "),n+='<span style="color:'.concat(this.color,'"><b>').concat(this.value,"</b></span>")),e.innerHTML=n,e}},{key:"getGraphsDiv",value:function(t){var e=document.createElement("div");return void 0!==t&&t.appendChild(e),this.graphs.size>0&&this.graphs.forEach((function(t){t.getDiv(e)})),e}},{key:"addGraph",value:function(t){var e;switch(t){case"line":e=new Xt;break;case"bar":e=new Wt;break;default:o.c.error("Graph type unknow",t),e=new Wt}return this.graphs.add(e),e}}]),t}(),Yt=function(){function t(){zt(this,t),this.color="#8c8980",this.type="line",this.data={series:[{data:[{x:0,y:0}]}]},this.size="100%",this.low=null,this.high=null,this.scaleType="linear"}return Ut(t,[{key:"getDiv",value:function(t){return this.div}},{key:"setName",value:function(t){return this.name=t,this}},{key:"setColumn",value:function(t){return this.column=t,this}},{key:"setType",value:function(t){return this.type=t,this}},{key:"setSize",value:function(t){return this.size=t,this}},{key:"setMetric",value:function(t){return this.metric=t,this}},{key:"setScaling",value:function(t,e){return this.low=t,this.high=e,this}},{key:"setScale",value:function(t){this.scaleType=t}},{key:"setColor",value:function(t){return null!==t&&(this.color=t),this}},{key:"setParentDiv",value:function(t){return this.parentDiv=t,this}},{key:"getChart",value:function(){return this.chart}}]),t}(),Xt=function(t){Ft(n,t);var e=jt(n);function n(){var t;return zt(this,n),(t=e.call(this)).type="line",t.chartistOptions={showPoint:!1,showLine:!0,showArea:!0,fullWidth:!0,axisX:{showGrid:!1,showLabel:!1,offset:0},axisY:{showGrid:!1,showLabel:!1,offset:0},chartPadding:{top:0,left:0,right:0,bottom:0}},t}return Ut(n,[{key:"getDiv",value:function(t){if(this.metric){var e="log"===this.scaleType;this.data.series[0].data=this.metric.getData(this.column,e)}var n=document.createElement("div"),r=this.color;return this.div=n,void 0!==t&&t.appendChild(n),n.className="ct-chart ct-golden-section",null!==this.size&&(n.style.width=this.size),null!==this.low&&(this.chartistOptions.low=this.low),null!==this.high&&(this.chartistOptions.high=this.high),this.chart=new Nt.a.Line(n,this.data,this.chartistOptions),this.chart.on("draw",(function(t){"line"!==t.type&&"area"!==t.type||("line"===t.type&&t.element.attr({style:"stroke: ".concat(r)}),"area"===t.type&&t.element.attr({style:"fill: ".concat(r)}),t.element.animate({d:{begin:1e3*t.index,dur:1e3,from:t.path.clone().scale(1,0).translate(0,t.chartRect.height()).stringify(),to:t.path.clone().stringify(),easing:Nt.a.Svg.Easing.easeOutQuint}}))})),n}}]),n}(Yt),Wt=function(t){Ft(n,t);var e=jt(n);function n(){var t;return zt(this,n),(t=e.call(this)).type="bar",t.chartistOptions={axisX:{showGrid:!1,showLabel:!1,offset:0},axisY:{showGrid:!1,showLabel:!1,offset:0},chartPadding:{top:0,left:0,right:0,bottom:0}},t}return Ut(n,[{key:"getDiv",value:function(t){if(this.metric){var e="log"===this.scaleType;this.data.series[0].data=this.metric.getData(this.column,e)}var n=document.createElement("div"),r=this.color;this.div=n,void 0!==t&&t.appendChild(n),n.className="ct-chart ct-golden-section",null!==this.size&&(n.style.width=this.size),null!==this.low&&(this.chartistOptions.low=this.low),null!==this.high&&(this.chartistOptions.high=this.high),this.chart=new Nt.a.Bar(n,this.data,this.chartistOptions);var i=0,a=this.data.series[0].data.length,o=Math.round(50/(a/10)),s=Math.round(250/(a/10));return this.chart.on("draw",(function(t){"bar"===t.type&&(t.element.attr({style:"stroke: ".concat(r)}),i++,t.element.animate({opacity:{begin:i*o,dur:s,from:0,to:1,easing:"ease"}}))})),n}}]),n}(Yt),Zt=function(){function t(){zt(this,t),this.enableMetadata=!0,this.div=void 0,this.xcell=void 0}return Ut(t,[{key:"setXCell",value:function(t){return this.xcell=t,this}},{key:"getDiv",value:function(t){var e=document.createElement("div");(e.className="tooltip-metric",this.div=e,void 0!==t&&t.appendChild(e),void 0!==this.xcell)&&this.xcell.getMetadatas().forEach((function(t,n,r){if(null!=n&&n.length>0&&null!=t&&t.length>0){var i=document.createElement("div");i.innerHTML="".concat(n," : <b>").concat(mxUtils.htmlEntities(t),"</b>"),e.appendChild(i)}}));return e}}]),t}();function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(){return(Kt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Jt(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}}).apply(this,arguments)}function Jt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=re(t)););return t}function Qt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&te(t,e)}function te(t,e){return(te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=re(t);if(e){var i=re(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(t,e){if(e&&("object"===qt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ie(){ie=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==e&&n.call(g,i)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==qt(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function se(t,e,n){return e&&oe(t.prototype,e),n&&oe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var le=["state_initialized","state_updated","state_freed"],ue=function(){function t(e,n,r){ae(this,t),this.changed=!1,this.matched=!1,this.globalLevel=-1,this.highestFormattedValue="",this.highestValue=void 0,this.tooltipHandler=null,this.reduce=!0,this._rules=new Map,this.currRules=[],this.currMetrics=[],this.events=a.a.create(le),this.$gf=e,this.uid=o.a.genUid(this.constructor.name),this.xcell=n,this.shapeState=new pe(r,n),this.tooltipState=new ve(r,n),this.iconState=new ge(r,n),this.eventState=new he(r,n),this.textState=new fe(r,n),this.linkState=new de(r,n),this._ObjStates=[this.shapeState,this.tooltipState,this.iconState,this.eventState,this.textState,this.linkState],this._variables=o.g.create(),this._status=new Map,this.tooltipHandler=null,this.init()}return se(t,[{key:"init",value:function(){var t,e,n,r;return this._initCycle(),this.$gf.events.connect("data_updated",this,this._on_global_data_received.bind(this)),this.$gf.events.connect("data_processed",this,this._on_global_data_processed.bind(this)),null===(t=this.$gf.rulesHandler)||void 0===t||t.events.connect("rule_changed",this,this._on_ruleHandler_rule_changed.bind(this)),null===(e=this.$gf.rulesHandler)||void 0===e||e.events.connect("rule_updated",this,this._on_ruleHandler_rule_updated.bind(this)),null===(n=this.$gf.rulesHandler)||void 0===n||n.events.connect("rule_created",this,this._on_ruleHandler_rule_created.bind(this)),null===(r=this.$gf.rulesHandler)||void 0===r||r.events.connect("rule_deleted",this,this._on_ruleHandler_rule_deleted.bind(this)),this.events.emit("state_initialized",this),this}},{key:"update",value:function(){return Object(r.a)(this,void 0,void 0,ie().mark((function t(){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._initCycle();case 2:return t.next=4,this._setCycle();case 4:return this._applyCycle(),this.events.emit("state_updated",this),t.abrupt("return");case 7:case"end":return t.stop()}}),t,this)})))}},{key:"change",value:function(){return this}},{key:"clear",value:function(){return this.currMetrics=[],this.currRules=[],this}},{key:"free",value:function(){var t,e,n,i;return Object(r.a)(this,void 0,void 0,ie().mark((function r(){return ie().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.clear(),this.reset(),this.$gf.events.disconnect("data_updated",this),this.$gf.events.disconnect("data_processed",this),null===(t=this.$gf.rulesHandler)||void 0===t||t.events.disconnect("rule_updated",this),null===(e=this.$gf.rulesHandler)||void 0===e||e.events.disconnect("rule_changed",this),null===(n=this.$gf.rulesHandler)||void 0===n||n.events.disconnect("rule_created",this),null===(i=this.$gf.rulesHandler)||void 0===i||i.events.disconnect("rule_deleted",this),this.events.clear(),r.next=11,this.events.emit("state_freed",this);case 11:case"end":return r.stop()}}),r,this)})))}},{key:"getXCell",value:function(){return this.xcell}},{key:"getLevel",value:function(){return this.globalLevel}},{key:"_setCycle",value:function(t){return Object(r.a)(this,void 0,void 0,ie().mark((function e(){var n=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"setCycle",o.c.debug("".concat(this.constructor.name,".").concat("setCycle","() : ").concat(this.uid)),(void 0===t?Array.from(this._rules.values()):[t]).forEach((function(t){var e=Date.now();if(!t.hidden){var r=t.getShapeMaps(),i=t.getTextMaps(),a=t.getLinkMaps(),s=t.getEventMaps();n._variables.set(o.b.VAR_STR_RULENAME,t.data.alias),Array.from(t.getMetrics().values()).forEach((function(e){try{n.currMetrics.push(e.getName()),n._variables.set(o.b.VAR_STR_METRIC,e.getName)}catch(t){o.c.error(t)}var l=t.getValueForMetric(e),u=t.getFormattedValue(l),c=t.getThresholdLevel(l),h=t.getThresholdColor(l);n._variables.set(o.b.VAR_NUM_VALUE,l),n._variables.set(o.b.VAR_STR_FORMATED,u),n._variables.set(o.b.VAR_NUM_LEVEL,c),n._variables.set(o.b.VAR_STR_COLOR,h),n._variables.set(o.b.VAR_STR_DATE,o.a.getCurrentDate());var f=!1,d=t.getShapeMapOptions(),p=n.xcell.getDefaultValues(d);r.forEach((function(r){var i=r.data.style;if(!r.hidden&&r.match(p,d,n._variables)){var a=h;r.isEligible(c)&&(f=!0,n.matched=!0,n.shapeState.set(i,a,c)&&n._status.set(i,a)),t.toTooltipize(c)&&(i="tooltip",a=!0,n.tooltipState.set("tooltip",!0,c)&&n._status.set(i,a),n.tooltipState.setTooltip(t,e,h,u,n.xcell.getMetadatas())),t.toIconize(c)&&(i="icon",a=!0,n.iconState.set("icon",!0,c)&&n._status.set(i,a))}})),d=t.getTextMapOptions(),p=n.xcell.getDefaultValues(d),i.forEach((function(t){var e="label";if(!t.hidden&&t.match(p,d,n._variables)&&t.isEligible(c)){f=!0,n.matched=!0;var r=n._variables.replaceText(u),i=t.getReplaceText(n.textState.getMatchValue(e),r);n.textState.set(e,i,c)&&n._status.set(e,i)}})),d=t.getEventMapOptions(),p=n.xcell.getDefaultValues(d),s.forEach((function(t){var e=t.data.style;if(!t.hidden&&t.match(p,d,n._variables)&&t.isEligible(c)){f=!0,n.matched=!0;var r=n._variables.eval(t.data.value);n.eventState.set(e,r,c)&&n._status.set(e,r)}})),d=t.getEventMapOptions(),p=n.xcell.getDefaultValues(d),a.forEach((function(t){var e="link";if(!t.hidden&&t.match(p,d,n._variables)&&t.isEligible(c)){f=!0,n.matched=!0;var r=n._variables.replaceText(t.getLink());n.linkState.set(e,r,c)&&n._status.set(e,r)}})),f&&(n.currRules.push(t.data.alias),c>n.globalLevel&&(n.globalLevel=c,n.highestValue=l,n.highestFormattedValue=u),c>=t.highestLevel&&(t.highestLevel=c,t.highestValue=l,t.highestFormattedValue=u,t.highestColor=h))}))}var l=Date.now();t.execTimes+=l-e})),e.abrupt("return");case 5:case"end":return e.stop()}}),e,this)})))}},{key:"_unsetState",value:function(){return this.eventState.unset(),this.textState.unset(),this.linkState.unset(),this.tooltipState.unset(),this.iconState.unset(),this.matched=!1,this}},{key:"getTextLevel",value:function(){return-1===this.globalLevel?"":this.globalLevel.toString()}},{key:"getStatus",value:function(t){var e=this._status.get(t);return null!=e||(null===(e=this.xcell.getStyle(t))&&(e=""),this._status.set(t,e)),e}},{key:"haveStatus",value:function(t){return this._status.has(t)}},{key:"isShape",value:function(){return this.xcell.getMxCell().isVertex()}},{key:"isConnector",value:function(){return this.xcell.getMxCell().isEdge()}},{key:"getShapeName",value:function(){if(this.xcell){var t=this.xcell.getStyle("shape");return null===t?"":t}return"Unknown"}},{key:"getShapeStyles",value:function(){return this.xcell?this.xcell.getMxCell().style:"Unknown"}},{key:"_applyCycle",value:function(){return Object(r.a)(this,void 0,void 0,ie().mark((function t(){var e=this;return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("applyCycle",o.c.debug("".concat(this.constructor.name,".").concat("applyCycle","() : ").concat(this.uid)),!this.matched&&!this.changed){t.next=5;break}return this.changed=!0,t.abrupt("return",this._ObjStates.map((function(t){return Object(r.a)(e,void 0,void 0,ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.apply();case 1:case"end":return e.stop()}}),e)})))})));case 5:return t.abrupt("return");case 6:case"end":return t.stop()}}),t,this)})))}},{key:"reset",value:function(){var t=this;return this._ObjStates.map((function(e){return Object(r.a)(t,void 0,void 0,ie().mark((function t(){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.reset();case 1:case"end":return t.stop()}}),t)})))})),this._variables.clear(),this._status.clear(),this.globalLevel=-1,this.highestFormattedValue="",this.highestValue=void 0,this.changed=!1,this}},{key:"_initCycle",value:function(){return Object(r.a)(this,void 0,void 0,ie().mark((function t(){var e=this;return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("initCycle",o.c.debug("".concat(this.constructor.name,".").concat("initCycle","() : ").concat(this.uid)),!this.changed){t.next=13;break}return t.next=5,Promise.all(this._ObjStates.map((function(t){return Object(r.a)(e,void 0,void 0,ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.prepare();case 1:case"end":return e.stop()}}),e)})))})));case 5:this._variables.clear(),this._status.clear(),this.globalLevel=-1,this.highestFormattedValue="",this.currMetrics=[],this.currRules=[],this.highestValue=void 0,this.matched=!1;case 13:return t.abrupt("return",this);case 14:case"end":return t.stop()}}),t,this)})))}},{key:"highlightCell",value:function(){return this.xcell.highlight(),this}},{key:"unhighlightCell",value:function(){return this.xcell.highlight(!1),this}},{key:"_matchRule",value:function(t){var e=t.getShapeMapOptions(),n=this.xcell.getDefaultValues(e);return!!t.matchShape(n,e)||(e=t.getTextMapOptions(),n=this.xcell.getDefaultValues(e),!!t.matchText(n,e)||(e=t.getLinkMapOptions(),n=this.xcell.getDefaultValues(e),!!t.matchLink(n,e)||(e=t.getEventMapOptions(),n=this.xcell.getDefaultValues(e),!!t.matchEvent(n,e))))}},{key:"_updateRule",value:function(t){return null!=t&&(this._matchRule(t)?this._rules.set(t.uid,t):this._rules.delete(t.uid)),this}},{key:"_haveRule",value:function(t){return this._rules.has(t.uid)}},{key:"removeRule",value:function(t){return null!=t&&this.hasRule(t)&&(this._rules.delete(t.uid),this.change()),this}},{key:"hasRule",value:function(t){return!!t&&this._rules.has(t.uid)}},{key:"_on_global_data_received",value:function(){this.constructor.name}},{key:"_on_global_data_processed",value:function(){this.constructor.name,this.update()}},{key:"_on_ruleHandler_rule_changed",value:function(t){this.constructor.name,(this._haveRule(t)||this._matchRule(t))&&(this._updateRule(t),this.update())}},{key:"_on_ruleHandler_rule_updated",value:function(t){this.constructor.name,this._updateRule(t)}},{key:"_on_ruleHandler_rule_created",value:function(t){this.constructor.name,this._updateRule(t)}},{key:"_on_ruleHandler_rule_deleted",value:function(t){this.constructor.name,this.removeRule(t)}}]),t}(),ce=function(){function t(e,n){ae(this,t),this.keys=[],this.matchedKey=new Map,this.ackKey=new Set,this.changedKey=new Map,this.defaultValue=new Map,this.matchValue=new Map,this.matchLevel=new Map,this.xgraph=e,this.xcell=n,this.init_core()}return se(t,[{key:"init_core",value:function(){}},{key:"addValue",value:function(e,n){this.hasKey(e)||this.keys.push(e),this.defaultValue.set(e,n),this.matchValue.set(e,n),this.matchLevel.set(e,t.DEFAULTLEVEL),this.matchedKey.set(e,!1),this.changedKey.set(e,!1)}},{key:"hasKey",value:function(t){return this.keys.includes(t)}},{key:"getDefaultValue",value:function(t){return this.hasKey(t)||this.defaultValue.set(t,this.default_core(t)),this.defaultValue.get(t)}},{key:"getMatchValue",value:function(t){return this.hasKey(t)||this.matchValue.set(t,this.getDefaultValue(t)),this.matchValue.get(t)}},{key:"getTargetValue",value:function(t){return this.isMatched(t)?this.getMatchValue(t):this.isChanged(t)?this.getDefaultValue(t):void 0}},{key:"ack",value:function(t){return void 0!==t&&(this.isMatched(t)?(this.matchedKey.set(t,!1),this.changedKey.set(t,!0)):this.isChanged(t)&&(this.matchedKey.set(t,!1),this.changedKey.set(t,!1)),this.ackKey.add(t)),this}},{key:"isAcked",value:function(t){return this.ackKey.has(t)}},{key:"set",value:function(t,e,n){var r=this.matchLevel.get(t);if(void 0===r){var i=this.default_core(t);return this.addValue(t,i),this.set(t,e,n)}return r<=n&&(this.matchLevel.set(t,n),this.matchedKey.set(t,!0),this.matchValue.set(t,e),!0)}},{key:"apply",value:function(t){return Object(r.a)(this,void 0,void 0,ie().mark((function e(){var n,r=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t)if(this.isMatched(t)&&!this.isAcked(t)){n=this.getMatchValue(t);try{this.apply_core(t,n)}catch(e){o.c.error("Error on reset for key "+t,e)}this.ack(t)}else this.isChanged(t)&&!this.isAcked(t)&&(this.reset(t),this.ack(t));else this.keys.forEach((function(t){r.apply(t)}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"default_core",value:function(t){return null}},{key:"apply_core",value:function(t,e){}},{key:"isMatched",value:function(t){var e=this;if(void 0!==t)return!0===this.matchedKey.get(t);var n=!1;return this.keys.forEach((function(t){n=e.isMatched(t)||n})),n}},{key:"isChanged",value:function(t){var e=this;if(void 0!==t)return!0===this.changedKey.get(t);var n=!1;return this.keys.forEach((function(t){n=!!e.isChanged(t)||n})),n}},{key:"getLevel",value:function(e){var n=this;if(void 0!==e){var r=this.matchLevel.get(e);return void 0!==r?r:t.DEFAULTLEVEL}var i=t.DEFAULTLEVEL;return this.keys.forEach((function(t){i=Math.max(n.getLevel(t),i)})),i}},{key:"unset",value:function(t){var e=this;return void 0!==t?(this.matchValue.set(t,this.defaultValue.get(t)),this.matchedKey.set(t,!1),this.matchLevel.set(t,-1)):this.keys.forEach((function(t){e.unset(t)})),this}},{key:"reset",value:function(t){var e=this;if(void 0!==t){this.unset(t);var n=this.getDefaultValue(t);try{this.reset_core(t,n)}catch(e){o.c.error("Error on reset for key "+t,e)}this.changedKey.set(t,!1),this.matchedKey.set(t,!1)}else this.keys.forEach((function(t){e.reset(t)}));return this}},{key:"reset_core",value:function(t,e){}},{key:"prepare",value:function(){return this.ackKey.clear(),this.isChanged()&&this.unset(),this}}]),t}();ce.DEFAULTLEVEL=-1;var he=function(t){Qt(n,t);var e=ee(n);function n(t,r){var i;return ae(this,n),(i=e.call(this,t,r)).keys=[],i.geo=void 0,i.init_core(),i}return se(n,[{key:"init_core",value:function(){this.geo=this.xcell.getDefaultDimension()}},{key:"default_core",value:function(t){return this._get(t)}},{key:"apply_core",value:function(t,e){void 0===e&&(e=null),this._set(t,e)}},{key:"reset_core",value:function(t,e){void 0===e&&(e=null),this._set(t,e)}},{key:"_set",value:function(t,e){switch(void 0!==e&&"null"!==e||(e=null),t){case"class":throw new Error("Class not implemented");case"text":e=String(e),this.xcell.setLabel(e);break;case"tpMetadata":if(null!==e){var n=String(e).split("@");if(n.length>0){var r=n.shift(),i=null;n.length>0&&(i=n.join("@")),this.xcell.setMetadata(r,i)}}break;case"tpText":null!=e&&0!==e.length&&"null"!==e||(e=null),this.xcell.setMetadata("tooltip",e);break;case"visibility":"0"===(e=String(e))?this.xcell.hide():"1"===e&&this.xcell.hide(!1);break;case"fold":"0"===(e=String(e))?this.xcell.collapse(!0):"1"===e&&this.xcell.collapse(!1);break;case"height":if(void 0!==e){var a=Number(e),o=this.getTargetValue("width");this.ack("width"),this.xgraph.setAnimSizeCell(this.xcell,o,a)}break;case"width":if(void 0!==e){var s=Number(e),l=this.getTargetValue("height");this.ack("height"),this.xgraph.setAnimSizeCell(this.xcell,s,l)}break;case"size":if(void 0!==this.geo){var u=Number(e);this.xgraph.setAnimZoomCell(this.xcell,u)}break;case"blink":e?this.xcell.blink(e):this.xcell.blink(e,!1);break;default:var c=t;if(Et.isMxGraphAnimStyle(t)){var h=this._get(c);h=void 0===h?tt.getDefaultValue(c):h,this.xgraph.setAnimStyleCell(this.xcell,c,e,h)}else{if(!Et.isMxGraphStyle(c))throw new Error("Unknow type ".concat(c));this.xcell.setStyle(c,e)}}}},{key:"_get",value:function(t){switch(t){case"text":return this.xcell.getLabel();case"visibility":return!this.xcell.isHidden;case"height":return void 0!==this.geo?this.geo.height:void 0;case"width":return void 0!==this.geo?this.geo.width:void 0;case"tpText":return this.xcell.getMetadata("tooltip");case"tpMetadata":return null;case"size":return 100;case"fold":return!0===this.xcell.isCollapsed()?"0":"1";case"blink":return this.xcell.isBlink;default:if(Et.isMxGraphStyle(t)){var e=t;return this.xcell.getStyle(e)}throw new Error("Unknow type ".concat(t))}}}]),n}(ce),fe=function(t){Qt(n,t);var e=ee(n);function n(t,r){var i;return ae(this,n),(i=e.call(this,t,r)).keys=[],i.init_core(),i}return se(n,[{key:"init_core",value:function(){}},{key:"default_core",value:function(t){return this.xcell.getLabel()}},{key:"apply_core",value:function(t,e){this.xcell.setLabel(e)}},{key:"reset_core",value:function(t,e){this.xcell.restoreLabel()}}]),n}(ce),de=function(t){Qt(n,t);var e=ee(n);function n(t,r){var i;return ae(this,n),(i=e.call(this,t,r)).keys=[],i.init_core(),i}return se(n,[{key:"init_core",value:function(){}},{key:"default_core",value:function(t){return this.xcell.getDefaultLink()}},{key:"apply_core",value:function(t,e){this.xcell.setLink(e)}},{key:"reset_core",value:function(t,e){this.xcell.restoreLink()}}]),n}(ce),pe=function(t){Qt(n,t);var e=ee(n);function n(t,r){var i;return ae(this,n),(i=e.call(this,t,r)).keys=[],i.init_core(),i}return se(n,[{key:"init_core",value:function(){this.xcell.enableTooltip(!1)}},{key:"default_core",value:function(t){return this.xcell.getDefaultStyle(t)}},{key:"apply_core",value:function(t,e){void 0===e&&(e=null),this.xgraph.setAnimColorCell(this.xcell,t,e)}},{key:"reset_core",value:function(t,e){this.xcell.restoreStyle(t)}}]),n}(ce),ve=function(t){Qt(n,t);var e=ee(n);function n(t,r){var i;return ae(this,n),(i=e.call(this,t,r)).keys=["tooltip"],i.init_core(),i}return se(n,[{key:"init_core",value:function(){this.addValue("tooltip",!1),this.tooltipHandler=void 0,this.xcell.enableTooltip(!1)}},{key:"setTooltip",value:function(t,e,n,r,i){var a=null,o=t.tooltipLabel;if(null!==this.tooltipHandler&&void 0!==this.tooltipHandler||(this.tooltipHandler=new Bt),t.tooltip){null!==o&&0!==o.length||("serie"===t.metricType&&(o=e.getName()),"table"===t.metricType&&(o=t.metricColumn)),t.tooltipColors&&(a=n);var s=this.tooltipHandler.addMetric().setLabel(o).setValue(r).setColor(a).setDirection(t.graphDirection);if(t.tooltipForGraph)s.addGraph(t.graphType).setColor(a).setColumn(t.metricColumn).setMetric(e).setSize(t.graphSize).setScaling(t.graphLow,t.graphHigh).setScale(t.graphScale)}t.tooltipMetadata&&this.tooltipHandler.addMetadata().setXCell(this.xcell),this.tooltipHandler.updateDate()}},{key:"apply",value:function(t){var e=this,i=Object.create(null,{apply:{get:function(){return Kt(re(n.prototype),"apply",e)}}});return Object(r.a)(this,void 0,void 0,ie().mark((function e(){var n=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==t&&"tooltip"===t?this.isMatched(t)&&!0===this.getMatchValue(t)&&(null!=this.tooltipHandler&&this.tooltipHandler.isChecked()&&this.xcell.enableTooltip().setTooltipHandler(this.tooltipHandler),i.apply.call(this,t)):this.keys.forEach((function(t){n.apply(t)}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"prepare",value:function(){return Kt(re(n.prototype),"prepare",this).call(this),this.reset(),this}},{key:"reset",value:function(t){var e=this;return void 0!==t&&"tooltip"===t?(this.xcell.enableTooltip(!1),this.tooltipHandler=void 0,Kt(re(n.prototype),"reset",this).call(this,t)):this.keys.forEach((function(t){e.reset(t)})),this}}]),n}(ce),ge=function(t){Qt(n,t);var e=ee(n);function n(t,r){var i;return ae(this,n),(i=e.call(this,t,r)).keys=[],i.init(),i}return se(n,[{key:"init",value:function(){}},{key:"default_core",value:function(t){return!1}},{key:"apply_core",value:function(t){var e=this;return void 0!==t&&"icon"===t?this.isMatched(t)&&!0===this.getMatchValue(t)?this.isChanged(t)||this.xcell.addOverlay("WARNING/ERROR"):this.isChanged(t)&&this.reset_core(t):this.keys.forEach((function(t){e.apply_core(t)})),this}},{key:"reset_core",value:function(t){var e=this;return void 0!==t&&"icon"===t?this.xcell.removeOverlay():this.keys.forEach((function(t){e.reset_core(t)})),this}}]),n}(ce);function ye(t){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function me(){me=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==e&&n.call(g,i)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==ye(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _e=["state_created","state_updated","state_changed","state_deleted"],we=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edited=!1,this.events=a.a.create(_e),this.$gf=e,this.uid=o.a.genUid(this.constructor.name),this.states=new Map,this.xgraph=n,this.init()}var e,n,i;return e=t,(n=[{key:"update",value:function(){return o.c.debug("".concat(this.constructor.name,".").concat("refresh","() : ").concat(this.uid)),this.states.forEach((function(t){return t.update()})),this}},{key:"change",value:function(){return o.c.debug("".concat(this.constructor.name,".").concat("change","() : ").concat(this.uid)),this.states.forEach((function(t){return t.change()})),this}},{key:"init",value:function(){return o.c.debug("".concat(this.constructor.name,".").concat("init","() : ").concat(this.uid)),this._eventsConnect(),this.init_states(),this}},{key:"free",value:function(){var t=this;this.states.forEach((function(e){return Object(r.a)(t,void 0,void 0,me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.free(),t.next=3,this.events.emit("state_deleted",e);case 3:case"end":return t.stop()}}),t,this)})))})),this.clear(),this.events.clear(),this._eventsDisconnect()}},{key:"clear",value:function(){var t=this;return this.states.forEach((function(e){e.free(),t.events.emit("state_deleted",e)})),this.states.clear(),this}},{key:"_eventsConnect",value:function(){this.$gf.events.connect("debug_asked",this,this._on_global_debug_asked.bind(this))}},{key:"_eventsDisconnect",value:function(){this.$gf.events.disconnect("debug_asked",this)}},{key:"init_states",value:function(){return Object(r.a)(this,void 0,void 0,me().mark((function t(){var e,n=this;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.clear(),e=this.xgraph.getXCells(),Promise.all(e.map((function(t){return Object(r.a)(n,void 0,void 0,me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.addState(t);case 1:case"end":return e.stop()}}),e,this)})))}))),t.abrupt("return",this);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"setXGraph",value:function(t){return this.xgraph=t,this}},{key:"getStates",value:function(){return this.states}},{key:"getStatesForInspect",value:function(){return Array.from(this.states.values())}},{key:"getState",value:function(t){return this.states.get(t)}},{key:"addState",value:function(t){var e=new ue(this.$gf,t,this.xgraph);return this.states.set(e.uid,e),this.events.emit("state_created",e),e}},{key:"matchXGraph",value:function(t){return this.xgraph.uid===t.uid}},{key:"_on_global_debug_asked",value:function(){this.constructor.name,this.constructor.name}}])&&be(e.prototype,n),i&&be(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xe(t){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ke(){ke=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==e&&n.call(g,i)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==xe(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function Ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Oe=["flowchart_initialized","flowchart_updated","flowchart_changed","flowchart_freed","graph_changed"],Se=function(){function t(e,n,r,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.visible=!1,this.reduce=!0,this.events=a.a.create(Oe),this.$gf=e,this.uid=o.a.genUid(this.constructor.name),this.data=i,this.data.name=n,this.container=r,s&&this._convert(s),this.init()}var e,n,i;return e=t,i=[{key:"getDefaultData",value:function(){return{name:"Main",xml:"",csv:"",download:!1,type:"xml",url:"http://<YourUrl>/<Your XML/drawio file/api>",zoom:"100%",center:!0,scale:!0,lock:!0,enableAnim:!0,tooltip:!0,grid:!1,bgColor:null}}}],(n=[{key:"init",value:function(){o.c.debug("".concat(this.constructor.name,".").concat("init","() : ").concat(this.uid)),this.init_xgraph(),this.init_stateHandler(),this.$gf.events.connect("debug_asked",this,this._on_global_debug_asked.bind(this)),this.events.emit("flowchart_initialized",this)}},{key:"update",value:function(){o.c.debug("".concat(this.constructor.name,".").concat("refresh","() : ").concat(this.uid)),this.update_graph(),this.events.emit("flowchart_updated",this)}},{key:"change",value:function(){this.change_xgraph(),this.events.emit("flowchart_changed",this)}},{key:"free",value:function(){var t,e,n;return Object(r.a)(this,void 0,void 0,ke().mark((function r(){return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null===(t=null==this?void 0:this.xgraph)||void 0===t||t.events.disconnect("graph_changed",this),this.$gf.events.disconnect("debug_asked",this),null===(e=this.xgraph)||void 0===e||e.free(),null===(n=this.stateHandler)||void 0===n||n.free(),r.next=6,this.events.emit("flowchart_freed",this);case 6:this.events.clear(),this.clear();case 8:case"end":return r.stop()}}),r,this)})))}},{key:"clear",value:function(){var t,e;return null===(t=this.xgraph)||void 0===t||t.clear(),null===(e=this.stateHandler)||void 0===e||e.clear(),this}},{key:"name",get:function(){return this.data.name},set:function(t){var e;t&&0!==t.length&&t!==this.data.name&&((null===(e=this.$gf.flowchartHandler)||void 0===e?void 0:e.getFlowchart(t))?this.$gf.notify("Flowchart with name ".concat(t," already exit"),"error"):this.data.name=t)}},{key:"type",get:function(){return this.data.type},set:function(t){this.data.type!==t&&(this.data.type=t,this.change())}},{key:"source",get:function(){return"csv"===this.data.type?this.data.csv:this.data.xml},set:function(t){if("xml"===this.type){if(this.data.xml===t)return;if(t=mt.a.isEncoded(t)?mt.a.decode(t):t,!1===mt.a.isValidXml(t))return void this.$gf.notify("Invalid XML format","error");this.data.xml=t}if("csv"===this.type){if(this.data.csv===t)return;this.data.csv=t}this.change()}},{key:"download",get:function(){return this.data.download},set:function(t){t!==this.data.download&&(this.data.download=t,this.change())}},{key:"url",get:function(){return this.data.url},set:function(t){t!==this.data.url&&(this.data.url=t,this.change())}},{key:"background",get:function(){var t;return null!==(t=this.data.bgColor)&&void 0!==t?t:""},set:function(t){t!==this.data.bgColor&&(this.data.bgColor=null!=t?t:"",this._colorBackgroundContainer(t))}},{key:"scale",get:function(){return this.data.scale},set:function(t){t!==this.data.scale&&this.xgraph&&(this.data.scale=t,this.scaleGraph(t))}},{key:"center",get:function(){return this.data.center},set:function(t){t!==this.data.center&&this.xgraph&&(this.data.center=t,this.centerGraph(t))}},{key:"tooltip",get:function(){return this.data.tooltip},set:function(t){t!==this.data.tooltip&&this.xgraph&&(this.data.tooltip=t,this.enableTooltip(t))}},{key:"grid",get:function(){return this.data.grid},set:function(t){t!==this.data.grid&&this.xgraph&&(this.data.grid=t,this.enableGrid(t))}},{key:"lock",get:function(){return this.data.lock},set:function(t){t!==this.data.lock&&this.xgraph&&(this.data.lock=t,this.enableLock(t))}},{key:"animation",get:function(){return this.data.enableAnim},set:function(t){t!==this.data.enableAnim&&this.xgraph&&(this.data.enableAnim=t,this.enableAnimation(t))}},{key:"zoom",get:function(){return this.data.zoom},set:function(t){t!==this.data.zoom&&this.xgraph&&(this.data.zoom=t,this.zoomGraph(t))}},{key:"_convert",value:function(t){return o.c.info("flowchart[".concat(this.data.name,"].import()")),(t.download||!1===this.data.download)&&(this.data.download=t.download),t.source&&(this.data.type=t.source.type,this.data.xml=t.source.xml.value,this.data.url=t.source.url.value),t.options&&(this.data.zoom=t.options.zoom,this.data.center=t.options.center,this.data.scale=t.options.scale,this.data.lock=t.options.lock,this.data.tooltip=t.options.tooltip,this.data.grid=t.options.grid,this.data.bgColor=t.options.bgColor),t.type&&(this.data.type=t.type),t.xml&&(this.data.xml=t.xml),t.csv&&(this.data.csv=t.csv),t.url&&(this.data.url=t.url),t.zoom&&(this.data.zoom=t.zoom),(t.center||!1===t.center)&&(this.data.center=t.center),(t.scale||!1===t.scale)&&(this.data.scale=t.scale),(t.lock||!1===t.lock)&&(this.data.lock=t.lock),(t.enableAnim||!1===t.enableAnim)&&(this.data.enableAnim=t.enableAnim),t.tooltip&&(this.data.tooltip=t.tooltip),(t.grid||!1===t.grid)&&(this.data.grid=t.grid),t.bgColor&&(this.data.bgColor=t.bgColor),this}},{key:"getData",value:function(){return this.data}},{key:"init_stateHandler",value:function(){return this.stateHandler&&this.stateHandler.free(),this.xgraph&&(this.stateHandler=new we(this.$gf,this.xgraph)),this}},{key:"init_xgraph",value:function(){return Object(r.a)(this,void 0,void 0,ke().mark((function t(){var e,n=this;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$gf,t.prev=1,t.abrupt("return",this.resolveSource().then((function(t){void 0!==n.xgraph&&n.xgraph.free(),n.xgraph=new Et(n.$gf,n.container,n.data.type,t),n.xgraph.events.connect("graph_changed",n,n._on_flowchart_graph_changed.bind(n)),n.update_graph(),n.events.emit("graph_changed",n.xgraph)})));case 5:t.prev=5,t.t0=t.catch(1),e.notify("Unable to initialize graph","error"),o.c.error("Unable to initialize graph",t.t0);case 9:return t.abrupt("return");case 10:case"end":return t.stop()}}),t,this,[[1,5]])})))}},{key:"change_xgraph",value:function(){var t=this.$gf;try{this.init_xgraph(),t.clearNotify()}catch(e){t.notify("Unable to initialize graph","error"),o.c.error("Unable to initialize graph",e)}return this}},{key:"getStateHandler",value:function(){return this.stateHandler}},{key:"getXGraph",value:function(){return this.xgraph}},{key:"update_graph",value:function(){var t;return this.scaleGraph(),this.centerGraph(),this.enableGrid(),this.enableTooltip(),this.enableLock(),this.zoomGraph(),this.enableAnimation(),this._colorBackgroundContainer(this.data.bgColor),null===(t=this.xgraph)||void 0===t||t.update(),this}},{key:"enableLock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lock;return this.xgraph&&this.xgraph.enableLock(t),this}},{key:"enableAnimation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.animation;return this.xgraph&&this.xgraph.enableAnimation(t),this}},{key:"enableTooltip",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tooltip;return this.xgraph&&this.xgraph.enableTooltip(t),this}},{key:"scaleGraph",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale;return null===(t=this.xgraph)||void 0===t||t.scaleDisplay(e),this}},{key:"_colorBackgroundContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.background;return this.container.style.backgroundColor=t||"",this}},{key:"getNamesByOptions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key",n=[];return this.xgraph&&(n="key"===e?this.xgraph.getDefaultValues(t):this.xgraph.getDefaultValuesWithKey(t,t.metadata)),n}},{key:"enableDioREssources",value:function(t){return this.xgraph&&this.xgraph.enableDioRessources(t),this}},{key:"resolveSource",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Object(r.a)(this,void 0,void 0,ke().mark((function e(){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.$gf,r="",!this.download){e.next=12;break}return i=n.resolveVars(this.data.url),n.notify("Loading content definition for ".concat(this.data.name),"info"),e.next=7,mt.a.loadFile(i);case 7:r=e.sent,n.clearNotify(),null!==r&&t&&(r=n.resolveVars(r)),e.next=20;break;case 12:if(this.source&&0!==this.source.length){e.next=18;break}return e.next=15,mt.a.getTemplate(this.type);case 15:r=e.sent,"xml"===this.type&&(this.data.xml=r),"csv"===this.type&&(this.data.csv=r);case 18:mt.a.isEncoded(r)&&(r=mt.a.decode(r)),r=n.resolveVars(this.source);case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,this)})))}},{key:"centerGraph",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.center;return null===(t=this.xgraph)||void 0===t||t.centerDisplay(e),this}},{key:"zoomGraph",value:function(){return arguments.length>0&&void 0!==arguments[0]||this.zoom,this.xgraph&&this.xgraph.zoomDisplay(this.data.zoom),this}},{key:"enableGrid",value:function(){return arguments.length>0&&void 0!==arguments[0]||this.grid,this.xgraph&&this.xgraph.gridDisplay(this.data.grid),this}},{key:"minify",value:function(){this.data.xml=o.a.utils.minify(this.data.xml)}},{key:"prettify",value:function(){this.data.xml=o.a.utils.prettify(this.data.xml)}},{key:"decode",value:function(){mt.a.isEncoded(this.data.xml)&&(this.data.xml=mt.a.decode(this.data.xml))}},{key:"encode",value:function(){if(!mt.a.isEncoded(this.data.xml)){var t=mt.a.encode(this.data.xml);this.data.xml=t||this.data.xml}}},{key:"getContainer",value:function(){return this.container}},{key:"toFront",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.visible=!0,this.container.className="gf-flowchartShow",t&&this.update_graph(),this}},{key:"toBack",value:function(){return this.visible=!1,this.container.className="gf-flowchartHide",this}},{key:"isVisible",value:function(){return this.visible}},{key:"_on_flowchart_graph_changed",value:function(){this.constructor.name,this.xgraph&&this.init_stateHandler()}},{key:"_on_global_debug_asked",value:function(){this.constructor.name,this.constructor.name}}])&&Ee(e.prototype,n),i&&Ee(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Te(t){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Le(){Le=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==e&&n.call(g,i)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==Te(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function Me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ce=["flowchart_created","flowchart_deleted"],De=function(){function t(e,n,r){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.flowcharts=[],this.currentFlowchartName="Main",this.firstLoad=!0,this.newMode=!1,this.sequenceNumber=0,this.mousedownTimeout=0,this.mousedown=0,this.onEdit=!1,this.postedId=void 0,this.editorWindow=null,this.events=a.a.create(Ce),this.$gf=e,this.$gf.flowchartHandler=this,this.uid=o.a.genUid(this.constructor.name),this._parentDiv=this.$gf.ctrl.flowchartsDiv,this.data=n,this.currentFlowchartName="Main",document.body.onmousedown=function(){i.mousedown=0,window.clearInterval(i.mousedownTimeout),i.mousedownTimeout=window.setInterval((function(){i.mousedown+=1}),200)},document.body.onmouseup=function(){i.mousedown=0,window.clearInterval(i.mousedownTimeout)},r&&this._convert(r),this.init()}var e,n,i;return e=t,i=[{key:"getDefaultData",value:function(){return{editorUrl:o.b.CONF_EDITOR_URL,editorTheme:o.b.CONF_EDITOR_THEME,flowcharts:[Se.getDefaultData()],allowDrawio:!0}}}],(n=[{key:"update",value:function(){this.updateFlowchart()}},{key:"change",value:function(){this.setCurrentFlowchart("Main")}},{key:"free",value:function(){this.flowcharts.forEach((function(t){return t.free()})),this.$gf.events.disconnect("debug_asked",this),this.$gf.events.disconnect("panel_closed",this),this.clear()}},{key:"init",value:function(){this.$gf.events.connect("debug_asked",this,this._on_global_debug_asked.bind(this)),this.$gf.events.connect("panel_closed",this,this._on_global_panel_closed.bind(this))}},{key:"editorUrl",get:function(){return this.data.editorUrl},set:function(t){this.data.editorUrl=t}},{key:"editorTheme",get:function(){return this.data.editorTheme},set:function(t){this.data.editorTheme=t}},{key:"allowDrawio",get:function(){return this.data.allowDrawio},set:function(t){this.data.allowDrawio!==t&&(this.data.allowDrawio=t,this.change())}},{key:"_convert",value:function(t){var e,n=this;return t&&(1===(e=Array.isArray(t)?t:t.flowcharts).length&&(this.currentFlowchartName="Main",e[0].editorTheme&&(this.data.editorTheme=e[0].editorTheme),e[0].editorUrl&&(this.data.editorUrl=e[0].editorUrl),(e[0].allowDrawio||!1===e[0].allowDrawio)&&(this.data.allowDrawio=e[0].allowDrawio)),this.data.editorTheme=t.editorTheme?t.editorTheme:this.data.editorTheme,this.data.editorUrl=t.editorUrl?t.editorUrl:this.data.editorUrl,(t.allowDrawio||!1===t.allowDrawio)&&(this.data.allowDrawio=t.allowDrawio),this.data.flowcharts=[],Array.isArray(e)&&e.forEach((function(t){n.addFlowchart(t.name,t).toBack()})),this.currentFlowchart=this.getFlowchart("Main")),this.change(),this}},{key:"clear",value:function(){return this.flowcharts.forEach((function(t){t.clear()})),this.flowcharts=[],this.data.flowcharts=[],this}},{key:"getFlowchart",value:function(t){if(t&&"string"==typeof t)for(var e=this.flowcharts.length,n=0;n<e;n++){var r=this.flowcharts[n];if(r.name===t)return r}if(t&&"number"==typeof t)return this.flowcharts[t];var i=this.getCurrentFlowchart();return void 0!==i?i:this.flowcharts[0]}},{key:"getFlowchartById",value:function(t){for(var e=this.getFlowcharts(),n=0;n<e.length;n++){var r=e[n];if(r.uid===t)return r}}},{key:"getFlowcharts",value:function(){return this.flowcharts}},{key:"countFlowcharts",value:function(){return void 0!==this.flowcharts&&Array.isArray(this.flowcharts)?this.flowcharts.length:0}},{key:"getFlowchartTmpName",value:function(){return 0===this.sequenceNumber&&(this.sequenceNumber=this.countFlowcharts()),"Flowchart-".concat(this.sequenceNumber++)}},{key:"isMultiFlowcharts",value:function(){return this.flowcharts.length>1}},{key:"isCurrentfirst",value:function(){return 0===this.getCurrentIndex()}},{key:"isCurrentLast",value:function(){return this.getCurrentIndex()===this.flowcharts.length-1}},{key:"getCurrentIndex",value:function(){return this.currentFlowchart?this.flowcharts.indexOf(this.currentFlowchart):0}},{key:"setCurrentFlowchart",value:function(t){return void 0===t?(this.currentFlowchart=this.getFlowchart("Main"),this.currentFlowchartName=this.currentFlowchart.name,this.currentFlowchart.toFront(),this.currentFlowchart):void 0===this.currentFlowchart?(this.currentFlowchart=this.getFlowchart(t),this.currentFlowchartName=this.currentFlowchart.name,this.currentFlowchart.toFront(),this.currentFlowchart):(this.currentFlowchart.name!==t&&this.currentFlowchart.toBack(),this.currentFlowchart=this.getFlowchart(t),this.currentFlowchartName=t,this.currentFlowchart.toFront(),this.currentFlowchart)}},{key:"setNextFlowchart",value:function(){var t=this.getCurrentIndex();if(t<this.flowcharts.length-1){var e=this.flowcharts[t+1].name;this.setCurrentFlowchart(e)}}},{key:"setPreviousFlowchart",value:function(){var t=this.getCurrentIndex();if(0!==t){var e=this.flowcharts[t-1].name;this.setCurrentFlowchart(e)}}},{key:"getCurrentFlowchart",value:function(){return this.currentFlowchart}},{key:"getCurrentFlowchartName",value:function(){var t=this.getCurrentFlowchart();return void 0!==t?t.name:"Main"}},{key:"createContainer",value:function(){var t=document.createElement("div");return t.style.margin="auto",t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.touchAction="none",t.style.border="none",t.style.cursor="default",t.style.right="0px",t.style.left="0px",t.style.bottom="0px",t.style.top="0px",this._parentDiv.appendChild(t),t}},{key:"addFlowchart",value:function(t,e){var n=Se.getDefaultData(),r=this.createContainer(),i=new Se(this.$gf,t,r,n,e);return this.flowcharts.push(i),this.data.flowcharts.push(n),i}},{key:"removeFlowchart",value:function(t){var e=this.getFlowchart(t);e.free();var n=this.flowcharts.indexOf(e);this.flowcharts.splice(n,1),this.data.flowcharts.splice(n,1),e.clear()}},{key:"render",value:function(t){return Object(r.a)(this,void 0,void 0,Le().mark((function t(){return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.mousedown&&!this.firstLoad||(this.firstLoad=!1,this.update(),this.$gf.ctrl.renderingCompleted());case 1:case"end":return t.stop()}}),t,this)})))}},{key:"updateFlowchart",value:function(){return this.flowcharts.forEach((function(t){return t.update()})),this}},{key:"updateMetrics",value:function(){return this}},{key:"updateRules",value:function(){return this}},{key:"refreshStates",value:function(){return this.flowcharts.forEach((function(t){var e;return null===(e=t.getStateHandler())||void 0===e?void 0:e.update()})),this}},{key:"listenMessage",value:function(t){if(void 0!==t.data&&t.data.length>0&&"fc-"===t.data.substring(0,3)){var e=t.data.substring(3),n=this.getFlowchartById(e);this.currentFlowchart=n,void 0!==n&&(this.$gf.notify("Sending current data to draw.io editor","info"),t.source.postMessage(n.data.xml,t.origin),this.postedId=n.uid)}else{if(this.onEdit&&void 0!==t.data&&t.data.length>0&&"fc-"!==t.data.substring(0,3)&&void 0!==this.currentFlowchart&&void 0!==this.postedId){var r=this.getFlowchartById(this.postedId);void 0!==r&&(this.$gf.notify("Received data from draw.io editor, refresh in progress","info"),r.source=t.data,this.change(),this.render())}(this.onEdit&&t.data||0===t.data.length)&&(window.removeEventListener("message",this.listenMessage.bind(this),!1),this.editorWindow&&this.editorWindow.close(),this.onEdit=!1,this.postedId=void 0,this.$gf.notify("Draw.io editor closed","info"))}}},{key:"openDrawEditor",value:function(t){var e=this.getFlowchart(t),n=this.data.editorUrl,r=this.data.editorTheme,i="".concat(n,"?embed=1&spin=1&libraries=1&ui=").concat(r,"&ready=fc-").concat(e.uid,"&src=grafana");this.editorWindow=window.open(i,"MxGraph Editor","width=1280, height=720"),this.onEdit=!0,this.$gf.notify("Opening current flowchart on draw.io editor","info"),window.addEventListener("message",this.listenMessage.bind(this),!1)}},{key:"getFlowchartNames",value:function(){return this.flowcharts.map((function(t){return t.data.name}))}},{key:"_on_global_debug_asked",value:function(){this.constructor.name,this.constructor.name}},{key:"_on_global_panel_closed",value:function(){this.constructor.name,this.free()}}])&&Me(e.prototype,n),i&&Me(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ae(t){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pe(){return(Pe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Ne(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}}).apply(this,arguments)}function Ne(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=He(t)););return t}function Re(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fe(t,e)}function Fe(t,e){return(Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=He(t);if(e){var i=He(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return je(this,n)}}function je(t,e){if(e&&("object"===Ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function He(t){return(He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ge(){Ge=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==e&&n.call(g,i)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==Ae(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function ze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ue(t,e,n){return e&&Ve(t.prototype,e),n&&Ve(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Be=["metric_initialized","metric_updated","metric_freed"],$e=function(){function t(e,n){ze(this,t),this.type="unknown",this.uid=o.a.genUid(this.constructor.name),this.metrics={},this.name="",this._nullPointMode="connected",this._GHValue=null,this.events=a.a.create(Be),this.$gf=e,this.dataList=n}return Ue(t,[{key:"setDataList",value:function(t){return this.dataList=t,this}},{key:"getName",value:function(){return void 0!==this.name&&null!==this.name||o.c.error("Metric => getName : Name is null"),this.name}},{key:"getValue",value:function(t,e){return null}},{key:"isValidDate",value:function(t,e){return A.isValidDate(this.getValue(t,e))}},{key:"findValue",value:function(t,e){return null}},{key:"getData",value:function(t){return[]}},{key:"getColumnsName",value:function(){return[]}},{key:"clear",value:function(){this.dataList=void 0,this.metrics={}}},{key:"update",value:function(t){this._GHValue=void 0!==t?this.findValue(t):null,this.events.emit("metric_updated",this)}},{key:"change",value:function(){}},{key:"init",value:function(){this.events.emit("metric_initialized",this)}},{key:"free",value:function(){return Object(r.a)(this,void 0,void 0,Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.clear(),t.next=3,this.events.emit("metric_freed",this);case 3:this.events.clear();case 4:case"end":return t.stop()}}),t,this)})))}}]),t}(),Ye=function(t){Re(n,t);var e=Ie(n);function n(t,r){var i;return ze(this,n),(i=e.call(this,t,r)).type="serie",i.init(),i}return Ue(n,[{key:"init",value:function(){return this.metrics=this._seriesHandler(),this._addCustomStats(),this.name=this.metrics.alias,Pe(He(n.prototype),"init",this).call(this),this}},{key:"_seriesHandler",value:function(){var t=void 0;return this.dataList&&((t=p.getTimeSeries(this.dataList)).flotpairs=t.getFlotPairs(this._nullPointMode)),t}},{key:"_addCustomStats",value:function(){try{var t=this.metrics.flotpairs.length;this.metrics.stats.last_time=this.metrics.flotpairs[t-1][0],this.metrics.stats.current=this.metrics.flotpairs[t-1][1],this.metrics.stats.current_notnull=null;for(var e=t-1;(null===this.metrics.flotpairs[e][1]||void 0===this.metrics.flotpairs[e][1])&&e>=0;)e-=1;for(e>=0&&(this.metrics.stats.current_notnull=this.metrics.flotpairs[e][1]),this.metrics.stats.first=this.metrics.flotpairs[0][1],this.metrics.stats.first_notnull=null,e=0;(null===this.metrics.flotpairs[e][1]||void 0===this.metrics.flotpairs[e][1])&&e<t;)e+=1;e<t&&(this.metrics.stats.first_notnull=this.metrics.flotpairs[e][1])}catch(t){o.c.error("Unable to add custom stats",t)}}},{key:"getValue",value:function(t){arguments.length>1&&void 0!==arguments[1]||this.name;try{return this.metrics.stats[t]}catch(t){return o.c.error("datapoint for serie is null",t),null}}},{key:"findValue",value:function(t){var e=0,n=this.metrics.flotpairs.length-1,r=!(n>0);t=Math.round(t);for(var i=null;!r;){var a=e+Math.round((n-e)/2);this.metrics.flotpairs[a][0]===t&&(i=this.metrics.flotpairs[a][1],r=!0),!r&&e<a&&a<n?(t>this.metrics.flotpairs[a][0]&&(e=a),t<this.metrics.flotpairs[a][0]&&(n=a)):(i=this.metrics.flotpairs[a][0]>t&&a>=1?this.metrics.flotpairs[a-1][1]:this.metrics.flotpairs[a][1],r=!0)}return i}},{key:"getData",value:function(){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.metrics.flotpairs.map((function(e){return t?{x:e[0],y:Math.log10(e[1])}:{x:e[0],y:e[1]}}))}},{key:"getColumnsName",value:function(){return["Time",this.name]}}]),n}($e),Xe=function(t){Re(n,t);var e=Ie(n);function n(t,r){var i;return ze(this,n),(i=e.call(this,t,r)).tableColumnOptions={},i.tableColumn="",i.allIsNull=!0,i.allIsZero=!0,i.type="table",i.init(),i}return Ue(n,[{key:"init",value:function(){var t;return this.metrics=this._tableHandler(),this.name=null===(t=this.dataList)||void 0===t?void 0:t.refId,Pe(He(n.prototype),"init",this).call(this),this}},{key:"_tableHandler",value:function(){var t,e,n,r={datapoints:[],columnNames:{},stats:{}};return null===(t=this.dataList)||void 0===t||t.columns.forEach((function(t,e){r.columnNames[e]=t.text,"time"===t.text.toString().toLowerCase()&&(r.timeIndex=e,r.timeColumn=t.text)})),this.tableColumnOptions=r.columnNames,Object(s.find)(null===(e=this.dataList)||void 0===e?void 0:e.columns,["text",this.tableColumn])||this._setTableColumnToSensibleDefault(),null===(n=this.dataList)||void 0===n||n.rows.forEach((function(t){var e={};t.forEach((function(t,n){var i=r.columnNames[n];e[i]=t})),r.datapoints.push(e)})),this.metrics.flotpairs=this._getFlotPairs(this._nullPointMode,r),r}},{key:"_setTableColumnToSensibleDefault",value:function(){this.dataList&&(1===this.dataList.columns.length?this.tableColumn=this.dataList.columns[0].text:this.tableColumn=Object(s.find)(this.dataList.columns,(function(t){return"time"!==t.type})).text)}},{key:"_getFlotPairs",value:function(t,e){var n=[],r="connected"===t,i="null as zero"===t;for(var a in e.allIsNull=!0,e.allIsZero=!0,e.columnNames){var l=e.columnNames[a];e.stats[l]={},e.stats[l].name=l,e.stats[l].total=0,e.stats[l].max=-Number.MAX_VALUE,e.stats[l].min=Number.MAX_VALUE,e.stats[l].logmin=Number.MAX_VALUE,e.stats[l].avg=null,e.stats[l].current=null,e.stats[l].current_notnull=null,e.stats[l].first=null,e.stats[l].first_notnull=null,e.stats[l].delta=0,e.stats[l].diff=null,e.stats[l].range=null,e.stats[l].timeStep=Number.MAX_VALUE;var u=void 0,c=void 0,h=0,f=void 0,d=0,p=!0;try{for(var v=0;v<e.datapoints.length;v++){if(e.timeColumn&&(u=e.datapoints[v][e.timeColumn]),c=e.datapoints[v][l],void 0!==f){var g=u-f;g<e.stats[l].timeStep&&(e.stats[l].timeStep=g)}if(f=u,null===c){if(r)continue;i&&(c=0)}null!==c&&(Object(s.isNumber)(c)&&(e.stats[l].total+=c,this.allIsNull=!1,h++),c>e.stats[l].max&&(e.stats[l].max=c),c<e.stats[l].min&&(e.stats[l].min=c),null===e.stats[l].first?e.stats[l].first=c:d>c?(p=!1,v===e.datapoints.length-1&&(e.stats[l].delta+=c)):(e.stats[l].delta+=p?c-d:c,p=!0),d=c,c<e.stats[l].logmin&&c>0&&(e.stats[l].logmin=c),0!==c&&(this.allIsZero=!1)),n.push([u,c])}}catch(t){o.c.error("Unable to aggregate data",t)}u&&(e.stats[l].last_time=u),e.stats[l].max===-Number.MAX_VALUE&&(e.stats[l].max=null),e.stats[l].min===Number.MAX_VALUE&&(e.stats[l].min=null),n.length&&!this.allIsNull&&(e.stats[l].avg=e.stats[l].total/h,e.stats[l].current=n[n.length-1][1],null===e.stats[l].current&&n.length>1&&(e.stats[l].current=n[n.length-2][1])),null!==e.stats[l].max&&null!==e.stats[l].min&&(e.stats[l].range=e.stats[l].max-e.stats[l].min),null!==e.stats[l].current&&null!==e.stats[l].first&&(e.stats[l].diff=e.stats[l].current-e.stats[l].first),e.stats[l].count=n.length}return n}},{key:"getValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Value";try{return this.metrics.stats[e][t]}catch(t){return o.c.error("datapoint for table is null",t),null}}},{key:"findValue",value:function(t,e){var n=0,r=this.metrics.datapoints.length-1,i=!(r>0&&this.metrics.datapoints[n][this.metrics.timeColumn]<t);t=Math.round(t);for(var a=null;!i;){var o=n+Math.round((r-n)/2);this.metrics.datapoints[o][this.metrics.timeColumn]===t&&(a=this.metrics.datapoints[o][e],i=!0),!i&&n<o&&o<r?(t>this.metrics.datapoints[o][this.metrics.timeColumn]&&(n=o),t<this.metrics.datapoints[o][this.metrics.timeColumn]&&(r=o)):(a=this.metrics.datapoints[o][this.metrics.timeColumn]>t&&o>=1?this.metrics.datapoints[o-1][e]:this.metrics.datapoints[o][e],i=!0)}return a}},{key:"getColumnIndex",value:function(t){for(var e in this.tableColumnOptions)if(t===this.tableColumnOptions[e])return Number(e);return null}},{key:"getColumnsName",value:function(){var t=[];for(var e in this.tableColumnOptions)t.push(this.tableColumnOptions[e]);return t}},{key:"getData",value:function(t){var e=this;return this.metrics.timeColumn?this.metrics.datapoints.map((function(n){return{x:n[e.metrics.timeColumn],y:n[t]}})):this.metrics.datapoints.map((function(e){return e[t]}))}}]),n}($e);function We(t){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ze(){Ze=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==e&&n.call(g,i)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==We(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ke=["metric_created","metric_updated","metric_deleted"],Je=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataList=[],this.tables=new Map,this.series=new Map,this.metrics=new Map,this.events=a.a.create(Ke),this.$gf=e,this.$gf.metricHandler=this,this.uid=o.a.genUid("MetricHandler"),this.init()}var e,n,i;return e=t,(n=[{key:"change",value:function(){return Object(r.a)(this,void 0,void 0,Ze().mark((function t(){var e,n=this;return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$gf,this.clear(),t.next=4,Promise.all(this.dataList.map((function(t){return Object(r.a)(n,void 0,void 0,Ze().mark((function e(){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.addMetric(t);case 1:case"end":return e.stop()}}),e,this)})))})));case 4:return e.events.emit("data_processed"),t.abrupt("return");case 6:case"end":return t.stop()}}),t,this)})))}},{key:"update",value:function(t){return o.c.debug("".concat(this.constructor.name,".").concat("refresh","() : ").concat(this.uid)),this.metrics.forEach((function(e){return e.update(t)})),this}},{key:"init",value:function(){o.c.debug("".concat(this.constructor.name,".").concat("init","() : ").concat(this.uid));var t=this.$gf;return t.events.connect("data_updated",this,this._on_global_data_updated.bind(this)),t.events.connect("debug_asked",this,this._on_global_debug_asked.bind(this)),t.events.connect("panel_closed",this,this._on_global_panel_closed.bind(this)),this}},{key:"free",value:function(){var t=this,e=this.$gf;return o.c.debug("".concat(this.constructor.name,".").concat("free","() : ").concat(this.uid)),this.metrics.forEach((function(e){e.free(),t.events.emit("metric_deleted",e)})),e.events.disconnect("data_updated",this),e.events.disconnect("debug_asked",this),e.events.disconnect("panel_closed",this),e.events.disconnect("editmode_closed",this),this.clear(),this}},{key:"setDataList",value:function(t){this.dataList=t}},{key:"addMetric",value:function(t){return"table"===t.type?this.addTable(t):this.addSerie(t)}},{key:"removeMetric",value:function(t){return Object(r.a)(this,void 0,void 0,Ze().mark((function e(){var n,r;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,r=t.type,t.free(),"serie"===r&&this.series.delete(n),"table"===r&&this.tables.delete(n),this.metrics.delete(n),e.next=8,this.events.emit("metric_deleted",t);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"addTable",value:function(t){var e=new Xe(this.$gf,t);return this.tables.set(e.uid,e),this.metrics.set(e.uid,e),this.events.emit("metric_created",e),e}},{key:"addSerie",value:function(t){var e=new Ye(this.$gf,t);return this.series.set(e.uid,e),this.metrics.set(e.uid,e),this.events.emit("metric_created",e),e}},{key:"getNames",value:function(t){return this.getMetrics(t).map((function(t){return t.getName()}))}},{key:"getMetrics",value:function(t){return"serie"===t?Array.from(this.series.values()):"table"===t?Array.from(this.tables.values()):Array.from(this.metrics.values())}},{key:"isTypeOf",value:function(t){return("serie"===t||"table"===t)&&this.series.size>0}},{key:"findMetrics",value:function(t,e){return this.getMetrics(e).filter((function(e){return o.a.matchString(e.getName(),t,!0)}))}},{key:"refreshMetrics",value:function(t){return this.metrics.forEach((function(e){e.update(t)})),this}},{key:"getColumnsName",value:function(t,e){var n=this.findMetrics(t,e),r=[];return n.forEach((function(t){r=r.concat(t.getColumnsName())})),r}},{key:"clear",value:function(){var t=this;this.metrics.forEach((function(e){t.removeMetric(e)}))}},{key:"isMultipleType",value:function(){return this.isTypeOf("serie")&&this.isTypeOf("table")}},{key:"getMetricNames",value:function(){var t=[],e="",n=this.isMultipleType();return n&&(e="Series/"),this.series.forEach((function(n){return t.push("".concat(e).concat(n.getName()))})),n&&(e="Tables/"),this.tables.forEach((function(n){n.getColumnsName().forEach((function(r){return t.push("".concat(e).concat(n,"/").concat(r))}))})),t}},{key:"_on_global_data_updated",value:function(t){this.constructor.name,this.setDataList(t),this.change()}},{key:"_on_global_debug_asked",value:function(){this.constructor.name}},{key:"_on_global_panel_closed",value:function(){this.constructor.name,this.free()}}])&&qe(e.prototype,n),i&&qe(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qe(t){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tn(){tn=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==e&&n.call(g,i)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==Qe(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function en(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rn(t,e,n){return e&&nn(t.prototype,e),n&&nn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function an(t,e){return(an=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function on(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=un(t);if(e){var i=un(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return sn(this,n)}}function sn(t,e){if(e&&("object"===Qe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ln(t)}function ln(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function un(t){return(un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cn=function(t){n.$inject=["$scope","$injector","$rootScope","templateSrv"],function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&an(t,e)}(n,t);var e=on(n);function n(t,r,i,a){var l;return en(this,n),(l=e.call(this,t,r)).graphOverTimeStamp=0,l.onMapping=!1,l.uid=o.a.genUid(l.constructor.name),l.graphHoverTimer=void 0,l.mouseIn=!1,l.firstLoad=!0,l.uid,l.$gf=o.a.create(t,a,l.dashboard,ln(l)),l.$rootScope=i,l.$scope=t,t.editor=ln(l),l.version=o.d.getVersion(),l.templateSrv=a,l.changedSource=!0,l.changedData=!0,l.changedOptions=!0,l.parentDiv=document.createElement("div"),l.flowchartsDiv=document.createElement("div"),l.panelDefaults=n.getDefaultData(),Object(s.defaults)(l.panel,l.panelDefaults),l.panel.graphId="flowchart_".concat(l.panel.id),l.containerDivId="container_".concat(l.panel.graphId),Object.assign({},l.panel),window.setTimeout((function(){l._on_grafana_refreshed()}),1e3),l.events.on("render",l._on_grafana_rendered.bind(ln(l))),l.events.on("refresh",l._on_grafana_refreshed.bind(ln(l))),l.events.on("data-received",l._on_grafana_data_received.bind(ln(l))),l.events.on("data-error",l._on_grafana_data_error.bind(ln(l))),l.events.on("data-snapshot-load",l._on_grafana_data_received.bind(ln(l))),l.events.on("init-edit-mode",l._on_grafana_mode_edited.bind(ln(l))),l.events.on("panel-teardown",l._on_grafana_TearDown.bind(ln(l))),p.appEvents.on("graph-hover",l._on_grafana_graph_hover.bind(ln(l)),l.$scope),p.appEvents.on("graph-hover-clear",l._on_grafana_graph_hover_clear.bind(ln(l)),l.$scope),l.dashboard.events.on("template-variable-value-updated",l._on_grafana_template_variable_value_updated.bind(ln(l)),t),l}return rn(n,[{key:"init_ctrl",value:function(){this._eventsConnect(),this.init_handlers()}},{key:"free",value:function(){this.free_ctrl()}},{key:"free_ctrl",value:function(){this._eventsDisconnect(),this.free_handlers()}},{key:"change",value:function(){this.free_ctrl(),this.init_ctrl()}},{key:"_eventsConnect",value:function(){this.$gf.events.connect("debug_asked",this,this._on_global_debug_asked.bind(this)),this.$gf.events.connect("panel_closed",this,this._on_global_panel_closed.bind(this)),this.$gf.events.connect("editmode_closed",this,this._on_global_editmode_closed.bind(this)),this.$gf.events.connect("mapping_enabled",this,this._on_global_mapping_enabled.bind(this)),this.$gf.events.connect("mapping_disabled",this,this._on_global_mapping_disabled.bind(this))}},{key:"_eventsDisconnect",value:function(){this.$gf.events.disconnect("debug_asked",this),this.$gf.events.disconnect("panel_closed",this),this.$gf.events.disconnect("mapping_enabled",this),this.$gf.events.disconnect("mapping_disabled",this)}},{key:"init_handlers",value:function(){if(o.c.debug("".concat(this.constructor.name,".").concat("initHandlers","()")),this.metricHandler||(this.metricHandler=new Je(this.$gf)),!this.rulesHandler){var t=At.getDefaultData();this.rulesHandler=new At(this.$gf,t,this.panel.rulesData),this.panel.rulesData=t}if(this.panel.newFlag&&0===this.rulesHandler.countRules()&&this.rulesHandler.addRule(".*"),!this.flowchartHandler){var e=De.getDefaultData();this.flowchartHandler=new De(this.$gf,e,this.panel.flowchartsData),this.panel.flowchartsData=e}this.panel.newFlag&&this.flowchartHandler&&0===this.flowchartHandler.countFlowcharts()&&this.flowchartHandler.addFlowchart("Main").init()}},{key:"free_handlers",value:function(){var t,e,n;null===(t=this.metricHandler)||void 0===t||t.free(),null===(e=this.rulesHandler)||void 0===e||e.free(),null===(n=this.flowchartHandler)||void 0===n||n.free(),this.metricHandler=void 0,this.rulesHandler=void 0,this.flowchartHandler=void 0}},{key:"_setGraphHover",value:function(){var t;null===(t=this.metricHandler)||void 0===t||t.refreshMetrics(this.graphOverTimeStamp)}},{key:"_isClosedMode",value:function(){return!(!this.panel.gf_isEdited||this.panel.isEditing)&&(delete this.panel.gf_isEdited,this.events,this._eventsDisconnect(),this._eventsConnect(),this.$gf.events.emit("editmode_closed"),!0)}},{key:"link",value:function(t,e,n,r){this.$panelElem=e;var i=this.$panelElem.find("#flowcharting-section");this.parentDiv=i[0];var a=i.find("#flowcharting-panel-content");this.flowchartsDiv=a[0],this.notify("Initialisation MXGRAPH/DRAW.IO Libs"),this.notify("Load configuration"),this.panel.gf_isEdited&&delete this.panel.gf_isEdited,mt.a.init(),this.init_ctrl(),this.panel.version,o.d.getVersion(),this.clearNotify(),this.panel.version=this.version,!0===this.panel.isEditing&&(this.panel.gf_isEdited=!0)}},{key:"isMouseInPanel",value:function(){return this.mouseIn}},{key:"displayMultiCursor",value:function(){return!!this.flowchartHandler&&this.flowchartHandler.isMultiFlowcharts()}},{key:"displayFirstCursor",value:function(){return!!this.flowchartHandler&&!this.flowchartHandler.isCurrentfirst()}},{key:"displayLastCursor",value:function(){return!!this.flowchartHandler&&!this.flowchartHandler.isCurrentLast()}},{key:"displayNextFlowchart",value:function(){this.flowchartHandler&&this.flowchartHandler.setNextFlowchart()}},{key:"displayPreviousFlowchart",value:function(){this.flowchartHandler&&this.flowchartHandler.setPreviousFlowchart()}},{key:"_on_grafana_mode_edited",value:function(){this.constructor.name,this.uid,"isEditing=".concat(this.panel.isEditing),this.addEditorTab("Flowcharts",ht,2),this.addEditorTab("Rules",lt,3),this.addEditorTab("Inspect",Tt,4)}},{key:"_on_grafana_TearDown",value:function(){this.constructor.name,this.uid,"isEditing=".concat(this.panel.isEditing),this.$gf.events.emit("panel_closed")}},{key:"_on_grafana_graph_hover",value:function(t){var e;this.constructor.name,this.uid;var n=this.flowchartHandler;if(this.dashboard.sharedTooltipModeEnabled()&&void 0!==n){this.graphHoverTimer=t.pos.x;void 0===this.graphHoverTimer&&(this.graphHoverTimer=o.f.create("graph-hover"));var r=o.b.CONF_GRAPHHOVER_DELAY;this.graphHoverTimer.addStep(this._setGraphHover.bind(this),r).start()}else null===(e=this.graphHoverTimer)||void 0===e||e.cancel(),this.graphHoverTimer=void 0}},{key:"_on_grafana_graph_hover_clear",value:function(t){var e,n;this.constructor.name,this.uid,void 0!==this.flowchartHandler&&void 0!==this.graphHoverTimer&&(null===(e=this.graphHoverTimer)||void 0===e||e.cancel(),this.graphHoverTimer=void 0,null===(n=this.metricHandler)||void 0===n||n.refreshMetrics())}},{key:"_on_grafana_refreshed",value:function(){var t;this.constructor.name,this.uid,null===(t=this.flowchartHandler)||void 0===t||t.update(),this.firstLoad=!1}},{key:"_on_grafana_template_variable_value_updated",value:function(){this.constructor.name,this.uid,this.$gf.events.emit("variables_changed"),this.flowchartHandler}},{key:"_on_grafana_rendered",value:function(){var t;this.constructor.name,this.uid,!this._isClosedMode()&&(null===(t=this.flowchartHandler)||void 0===t||t.update())}},{key:"_on_grafana_data_received",value:function(t){this.constructor.name,this.uid,this.dataList=t,this.$gf.events.emit("data_updated",t)}},{key:"_on_grafana_data_error",value:function(){this.constructor.name,this.uid,this.render()}},{key:"_on_global_debug_asked",value:function(){this.constructor.name,this.uid,this.panel}},{key:"_on_global_panel_closed",value:function(){this.constructor.name,this.uid,this.free()}},{key:"_on_global_editmode_closed",value:function(){return Object(r.a)(this,void 0,void 0,tn().mark((function t(){return tn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.constructor.name,this.uid,this.notify("Configuration updating..."),this.free_ctrl(),this.init_ctrl(),t.next=6,new Promise((function(t){return setTimeout(t,100)}));case 6:return this.$gf.events.emit("data_updated",this.dataList),this.clearNotify(),t.abrupt("return");case 9:case"end":return t.stop()}}),t,this)})))}},{key:"_on_global_mapping_enabled",value:function(){this.constructor.name,this.uid,this.onMapping=!0,this.flowchartsDiv.style.cursor='url("'.concat(o.d.getStaticPath(),'cursor-marker.svg") 8 16, crosshair'),this.flowchartsDiv.scrollIntoView(),this.flowchartsDiv.focus()}},{key:"_on_global_mapping_disabled",value:function(){this.constructor.name,this.uid,this.onMapping=!1,this.flowchartsDiv.style.cursor="auto"}},{key:"$onDestroy",value:function(){o.f.stop()}},{key:"notify",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn.INFO_MESSAGE;if(this.message)this.message.setMessage(t,e);else{var n=this.$panelElem.find("#flowcharting-section"),r=n.find("#flowcharting-message");this.message=new hn(r[0]),this.notify(t,e)}}},{key:"clearNotify",value:function(){this.message&&this.message.clearMessage()}}],[{key:"getDefaultData",value:function(){return{format:"short",valueName:"current",rulesData:At.getDefaultData(),flowchartsData:De.getDefaultData(),version:o.d.getVersion()}}}]),n}(i.MetricsPanelCtrl);cn.templateUrl="./partials/module.html";var hn=function(){function t(e){en(this,t),this.uid=o.a.genUid(),this.container=e;var n=this.container.querySelector("#message-text");null==n?(this.message=document.createElement("span"),this.container.appendChild(this.message)):this.message=n}return rn(t,[{key:"setMessage",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.INFO_MESSAGE;return Object(r.a)(this,void 0,void 0,tn().mark((function r(){return tn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.container||!this.message){r.next=15;break}this.message.innerHTML=e,r.t0=n,r.next=r.t0===t.INFO_MESSAGE?5:r.t0===t.ERROR_MESSAGE?7:r.t0===t.WARNING_MESSAGE?9:11;break;case 5:return this.message.style.color=t.INFO_COLOR,r.abrupt("break",13);case 7:return this.message.style.color=t.ERROR_COLOR,r.abrupt("break",13);case 9:return this.message.style.color=t.WARNING_COLOR,r.abrupt("break",13);case 11:return this.message.style.color=t.INFO_COLOR,r.abrupt("break",13);case 13:o.f.create("message-".concat(this.uid)).addStep(this.clearMessage.bind(this),o.b.CONF_GFMESSAGE_MS),this.container.style.display="";case 15:case"end":return r.stop()}}),r,this)})))}},{key:"clearMessage",value:function(){this.container&&this.message&&(this.container.style.display="none",this.message.innerHTML=""),o.f.stop("message-".concat(this.uid))}}]),t}();hn.ERROR_MESSAGE="error",hn.ERROR_COLOR="red",hn.INFO_MESSAGE="info",hn.INFO_COLOR="white",hn.WARNING_MESSAGE="warning",hn.WARNING_COLOR="yellow",n.d(e,"PanelCtrl",(function(){return cn})),p.loadCss()}])}));
//# sourceMappingURL=module.js.map